{"ast":null,"code":"import _toConsumableArray from \"C:\\\\Users\\\\win10\\\\CODE\\\\cosmos\\\\node_modules\\\\@babel\\\\runtime\\\\helpers\\\\esm\\\\toConsumableArray.js\";\nimport _assertThisInitialized from \"C:\\\\Users\\\\win10\\\\CODE\\\\cosmos\\\\node_modules\\\\@babel\\\\runtime\\\\helpers\\\\esm\\\\assertThisInitialized.js\";\nimport _get from \"C:\\\\Users\\\\win10\\\\CODE\\\\cosmos\\\\node_modules\\\\@babel\\\\runtime\\\\helpers\\\\esm\\\\get.js\";\nimport _getPrototypeOf from \"C:\\\\Users\\\\win10\\\\CODE\\\\cosmos\\\\node_modules\\\\@babel\\\\runtime\\\\helpers\\\\esm\\\\getPrototypeOf.js\";\nimport _inherits from \"C:\\\\Users\\\\win10\\\\CODE\\\\cosmos\\\\node_modules\\\\@babel\\\\runtime\\\\helpers\\\\esm\\\\inherits.js\";\nimport _createSuper from \"C:\\\\Users\\\\win10\\\\CODE\\\\cosmos\\\\node_modules\\\\@babel\\\\runtime\\\\helpers\\\\esm\\\\createSuper.js\";\nimport _defineProperty2 from \"C:\\\\Users\\\\win10\\\\CODE\\\\cosmos\\\\node_modules\\\\@babel\\\\runtime\\\\helpers\\\\esm\\\\defineProperty.js\";\nimport _classCallCheck from \"C:\\\\Users\\\\win10\\\\CODE\\\\cosmos\\\\node_modules\\\\@babel\\\\runtime\\\\helpers\\\\esm\\\\classCallCheck.js\";\nimport _createClass from \"C:\\\\Users\\\\win10\\\\CODE\\\\cosmos\\\\node_modules\\\\@babel\\\\runtime\\\\helpers\\\\esm\\\\createClass.js\";\nimport _createForOfIteratorHelper from \"C:\\\\Users\\\\win10\\\\CODE\\\\cosmos\\\\node_modules\\\\@babel\\\\runtime\\\\helpers\\\\esm\\\\createForOfIteratorHelper.js\";\nimport _slicedToArray from \"C:\\\\Users\\\\win10\\\\CODE\\\\cosmos\\\\node_modules\\\\@babel\\\\runtime\\\\helpers\\\\esm\\\\slicedToArray.js\";\nimport { V, c as computeRubberband } from './maths-b2a210f4.esm.js';\n\nfunction _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nfunction ownKeys(object, enumerableOnly) {\n  var keys = Object.keys(object);\n\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n\n    if (enumerableOnly) {\n      symbols = symbols.filter(function (sym) {\n        return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n      });\n    }\n\n    keys.push.apply(keys, symbols);\n  }\n\n  return keys;\n}\n\nfunction _objectSpread2(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i] != null ? arguments[i] : {};\n\n    if (i % 2) {\n      ownKeys(Object(source), true).forEach(function (key) {\n        _defineProperty(target, key, source[key]);\n      });\n    } else if (Object.getOwnPropertyDescriptors) {\n      Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));\n    } else {\n      ownKeys(Object(source)).forEach(function (key) {\n        Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n      });\n    }\n  }\n\n  return target;\n}\n\nvar EVENT_TYPE_MAP = {\n  pointer: {\n    start: 'down',\n    change: 'move',\n    end: 'up'\n  },\n  mouse: {\n    start: 'down',\n    change: 'move',\n    end: 'up'\n  },\n  touch: {\n    start: 'start',\n    change: 'move',\n    end: 'end'\n  },\n  gesture: {\n    start: 'start',\n    change: 'change',\n    end: 'end'\n  }\n};\n\nfunction capitalize(string) {\n  if (!string) return '';\n  return string[0].toUpperCase() + string.slice(1);\n}\n\nfunction toHandlerProp(device) {\n  var action = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : '';\n  var capture = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : false;\n  var deviceProps = EVENT_TYPE_MAP[device];\n  var actionKey = deviceProps ? deviceProps[action] || action : action;\n  return 'on' + capitalize(device) + capitalize(actionKey) + (capture ? 'Capture' : '');\n}\n\nfunction toDomEventType(device) {\n  var action = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : '';\n  var deviceProps = EVENT_TYPE_MAP[device];\n  var actionKey = deviceProps ? deviceProps[action] || action : action;\n  return device + actionKey;\n}\n\nfunction isTouch(event) {\n  return 'touches' in event;\n}\n\nfunction getCurrentTargetTouchList(event) {\n  return Array.from(event.touches).filter(function (e) {\n    var _event$currentTarget, _event$currentTarget$;\n\n    return e.target === event.currentTarget || ((_event$currentTarget = event.currentTarget) === null || _event$currentTarget === void 0 ? void 0 : (_event$currentTarget$ = _event$currentTarget.contains) === null || _event$currentTarget$ === void 0 ? void 0 : _event$currentTarget$.call(_event$currentTarget, e.target));\n  });\n}\n\nfunction getTouchList(event) {\n  return event.type === 'touchend' ? event.changedTouches : event.targetTouches;\n}\n\nfunction getValueEvent(event) {\n  return isTouch(event) ? getTouchList(event)[0] : event;\n}\n\nfunction distanceAngle(P1, P2) {\n  var dx = P2.clientX - P1.clientX;\n  var dy = P2.clientY - P1.clientY;\n  var cx = (P2.clientX + P1.clientX) / 2;\n  var cy = (P2.clientY + P1.clientY) / 2;\n  var distance = Math.hypot(dx, dy);\n  var angle = -(Math.atan2(dx, dy) * 180) / Math.PI;\n  var origin = [cx, cy];\n  return {\n    angle: angle,\n    distance: distance,\n    origin: origin\n  };\n}\n\nfunction touchIds(event) {\n  return getCurrentTargetTouchList(event).map(function (touch) {\n    return touch.identifier;\n  });\n}\n\nfunction touchDistanceAngle(event, ids) {\n  var _Array$from$filter = Array.from(event.touches).filter(function (touch) {\n    return ids.includes(touch.identifier);\n  }),\n      _Array$from$filter2 = _slicedToArray(_Array$from$filter, 2),\n      P1 = _Array$from$filter2[0],\n      P2 = _Array$from$filter2[1];\n\n  return distanceAngle(P1, P2);\n}\n\nfunction pointerId(event) {\n  var valueEvent = getValueEvent(event);\n  return isTouch(event) ? valueEvent.identifier : valueEvent.pointerId;\n}\n\nfunction pointerValues(event) {\n  var valueEvent = getValueEvent(event);\n  return [valueEvent.clientX, valueEvent.clientY];\n}\n\nvar LINE_HEIGHT = 40;\nvar PAGE_HEIGHT = 800;\n\nfunction wheelValues(event) {\n  var deltaX = event.deltaX,\n      deltaY = event.deltaY,\n      deltaMode = event.deltaMode;\n\n  if (deltaMode === 1) {\n    deltaX *= LINE_HEIGHT;\n    deltaY *= LINE_HEIGHT;\n  } else if (deltaMode === 2) {\n    deltaX *= PAGE_HEIGHT;\n    deltaY *= PAGE_HEIGHT;\n  }\n\n  return [deltaX, deltaY];\n}\n\nfunction scrollValues(event) {\n  var _ref, _ref2;\n\n  var _event$currentTarget2 = event.currentTarget,\n      scrollX = _event$currentTarget2.scrollX,\n      scrollY = _event$currentTarget2.scrollY,\n      scrollLeft = _event$currentTarget2.scrollLeft,\n      scrollTop = _event$currentTarget2.scrollTop;\n  return [(_ref = scrollX !== null && scrollX !== void 0 ? scrollX : scrollLeft) !== null && _ref !== void 0 ? _ref : 0, (_ref2 = scrollY !== null && scrollY !== void 0 ? scrollY : scrollTop) !== null && _ref2 !== void 0 ? _ref2 : 0];\n}\n\nfunction getEventDetails(event) {\n  var payload = {};\n  if ('buttons' in event) payload.buttons = event.buttons;\n\n  if ('shiftKey' in event) {\n    var shiftKey = event.shiftKey,\n        altKey = event.altKey,\n        metaKey = event.metaKey,\n        ctrlKey = event.ctrlKey;\n    Object.assign(payload, {\n      shiftKey: shiftKey,\n      altKey: altKey,\n      metaKey: metaKey,\n      ctrlKey: ctrlKey\n    });\n  }\n\n  return payload;\n}\n\nfunction call(v) {\n  if (typeof v === 'function') {\n    for (var _len = arguments.length, args = new Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n      args[_key - 1] = arguments[_key];\n    }\n\n    return v.apply(void 0, args);\n  } else {\n    return v;\n  }\n}\n\nfunction noop() {}\n\nfunction chain() {\n  for (var _len2 = arguments.length, fns = new Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\n    fns[_key2] = arguments[_key2];\n  }\n\n  if (fns.length === 0) return noop;\n  if (fns.length === 1) return fns[0];\n  return function () {\n    var result;\n\n    var _iterator = _createForOfIteratorHelper(fns),\n        _step2;\n\n    try {\n      for (_iterator.s(); !(_step2 = _iterator.n()).done;) {\n        var fn = _step2.value;\n        result = fn.apply(this, arguments) || result;\n      }\n    } catch (err) {\n      _iterator.e(err);\n    } finally {\n      _iterator.f();\n    }\n\n    return result;\n  };\n}\n\nfunction assignDefault(value, fallback) {\n  return Object.assign({}, fallback, value || {});\n}\n\nvar BEFORE_LAST_KINEMATICS_DELAY = 32;\n\nvar Engine = /*#__PURE__*/function () {\n  function Engine(ctrl, args, key) {\n    _classCallCheck(this, Engine);\n\n    this.ctrl = ctrl;\n    this.args = args;\n    this.key = key;\n\n    if (!this.state) {\n      this.state = {};\n      this.computeValues([0, 0]);\n      this.computeInitial();\n      if (this.init) this.init();\n      this.reset();\n    }\n  }\n\n  _createClass(Engine, [{\n    key: \"state\",\n    get: function get() {\n      return this.ctrl.state[this.key];\n    },\n    set: function set(state) {\n      this.ctrl.state[this.key] = state;\n    }\n  }, {\n    key: \"shared\",\n    get: function get() {\n      return this.ctrl.state.shared;\n    }\n  }, {\n    key: \"eventStore\",\n    get: function get() {\n      return this.ctrl.gestureEventStores[this.key];\n    }\n  }, {\n    key: \"timeoutStore\",\n    get: function get() {\n      return this.ctrl.gestureTimeoutStores[this.key];\n    }\n  }, {\n    key: \"config\",\n    get: function get() {\n      return this.ctrl.config[this.key];\n    }\n  }, {\n    key: \"sharedConfig\",\n    get: function get() {\n      return this.ctrl.config.shared;\n    }\n  }, {\n    key: \"handler\",\n    get: function get() {\n      return this.ctrl.handlers[this.key];\n    }\n  }, {\n    key: \"reset\",\n    value: function reset() {\n      var state = this.state,\n          shared = this.shared,\n          ingKey = this.ingKey,\n          args = this.args;\n      shared[ingKey] = state._active = state.active = state._blocked = state._force = false;\n      state._step = [false, false];\n      state.intentional = false;\n      state._movement = [0, 0];\n      state._distance = [0, 0];\n      state._delta = [0, 0];\n      state._bounds = [[-Infinity, Infinity], [-Infinity, Infinity]];\n      state.args = args;\n      state.axis = undefined;\n      state.memo = undefined;\n      state.elapsedTime = 0;\n      state.direction = [0, 0];\n      state.distance = [0, 0];\n      state.velocity = [0, 0];\n      state.movement = [0, 0];\n      state.delta = [0, 0];\n      state.timeStamp = 0;\n    }\n  }, {\n    key: \"start\",\n    value: function start(event) {\n      var state = this.state;\n      var config = this.config;\n\n      if (!state._active) {\n        this.reset();\n        this.computeInitial();\n        state._active = true;\n        state.target = event.target;\n        state.currentTarget = event.currentTarget;\n        state.lastOffset = config.from ? call(config.from, state) : state.offset;\n        state.offset = state.lastOffset;\n      }\n\n      state.startTime = state.timeStamp = event.timeStamp;\n    }\n  }, {\n    key: \"computeValues\",\n    value: function computeValues(values) {\n      var state = this.state;\n      state._values = values;\n      state.values = this.config.transform(values);\n    }\n  }, {\n    key: \"computeInitial\",\n    value: function computeInitial() {\n      var state = this.state;\n      state._initial = state._values;\n      state.initial = state.values;\n    }\n  }, {\n    key: \"compute\",\n    value: function compute(event) {\n      var state = this.state,\n          config = this.config,\n          shared = this.shared;\n      state.args = this.args;\n      var dt = 0;\n\n      if (event) {\n        state.event = event;\n        if (config.preventDefault && event.cancelable) state.event.preventDefault();\n        state.type = event.type;\n        shared.touches = this.ctrl.pointerIds.size || this.ctrl.touchIds.size;\n        shared.locked = !!document.pointerLockElement;\n        Object.assign(shared, getEventDetails(event));\n        shared.down = shared.pressed = shared.buttons % 2 === 1 || shared.touches > 0;\n        dt = event.timeStamp - state.timeStamp;\n        state.timeStamp = event.timeStamp;\n        state.elapsedTime = state.timeStamp - state.startTime;\n      }\n\n      if (state._active) {\n        var _absoluteDelta = state._delta.map(Math.abs);\n\n        V.addTo(state._distance, _absoluteDelta);\n      }\n\n      var _state$_movement = _slicedToArray(state._movement, 2),\n          _m0 = _state$_movement[0],\n          _m1 = _state$_movement[1];\n\n      var _config$threshold = _slicedToArray(config.threshold, 2),\n          t0 = _config$threshold[0],\n          t1 = _config$threshold[1];\n\n      var _step = state._step,\n          values = state.values;\n\n      if (config.hasCustomTransform) {\n        if (_step[0] === false) _step[0] = Math.abs(_m0) >= t0 && values[0];\n        if (_step[1] === false) _step[1] = Math.abs(_m1) >= t1 && values[1];\n      } else {\n        if (_step[0] === false) _step[0] = Math.abs(_m0) >= t0 && Math.sign(_m0) * t0;\n        if (_step[1] === false) _step[1] = Math.abs(_m1) >= t1 && Math.sign(_m1) * t1;\n      }\n\n      state.intentional = _step[0] !== false || _step[1] !== false;\n      if (!state.intentional) return;\n      var movement = [0, 0];\n\n      if (config.hasCustomTransform) {\n        var _values2 = _slicedToArray(values, 2),\n            v0 = _values2[0],\n            v1 = _values2[1];\n\n        movement[0] = _step[0] !== false ? v0 - _step[0] : 0;\n        movement[1] = _step[1] !== false ? v1 - _step[1] : 0;\n      } else {\n        movement[0] = _step[0] !== false ? _m0 - _step[0] : 0;\n        movement[1] = _step[1] !== false ? _m1 - _step[1] : 0;\n      }\n\n      if (this.intent) this.intent(movement);\n\n      if (state._active && !state._blocked || state.active) {\n        state.first = state._active && !state.active;\n        state.last = !state._active && state.active;\n        state.active = shared[this.ingKey] = state._active;\n\n        if (event) {\n          if (state.first) {\n            if ('bounds' in config) state._bounds = call(config.bounds, state);\n            if (this.setup) this.setup();\n          }\n\n          state.movement = movement;\n          var previousOffset = state.offset;\n          this.computeOffset();\n\n          if (!state.last || dt > BEFORE_LAST_KINEMATICS_DELAY) {\n            state.delta = V.sub(state.offset, previousOffset);\n            var absoluteDelta = state.delta.map(Math.abs);\n            V.addTo(state.distance, absoluteDelta);\n            state.direction = state.delta.map(Math.sign);\n\n            if (!state.first && dt > 0) {\n              state.velocity = [absoluteDelta[0] / dt, absoluteDelta[1] / dt];\n            }\n          }\n        }\n      }\n\n      var rubberband = state._active ? config.rubberband || [0, 0] : [0, 0];\n      state.offset = computeRubberband(state._bounds, state.offset, rubberband);\n      this.computeMovement();\n    }\n  }, {\n    key: \"emit\",\n    value: function emit() {\n      var state = this.state;\n      var shared = this.shared;\n      var config = this.config;\n      if (!state._active) this.clean();\n      if ((state._blocked || !state.intentional) && !state._force && !config.triggerAllEvents) return;\n      var memo = this.handler(_objectSpread2(_objectSpread2(_objectSpread2({}, shared), state), {}, _defineProperty2({}, this.aliasKey, state.values)));\n      if (memo !== undefined) state.memo = memo;\n    }\n  }, {\n    key: \"clean\",\n    value: function clean() {\n      this.eventStore.clean();\n      this.timeoutStore.clean();\n    }\n  }]);\n\n  return Engine;\n}();\n\nfunction selectAxis(_ref3) {\n  var _ref4 = _slicedToArray(_ref3, 2),\n      dx = _ref4[0],\n      dy = _ref4[1];\n\n  var d = Math.abs(dx) - Math.abs(dy);\n  if (d > 0) return 'x';\n  if (d < 0) return 'y';\n  return undefined;\n}\n\nfunction restrictVectorToAxis(v, axis) {\n  switch (axis) {\n    case 'x':\n      v[1] = 0;\n      break;\n\n    case 'y':\n      v[0] = 0;\n      break;\n  }\n}\n\nvar CoordinatesEngine = /*#__PURE__*/function (_Engine) {\n  _inherits(CoordinatesEngine, _Engine);\n\n  var _super = _createSuper(CoordinatesEngine);\n\n  function CoordinatesEngine() {\n    var _this;\n\n    _classCallCheck(this, CoordinatesEngine);\n\n    for (var _len3 = arguments.length, args = new Array(_len3), _key3 = 0; _key3 < _len3; _key3++) {\n      args[_key3] = arguments[_key3];\n    }\n\n    _this = _super.call.apply(_super, [this].concat(args));\n\n    _defineProperty(_assertThisInitialized(_this), \"aliasKey\", 'xy');\n\n    return _this;\n  }\n\n  _createClass(CoordinatesEngine, [{\n    key: \"reset\",\n    value: function reset() {\n      _get(_getPrototypeOf(CoordinatesEngine.prototype), \"reset\", this).call(this);\n\n      this.state.axis = undefined;\n    }\n  }, {\n    key: \"init\",\n    value: function init() {\n      this.state.offset = [0, 0];\n      this.state.lastOffset = [0, 0];\n    }\n  }, {\n    key: \"computeOffset\",\n    value: function computeOffset() {\n      this.state.offset = V.add(this.state.lastOffset, this.state.movement);\n    }\n  }, {\n    key: \"computeMovement\",\n    value: function computeMovement() {\n      this.state.movement = V.sub(this.state.offset, this.state.lastOffset);\n    }\n  }, {\n    key: \"intent\",\n    value: function intent(v) {\n      this.state.axis = this.state.axis || selectAxis(v);\n      this.state._blocked = (this.config.lockDirection || !!this.config.axis) && !this.state.axis || !!this.config.axis && this.config.axis !== this.state.axis;\n      if (this.state._blocked) return;\n\n      if (this.config.axis || this.config.lockDirection) {\n        restrictVectorToAxis(v, this.state.axis);\n      }\n    }\n  }]);\n\n  return CoordinatesEngine;\n}(Engine);\n\nvar identity = function identity(v) {\n  return v;\n};\n\nvar DEFAULT_RUBBERBAND = 0.15;\nvar commonConfigResolver = {\n  enabled: function enabled() {\n    var value = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : true;\n    return value;\n  },\n  preventDefault: function preventDefault() {\n    var value = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : false;\n    return value;\n  },\n  triggerAllEvents: function triggerAllEvents() {\n    var value = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : false;\n    return value;\n  },\n  rubberband: function rubberband() {\n    var value = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 0;\n\n    switch (value) {\n      case true:\n        return [DEFAULT_RUBBERBAND, DEFAULT_RUBBERBAND];\n\n      case false:\n        return [0, 0];\n\n      default:\n        return V.toVector(value);\n    }\n  },\n  from: function from(value) {\n    if (typeof value === 'function') return value;\n    if (value != null) return V.toVector(value);\n  },\n  transform: function transform(value, _k, config) {\n    var transform = value || config.shared.transform;\n    this.hasCustomTransform = !!transform;\n\n    if (process.env.NODE_ENV === 'development') {\n      var originalTransform = transform || identity;\n      return function (v) {\n        var r = originalTransform(v);\n\n        if (!isFinite(r[0]) || !isFinite(r[1])) {\n          console.warn(\"[@use-gesture]: config.transform() must produce a valid result, but it was: [\".concat(r[0], \",\").concat([1], \"]\"));\n        }\n\n        return r;\n      };\n    }\n\n    return transform || identity;\n  },\n  threshold: function threshold(value) {\n    return V.toVector(value, 0);\n  }\n};\n\nif (process.env.NODE_ENV === 'development') {\n  Object.assign(commonConfigResolver, {\n    domTarget: function domTarget(value) {\n      if (value !== undefined) {\n        throw Error(\"[@use-gesture]: `domTarget` option has been renamed to `target`.\");\n      }\n\n      return NaN;\n    },\n    lockDirection: function lockDirection(value) {\n      if (value !== undefined) {\n        throw Error(\"[@use-gesture]: `lockDirection` option has been merged with `axis`. Use it as in `{ axis: 'lock' }`\");\n      }\n\n      return NaN;\n    },\n    initial: function initial(value) {\n      if (value !== undefined) {\n        throw Error(\"[@use-gesture]: `initial` option has been renamed to `from`.\");\n      }\n\n      return NaN;\n    }\n  });\n}\n\nvar coordinatesConfigResolver = _objectSpread2(_objectSpread2({}, commonConfigResolver), {}, {\n  axis: function axis(_v, _k, _ref5) {\n    var axis = _ref5.axis;\n    this.lockDirection = axis === 'lock';\n    if (!this.lockDirection) return axis;\n  },\n  bounds: function bounds() {\n    var value = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n    if (typeof value === 'function') {\n      return function (state) {\n        return coordinatesConfigResolver.bounds(value(state));\n      };\n    }\n\n    if ('current' in value) {\n      return function () {\n        return value.current;\n      };\n    }\n\n    if (typeof HTMLElement === 'function' && value instanceof HTMLElement) {\n      return value;\n    }\n\n    var _value$left = value.left,\n        left = _value$left === void 0 ? -Infinity : _value$left,\n        _value$right = value.right,\n        right = _value$right === void 0 ? Infinity : _value$right,\n        _value$top = value.top,\n        top = _value$top === void 0 ? -Infinity : _value$top,\n        _value$bottom = value.bottom,\n        bottom = _value$bottom === void 0 ? Infinity : _value$bottom;\n    return [[left, right], [top, bottom]];\n  }\n});\n\nvar DISPLACEMENT = 10;\nvar KEYS_DELTA_MAP = {\n  ArrowRight: function ArrowRight() {\n    var factor = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 1;\n    return [DISPLACEMENT * factor, 0];\n  },\n  ArrowLeft: function ArrowLeft() {\n    var factor = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 1;\n    return [-DISPLACEMENT * factor, 0];\n  },\n  ArrowUp: function ArrowUp() {\n    var factor = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 1;\n    return [0, -DISPLACEMENT * factor];\n  },\n  ArrowDown: function ArrowDown() {\n    var factor = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 1;\n    return [0, DISPLACEMENT * factor];\n  }\n};\n\nvar DragEngine = /*#__PURE__*/function (_CoordinatesEngine) {\n  _inherits(DragEngine, _CoordinatesEngine);\n\n  var _super2 = _createSuper(DragEngine);\n\n  function DragEngine() {\n    var _this2;\n\n    _classCallCheck(this, DragEngine);\n\n    for (var _len4 = arguments.length, args = new Array(_len4), _key4 = 0; _key4 < _len4; _key4++) {\n      args[_key4] = arguments[_key4];\n    }\n\n    _this2 = _super2.call.apply(_super2, [this].concat(args));\n\n    _defineProperty(_assertThisInitialized(_this2), \"ingKey\", 'dragging');\n\n    return _this2;\n  }\n\n  _createClass(DragEngine, [{\n    key: \"reset\",\n    value: function reset() {\n      _get(_getPrototypeOf(DragEngine.prototype), \"reset\", this).call(this);\n\n      var state = this.state;\n      state._pointerId = undefined;\n      state._pointerActive = false;\n      state._keyboardActive = false;\n      state._preventScroll = false;\n      state._delayed = false;\n      state.swipe = [0, 0];\n      state.tap = false;\n      state.canceled = false;\n      state.cancel = this.cancel.bind(this);\n    }\n  }, {\n    key: \"setup\",\n    value: function setup() {\n      var state = this.state;\n\n      if (state._bounds instanceof HTMLElement) {\n        var boundRect = state._bounds.getBoundingClientRect();\n\n        var targetRect = state.currentTarget.getBoundingClientRect();\n        var _bounds = {\n          left: boundRect.left - targetRect.left + state.offset[0],\n          right: boundRect.right - targetRect.right + state.offset[0],\n          top: boundRect.top - targetRect.top + state.offset[1],\n          bottom: boundRect.bottom - targetRect.bottom + state.offset[1]\n        };\n        state._bounds = coordinatesConfigResolver.bounds(_bounds);\n      }\n    }\n  }, {\n    key: \"cancel\",\n    value: function cancel() {\n      var _this3 = this;\n\n      var state = this.state;\n      if (state.canceled) return;\n      state.canceled = true;\n      state._active = false;\n      setTimeout(function () {\n        _this3.compute();\n\n        _this3.emit();\n      }, 0);\n    }\n  }, {\n    key: \"setActive\",\n    value: function setActive() {\n      this.state._active = this.state._pointerActive || this.state._keyboardActive;\n    }\n  }, {\n    key: \"clean\",\n    value: function clean() {\n      this.pointerClean();\n      this.state._pointerActive = false;\n      this.state._keyboardActive = false;\n\n      _get(_getPrototypeOf(DragEngine.prototype), \"clean\", this).call(this);\n    }\n  }, {\n    key: \"pointerDown\",\n    value: function pointerDown(event) {\n      var config = this.config;\n      var state = this.state;\n      if (event.buttons != null && (Array.isArray(config.pointerButtons) ? !config.pointerButtons.includes(event.buttons) : config.pointerButtons !== -1 && config.pointerButtons !== event.buttons)) return;\n      this.ctrl.setEventIds(event);\n\n      if (config.pointerCapture) {\n        event.target.setPointerCapture(event.pointerId);\n      }\n\n      if (state._pointerActive) return;\n      this.start(event);\n      this.setupPointer(event);\n      state._pointerId = pointerId(event);\n      state._pointerActive = true;\n      this.computeValues(pointerValues(event));\n      this.computeInitial();\n\n      if (config.preventScroll) {\n        this.setupScrollPrevention(event);\n      } else if (config.delay > 0) {\n        this.setupDelayTrigger(event);\n      } else {\n        this.startPointerDrag(event);\n      }\n    }\n  }, {\n    key: \"startPointerDrag\",\n    value: function startPointerDrag(event) {\n      var state = this.state;\n      state._active = true;\n      state._preventScroll = true;\n      state._delayed = false;\n      this.compute(event);\n      this.emit();\n    }\n  }, {\n    key: \"pointerMove\",\n    value: function pointerMove(event) {\n      var state = this.state;\n      var config = this.config;\n      if (!state._pointerActive) return;\n      if (state.type === event.type && event.timeStamp === state.timeStamp) return;\n      var id = pointerId(event);\n      if (state._pointerId && id !== state._pointerId) return;\n\n      var _values = pointerValues(event);\n\n      if (document.pointerLockElement === event.target) {\n        state._delta = [event.movementX, event.movementY];\n      } else {\n        state._delta = V.sub(_values, state._values);\n        this.computeValues(_values);\n      }\n\n      V.addTo(state._movement, state._delta);\n      this.compute(event);\n\n      if (state._delayed) {\n        this.timeoutStore.remove('dragDelay');\n        state.active = false;\n        this.startPointerDrag(event);\n        return;\n      }\n\n      if (config.preventScroll && !state._preventScroll) {\n        if (state.axis) {\n          if (state.axis === config.preventScrollAxis || config.preventScrollAxis === 'xy') {\n            state._active = false;\n            this.clean();\n            return;\n          } else {\n            this.timeoutStore.remove('startPointerDrag');\n            this.startPointerDrag(event);\n            return;\n          }\n        } else {\n          return;\n        }\n      }\n\n      this.emit();\n    }\n  }, {\n    key: \"pointerUp\",\n    value: function pointerUp(event) {\n      this.ctrl.setEventIds(event);\n\n      try {\n        if (this.config.pointerCapture && event.target.hasPointerCapture(event.pointerId)) {\n          ;\n          event.target.releasePointerCapture(event.pointerId);\n        }\n      } catch (_unused) {\n        if (process.env.NODE_ENV === 'development') {\n          console.warn(\"[@use-gesture]: If you see this message, it's likely that you're using an outdated version of `@react-three/fiber`. \\n\\nPlease upgrade to the latest version.\");\n        }\n      }\n\n      var state = this.state;\n      var config = this.config;\n      if (!state._pointerActive) return;\n      var id = pointerId(event);\n      if (state._pointerId && id !== state._pointerId) return;\n      this.state._pointerActive = false;\n      this.setActive();\n      this.compute(event);\n\n      var _state$_distance = _slicedToArray(state._distance, 2),\n          dx = _state$_distance[0],\n          dy = _state$_distance[1];\n\n      state.tap = dx <= 3 && dy <= 3;\n\n      if (state.tap && config.filterTaps) {\n        state._force = true;\n      } else {\n        var _state$direction = _slicedToArray(state.direction, 2),\n            dirx = _state$direction[0],\n            diry = _state$direction[1];\n\n        var _state$velocity = _slicedToArray(state.velocity, 2),\n            vx = _state$velocity[0],\n            vy = _state$velocity[1];\n\n        var _state$movement = _slicedToArray(state.movement, 2),\n            mx = _state$movement[0],\n            my = _state$movement[1];\n\n        var _config$swipe$velocit = _slicedToArray(config.swipe.velocity, 2),\n            svx = _config$swipe$velocit[0],\n            svy = _config$swipe$velocit[1];\n\n        var _config$swipe$distanc = _slicedToArray(config.swipe.distance, 2),\n            sx = _config$swipe$distanc[0],\n            sy = _config$swipe$distanc[1];\n\n        var sdt = config.swipe.duration;\n\n        if (state.elapsedTime < sdt) {\n          if (Math.abs(vx) > svx && Math.abs(mx) > sx) state.swipe[0] = dirx;\n          if (Math.abs(vy) > svy && Math.abs(my) > sy) state.swipe[1] = diry;\n        }\n      }\n\n      this.emit();\n    }\n  }, {\n    key: \"pointerClick\",\n    value: function pointerClick(event) {\n      if (!this.state.tap) {\n        event.preventDefault();\n        event.stopPropagation();\n      }\n    }\n  }, {\n    key: \"setupPointer\",\n    value: function setupPointer(event) {\n      var config = this.config;\n      var device = config.device;\n\n      if (process.env.NODE_ENV === 'development') {\n        try {\n          if (device === 'pointer') {\n            var currentTarget = 'uv' in event ? event.sourceEvent.currentTarget : event.currentTarget;\n            var style = window.getComputedStyle(currentTarget);\n\n            if (style.touchAction === 'auto') {\n              console.warn(\"[@use-gesture]: The drag target has its `touch-action` style property set to `auto`. It is recommended to add `touch-action: 'none'` so that the drag gesture behaves correctly on touch-enabled devices. For more information read this: https://use-gesture.netlify.app/docs/extras/#touch-action.\\n\\nThis message will only show in development mode. It won't appear in production. If this is intended, you can ignore it.\", currentTarget);\n            }\n          }\n        } catch (_unused2) {}\n      }\n\n      if (config.pointerLock) {\n        event.currentTarget.requestPointerLock();\n      }\n\n      if (!config.pointerCapture) {\n        this.eventStore.add(this.sharedConfig.window, device, 'change', this.pointerMove.bind(this));\n        this.eventStore.add(this.sharedConfig.window, device, 'end', this.pointerUp.bind(this));\n      }\n    }\n  }, {\n    key: \"pointerClean\",\n    value: function pointerClean() {\n      if (this.config.pointerLock && document.pointerLockElement === this.state.currentTarget) {\n        document.exitPointerLock();\n      }\n    }\n  }, {\n    key: \"preventScroll\",\n    value: function preventScroll(event) {\n      if (this.state._preventScroll && event.cancelable) {\n        event.preventDefault();\n      }\n    }\n  }, {\n    key: \"setupScrollPrevention\",\n    value: function setupScrollPrevention(event) {\n      persistEvent(event);\n      this.eventStore.add(this.sharedConfig.window, 'touch', 'change', this.preventScroll.bind(this), {\n        passive: false\n      });\n      this.eventStore.add(this.sharedConfig.window, 'touch', 'end', this.clean.bind(this), {\n        passive: false\n      });\n      this.eventStore.add(this.sharedConfig.window, 'touch', 'cancel', this.clean.bind(this), {\n        passive: false\n      });\n      this.timeoutStore.add('startPointerDrag', this.startPointerDrag.bind(this), this.config.preventScroll, event);\n    }\n  }, {\n    key: \"setupDelayTrigger\",\n    value: function setupDelayTrigger(event) {\n      this.state._delayed = true;\n      this.timeoutStore.add('dragDelay', this.startPointerDrag.bind(this), this.config.delay, event);\n    }\n  }, {\n    key: \"keyDown\",\n    value: function keyDown(event) {\n      var deltaFn = KEYS_DELTA_MAP[event.key];\n\n      if (deltaFn) {\n        var state = this.state;\n        var factor = event.shiftKey ? 10 : event.altKey ? 0.1 : 1;\n        state._delta = deltaFn(factor);\n        this.start(event);\n        state._keyboardActive = true;\n        V.addTo(state._movement, state._delta);\n        this.compute(event);\n        this.emit();\n      }\n    }\n  }, {\n    key: \"keyUp\",\n    value: function keyUp(event) {\n      if (!(event.key in KEYS_DELTA_MAP)) return;\n      this.state._keyboardActive = false;\n      this.setActive();\n      this.compute(event);\n      this.emit();\n    }\n  }, {\n    key: \"bind\",\n    value: function bind(bindFunction) {\n      var device = this.config.device;\n      bindFunction(device, 'start', this.pointerDown.bind(this));\n\n      if (this.config.pointerCapture) {\n        bindFunction(device, 'change', this.pointerMove.bind(this));\n        bindFunction(device, 'end', this.pointerUp.bind(this));\n        bindFunction(device, 'cancel', this.pointerUp.bind(this));\n      }\n\n      bindFunction('key', 'down', this.keyDown.bind(this));\n      bindFunction('key', 'up', this.keyUp.bind(this));\n\n      if (this.config.filterTaps) {\n        bindFunction('click', '', this.pointerClick.bind(this), {\n          capture: true\n        });\n      }\n    }\n  }]);\n\n  return DragEngine;\n}(CoordinatesEngine);\n\nfunction persistEvent(event) {\n  'persist' in event && typeof event.persist === 'function' && event.persist();\n}\n\nvar isBrowser = typeof window !== 'undefined' && window.document && window.document.createElement;\n\nfunction supportsTouchEvents() {\n  return isBrowser && 'ontouchstart' in window;\n}\n\nfunction isTouchScreen() {\n  return supportsTouchEvents() || isBrowser && window.navigator.maxTouchPoints > 1;\n}\n\nfunction supportsPointerEvents() {\n  return isBrowser && 'onpointerdown' in window;\n}\n\nfunction supportsPointerLock() {\n  return isBrowser && 'exitPointerLock' in window.document;\n}\n\nfunction supportsGestureEvents() {\n  try {\n    return 'constructor' in GestureEvent;\n  } catch (e) {\n    return false;\n  }\n}\n\nvar SUPPORT = {\n  isBrowser: isBrowser,\n  gesture: supportsGestureEvents(),\n  touch: supportsTouchEvents(),\n  touchscreen: isTouchScreen(),\n  pointer: supportsPointerEvents(),\n  pointerLock: supportsPointerLock()\n};\nvar DEFAULT_PREVENT_SCROLL_DELAY = 250;\nvar DEFAULT_DRAG_DELAY = 180;\nvar DEFAULT_SWIPE_VELOCITY = 0.5;\nvar DEFAULT_SWIPE_DISTANCE = 50;\nvar DEFAULT_SWIPE_DURATION = 250;\n\nvar dragConfigResolver = _objectSpread2(_objectSpread2({}, coordinatesConfigResolver), {}, {\n  pointerLock: function pointerLock(_v, _k, _ref6) {\n    var _ref6$pointer = _ref6.pointer;\n    _ref6$pointer = _ref6$pointer === void 0 ? {} : _ref6$pointer;\n    var _ref6$pointer$lock = _ref6$pointer.lock,\n        lock = _ref6$pointer$lock === void 0 ? false : _ref6$pointer$lock,\n        _ref6$pointer$touch = _ref6$pointer.touch,\n        touch = _ref6$pointer$touch === void 0 ? false : _ref6$pointer$touch;\n    this.useTouch = SUPPORT.touch && touch;\n    return SUPPORT.pointerLock && lock;\n  },\n  device: function device(_v, _k) {\n    if (this.useTouch) return 'touch';\n    if (this.pointerLock) return 'mouse';\n    if (SUPPORT.pointer) return 'pointer';\n    if (SUPPORT.touch) return 'touch';\n    return 'mouse';\n  },\n  preventScroll: function preventScroll() {\n    var value = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : false;\n\n    var _k = arguments.length > 1 ? arguments[1] : undefined;\n\n    var _ref7 = arguments.length > 2 ? arguments[2] : undefined,\n        _ref7$preventScrollAx = _ref7.preventScrollAxis,\n        preventScrollAxis = _ref7$preventScrollAx === void 0 ? 'y' : _ref7$preventScrollAx;\n\n    if (preventScrollAxis) this.preventScrollAxis = preventScrollAxis;\n    if (!SUPPORT.touchscreen) return false;\n    if (typeof value === 'number') return value;\n    return value ? DEFAULT_PREVENT_SCROLL_DELAY : false;\n  },\n  pointerCapture: function pointerCapture(_v, _k, _ref8) {\n    var _ref8$pointer = _ref8.pointer;\n    _ref8$pointer = _ref8$pointer === void 0 ? {} : _ref8$pointer;\n    var _ref8$pointer$capture = _ref8$pointer.capture,\n        capture = _ref8$pointer$capture === void 0 ? true : _ref8$pointer$capture,\n        _ref8$pointer$buttons = _ref8$pointer.buttons,\n        buttons = _ref8$pointer$buttons === void 0 ? 1 : _ref8$pointer$buttons;\n    this.pointerButtons = buttons;\n    return !this.pointerLock && this.device === 'pointer' && capture;\n  },\n  threshold: function threshold(value, _k, _ref9) {\n    var _ref9$filterTaps = _ref9.filterTaps,\n        filterTaps = _ref9$filterTaps === void 0 ? false : _ref9$filterTaps,\n        _ref9$axis = _ref9.axis,\n        axis = _ref9$axis === void 0 ? undefined : _ref9$axis;\n    var threshold = V.toVector(value, filterTaps ? 3 : axis ? 1 : 0);\n    this.filterTaps = filterTaps;\n    return threshold;\n  },\n  swipe: function swipe() {\n    var _ref10 = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},\n        _ref10$velocity = _ref10.velocity,\n        velocity = _ref10$velocity === void 0 ? DEFAULT_SWIPE_VELOCITY : _ref10$velocity,\n        _ref10$distance = _ref10.distance,\n        distance = _ref10$distance === void 0 ? DEFAULT_SWIPE_DISTANCE : _ref10$distance,\n        _ref10$duration = _ref10.duration,\n        duration = _ref10$duration === void 0 ? DEFAULT_SWIPE_DURATION : _ref10$duration;\n\n    return {\n      velocity: this.transform(V.toVector(velocity)),\n      distance: this.transform(V.toVector(distance)),\n      duration: duration\n    };\n  },\n  delay: function delay() {\n    var value = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 0;\n\n    switch (value) {\n      case true:\n        return DEFAULT_DRAG_DELAY;\n\n      case false:\n        return 0;\n\n      default:\n        return value;\n    }\n  }\n});\n\nif (process.env.NODE_ENV === 'development') {\n  Object.assign(dragConfigResolver, {\n    useTouch: function useTouch(value) {\n      if (value !== undefined) {\n        throw Error(\"[@use-gesture]: `useTouch` option has been renamed to `pointer.touch`. Use it as in `{ pointer: { touch: true } }`.\");\n      }\n\n      return NaN;\n    },\n    experimental_preventWindowScrollY: function experimental_preventWindowScrollY(value) {\n      if (value !== undefined) {\n        throw Error(\"[@use-gesture]: `experimental_preventWindowScrollY` option has been renamed to `preventScroll`.\");\n      }\n\n      return NaN;\n    },\n    swipeVelocity: function swipeVelocity(value) {\n      if (value !== undefined) {\n        throw Error(\"[@use-gesture]: `swipeVelocity` option has been renamed to `swipe.velocity`. Use it as in `{ swipe: { velocity: 0.5 } }`.\");\n      }\n\n      return NaN;\n    },\n    swipeDistance: function swipeDistance(value) {\n      if (value !== undefined) {\n        throw Error(\"[@use-gesture]: `swipeDistance` option has been renamed to `swipe.distance`. Use it as in `{ swipe: { distance: 50 } }`.\");\n      }\n\n      return NaN;\n    },\n    swipeDuration: function swipeDuration(value) {\n      if (value !== undefined) {\n        throw Error(\"[@use-gesture]: `swipeDuration` option has been renamed to `swipe.duration`. Use it as in `{ swipe: { duration: 250 } }`.\");\n      }\n\n      return NaN;\n    }\n  });\n}\n\nvar SCALE_ANGLE_RATIO_INTENT_DEG = 30;\nvar PINCH_WHEEL_RATIO = 36;\n\nvar PinchEngine = /*#__PURE__*/function (_Engine2) {\n  _inherits(PinchEngine, _Engine2);\n\n  var _super3 = _createSuper(PinchEngine);\n\n  function PinchEngine() {\n    var _this4;\n\n    _classCallCheck(this, PinchEngine);\n\n    for (var _len5 = arguments.length, args = new Array(_len5), _key5 = 0; _key5 < _len5; _key5++) {\n      args[_key5] = arguments[_key5];\n    }\n\n    _this4 = _super3.call.apply(_super3, [this].concat(args));\n\n    _defineProperty(_assertThisInitialized(_this4), \"ingKey\", 'pinching');\n\n    _defineProperty(_assertThisInitialized(_this4), \"aliasKey\", 'da');\n\n    return _this4;\n  }\n\n  _createClass(PinchEngine, [{\n    key: \"init\",\n    value: function init() {\n      this.state.offset = [1, 0];\n      this.state.lastOffset = [1, 0];\n      this.state._pointerEvents = new Map();\n    }\n  }, {\n    key: \"reset\",\n    value: function reset() {\n      _get(_getPrototypeOf(PinchEngine.prototype), \"reset\", this).call(this);\n\n      var state = this.state;\n      state._touchIds = [];\n      state.canceled = false;\n      state.cancel = this.cancel.bind(this);\n      state.turns = 0;\n    }\n  }, {\n    key: \"computeOffset\",\n    value: function computeOffset() {\n      var _this$state = this.state,\n          type = _this$state.type,\n          movement = _this$state.movement,\n          lastOffset = _this$state.lastOffset;\n\n      if (type === 'wheel') {\n        this.state.offset = V.add(movement, lastOffset);\n      } else {\n        this.state.offset = [(1 + movement[0]) * lastOffset[0], movement[1] + lastOffset[1]];\n      }\n    }\n  }, {\n    key: \"computeMovement\",\n    value: function computeMovement() {\n      var _this$state2 = this.state,\n          offset = _this$state2.offset,\n          lastOffset = _this$state2.lastOffset;\n      this.state.movement = [offset[0] / lastOffset[0], offset[1] - lastOffset[1]];\n    }\n  }, {\n    key: \"intent\",\n    value: function intent(v) {\n      var state = this.state;\n\n      if (!state.axis) {\n        var axisMovementDifference = Math.abs(v[0]) * SCALE_ANGLE_RATIO_INTENT_DEG - Math.abs(v[1]);\n        if (axisMovementDifference < 0) state.axis = 'angle';else if (axisMovementDifference > 0) state.axis = 'scale';\n      }\n\n      if (this.config.lockDirection) {\n        if (state.axis === 'scale') v[1] = 0;else if (state.axis === 'angle') v[0] = 0;\n      }\n    }\n  }, {\n    key: \"cancel\",\n    value: function cancel() {\n      var _this5 = this;\n\n      var state = this.state;\n      if (state.canceled) return;\n      setTimeout(function () {\n        state.canceled = true;\n        state._active = false;\n\n        _this5.compute();\n\n        _this5.emit();\n      }, 0);\n    }\n  }, {\n    key: \"touchStart\",\n    value: function touchStart(event) {\n      this.ctrl.setEventIds(event);\n      var state = this.state;\n      var ctrlTouchIds = this.ctrl.touchIds;\n\n      if (state._active) {\n        if (state._touchIds.every(function (id) {\n          return ctrlTouchIds.has(id);\n        })) return;\n      }\n\n      if (ctrlTouchIds.size < 2) return;\n      this.start(event);\n      state._touchIds = Array.from(ctrlTouchIds).slice(0, 2);\n      var payload = touchDistanceAngle(event, state._touchIds);\n      this.pinchStart(event, payload);\n    }\n  }, {\n    key: \"pointerStart\",\n    value: function pointerStart(event) {\n      if (event.buttons != null && event.buttons % 2 !== 1) return;\n      this.ctrl.setEventIds(event);\n      event.target.setPointerCapture(event.pointerId);\n      var state = this.state;\n      var _pointerEvents = state._pointerEvents;\n      var ctrlPointerIds = this.ctrl.pointerIds;\n\n      if (state._active) {\n        if (Array.from(_pointerEvents.keys()).every(function (id) {\n          return ctrlPointerIds.has(id);\n        })) return;\n      }\n\n      if (_pointerEvents.size < 2) {\n        _pointerEvents.set(event.pointerId, event);\n      }\n\n      if (state._pointerEvents.size < 2) return;\n      this.start(event);\n      var payload = distanceAngle.apply(void 0, _toConsumableArray(Array.from(_pointerEvents.values())));\n      this.pinchStart(event, payload);\n    }\n  }, {\n    key: \"pinchStart\",\n    value: function pinchStart(event, payload) {\n      var state = this.state;\n      state.origin = payload.origin;\n      this.computeValues([payload.distance, payload.angle]);\n      this.computeInitial();\n      this.compute(event);\n      this.emit();\n    }\n  }, {\n    key: \"touchMove\",\n    value: function touchMove(event) {\n      if (!this.state._active) return;\n      var payload = touchDistanceAngle(event, this.state._touchIds);\n      this.pinchMove(event, payload);\n    }\n  }, {\n    key: \"pointerMove\",\n    value: function pointerMove(event) {\n      var _pointerEvents = this.state._pointerEvents;\n\n      if (_pointerEvents.has(event.pointerId)) {\n        _pointerEvents.set(event.pointerId, event);\n      }\n\n      if (!this.state._active) return;\n      var payload = distanceAngle.apply(void 0, _toConsumableArray(Array.from(_pointerEvents.values())));\n      this.pinchMove(event, payload);\n    }\n  }, {\n    key: \"pinchMove\",\n    value: function pinchMove(event, payload) {\n      var state = this.state;\n      var prev_a = state._values[1];\n      var delta_a = payload.angle - prev_a;\n      var delta_turns = 0;\n      if (Math.abs(delta_a) > 270) delta_turns += Math.sign(delta_a);\n      this.computeValues([payload.distance, payload.angle - 360 * delta_turns]);\n      state.origin = payload.origin;\n      state.turns = delta_turns;\n      state._movement = [state._values[0] / state._initial[0] - 1, state._values[1] - state._initial[1]];\n      this.compute(event);\n      this.emit();\n    }\n  }, {\n    key: \"touchEnd\",\n    value: function touchEnd(event) {\n      var _this6 = this;\n\n      this.ctrl.setEventIds(event);\n      if (!this.state._active) return;\n\n      if (this.state._touchIds.some(function (id) {\n        return !_this6.ctrl.touchIds.has(id);\n      })) {\n        this.state._active = false;\n        this.compute(event);\n        this.emit();\n      }\n    }\n  }, {\n    key: \"pointerEnd\",\n    value: function pointerEnd(event) {\n      var state = this.state;\n      this.ctrl.setEventIds(event);\n\n      try {\n        event.target.releasePointerCapture(event.pointerId);\n      } catch (_unused) {}\n\n      if (state._pointerEvents.has(event.pointerId)) {\n        state._pointerEvents.delete(event.pointerId);\n      }\n\n      if (!state._active) return;\n\n      if (state._pointerEvents.size < 2) {\n        state._active = false;\n        this.compute(event);\n        this.emit();\n      }\n    }\n  }, {\n    key: \"gestureStart\",\n    value: function gestureStart(event) {\n      if (event.cancelable) event.preventDefault();\n      var state = this.state;\n      if (state._active) return;\n      this.start(event);\n      this.computeValues([event.scale, event.rotation]);\n      state.origin = [event.clientX, event.clientY];\n      this.compute(event);\n      this.emit();\n    }\n  }, {\n    key: \"gestureMove\",\n    value: function gestureMove(event) {\n      if (event.cancelable) event.preventDefault();\n      if (!this.state._active) return;\n      var state = this.state;\n      this.computeValues([event.scale, event.rotation]);\n      state.origin = [event.clientX, event.clientY];\n      var _previousMovement = state._movement;\n      state._movement = [event.scale - 1, event.rotation];\n      state._delta = V.sub(state._movement, _previousMovement);\n      this.compute(event);\n      this.emit();\n    }\n  }, {\n    key: \"gestureEnd\",\n    value: function gestureEnd(event) {\n      if (!this.state._active) return;\n      this.state._active = false;\n      this.compute(event);\n      this.emit();\n    }\n  }, {\n    key: \"wheel\",\n    value: function wheel(event) {\n      if (!event.ctrlKey) return;\n      if (!this.state._active) this.wheelStart(event);else this.wheelChange(event);\n      this.timeoutStore.add('wheelEnd', this.wheelEnd.bind(this));\n    }\n  }, {\n    key: \"wheelStart\",\n    value: function wheelStart(event) {\n      this.start(event);\n      this.wheelChange(event);\n    }\n  }, {\n    key: \"wheelChange\",\n    value: function wheelChange(event) {\n      var isR3f = ('uv' in event);\n\n      if (!isR3f) {\n        if (event.cancelable) {\n          event.preventDefault();\n        }\n\n        if (process.env.NODE_ENV === 'development' && !event.defaultPrevented) {\n          console.warn(\"[@use-gesture]: To properly support zoom on trackpads, try using the `target` option.\\n\\nThis message will only appear in development mode.\");\n        }\n      }\n\n      var state = this.state;\n      state._delta = [-wheelValues(event)[1] / PINCH_WHEEL_RATIO * state.offset[0], 0];\n      V.addTo(state._movement, state._delta);\n      this.state.origin = [event.clientX, event.clientY];\n      this.compute(event);\n      this.emit();\n    }\n  }, {\n    key: \"wheelEnd\",\n    value: function wheelEnd() {\n      if (!this.state._active) return;\n      this.state._active = false;\n      this.compute();\n      this.emit();\n    }\n  }, {\n    key: \"bind\",\n    value: function bind(bindFunction) {\n      var device = this.config.device;\n\n      if (!!device) {\n        bindFunction(device, 'start', this[device + 'Start'].bind(this));\n        bindFunction(device, 'change', this[device + 'Move'].bind(this));\n        bindFunction(device, 'end', this[device + 'End'].bind(this));\n        bindFunction(device, 'cancel', this[device + 'End'].bind(this));\n      } else {\n        bindFunction('wheel', '', this.wheel.bind(this), {\n          passive: false\n        });\n      }\n    }\n  }]);\n\n  return PinchEngine;\n}(Engine);\n\nvar pinchConfigResolver = _objectSpread2(_objectSpread2({}, commonConfigResolver), {}, {\n  useTouch: function useTouch(_v, _k, _ref11) {\n    var _ref11$pointer = _ref11.pointer;\n    _ref11$pointer = _ref11$pointer === void 0 ? {} : _ref11$pointer;\n    var _ref11$pointer$touch = _ref11$pointer.touch,\n        touch = _ref11$pointer$touch === void 0 ? false : _ref11$pointer$touch;\n    return SUPPORT.touch && touch;\n  },\n  device: function device(_v, _k, config) {\n    var sharedConfig = config.shared;\n    if (sharedConfig.target && !SUPPORT.touch && SUPPORT.gesture) return 'gesture';\n    if (this.useTouch) return 'touch';\n\n    if (SUPPORT.touchscreen) {\n      if (SUPPORT.pointer) return 'pointer';\n      if (SUPPORT.touch) return 'touch';\n    }\n  },\n  bounds: function bounds(_v, _k, _ref12) {\n    var _ref12$scaleBounds = _ref12.scaleBounds,\n        scaleBounds = _ref12$scaleBounds === void 0 ? {} : _ref12$scaleBounds,\n        _ref12$angleBounds = _ref12.angleBounds,\n        angleBounds = _ref12$angleBounds === void 0 ? {} : _ref12$angleBounds;\n\n    var _scaleBounds = function _scaleBounds(state) {\n      var D = assignDefault(call(scaleBounds, state), {\n        min: -Infinity,\n        max: Infinity\n      });\n      return [D.min, D.max];\n    };\n\n    var _angleBounds = function _angleBounds(state) {\n      var A = assignDefault(call(angleBounds, state), {\n        min: -Infinity,\n        max: Infinity\n      });\n      return [A.min, A.max];\n    };\n\n    if (typeof scaleBounds !== 'function' && typeof angleBounds !== 'function') return [_scaleBounds(), _angleBounds()];\n    return function (state) {\n      return [_scaleBounds(state), _angleBounds(state)];\n    };\n  },\n  threshold: function threshold(value, _k, config) {\n    this.lockDirection = config.axis === 'lock';\n    var threshold = V.toVector(value, this.lockDirection ? [0.1, 3] : 0);\n    return threshold;\n  }\n});\n\nvar MoveEngine = /*#__PURE__*/function (_CoordinatesEngine2) {\n  _inherits(MoveEngine, _CoordinatesEngine2);\n\n  var _super4 = _createSuper(MoveEngine);\n\n  function MoveEngine() {\n    var _this7;\n\n    _classCallCheck(this, MoveEngine);\n\n    for (var _len6 = arguments.length, args = new Array(_len6), _key6 = 0; _key6 < _len6; _key6++) {\n      args[_key6] = arguments[_key6];\n    }\n\n    _this7 = _super4.call.apply(_super4, [this].concat(args));\n\n    _defineProperty(_assertThisInitialized(_this7), \"ingKey\", 'moving');\n\n    return _this7;\n  }\n\n  _createClass(MoveEngine, [{\n    key: \"move\",\n    value: function move(event) {\n      if (this.config.mouseOnly && event.pointerType !== 'mouse') return;\n      if (!this.state._active) this.moveStart(event);else this.moveChange(event);\n      this.timeoutStore.add('moveEnd', this.moveEnd.bind(this));\n    }\n  }, {\n    key: \"moveStart\",\n    value: function moveStart(event) {\n      this.start(event);\n      this.computeValues(pointerValues(event));\n      this.compute(event);\n      this.computeInitial();\n      this.emit();\n    }\n  }, {\n    key: \"moveChange\",\n    value: function moveChange(event) {\n      if (!this.state._active) return;\n      var values = pointerValues(event);\n      var state = this.state;\n      state._delta = V.sub(values, state._values);\n      V.addTo(state._movement, state._delta);\n      this.computeValues(values);\n      this.compute(event);\n      this.emit();\n    }\n  }, {\n    key: \"moveEnd\",\n    value: function moveEnd(event) {\n      if (!this.state._active) return;\n      this.state._active = false;\n      this.compute(event);\n      this.emit();\n    }\n  }, {\n    key: \"bind\",\n    value: function bind(bindFunction) {\n      bindFunction('pointer', 'change', this.move.bind(this));\n      bindFunction('pointer', 'leave', this.moveEnd.bind(this));\n    }\n  }]);\n\n  return MoveEngine;\n}(CoordinatesEngine);\n\nvar moveConfigResolver = _objectSpread2(_objectSpread2({}, coordinatesConfigResolver), {}, {\n  mouseOnly: function mouseOnly() {\n    var value = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : true;\n    return value;\n  }\n});\n\nvar ScrollEngine = /*#__PURE__*/function (_CoordinatesEngine3) {\n  _inherits(ScrollEngine, _CoordinatesEngine3);\n\n  var _super5 = _createSuper(ScrollEngine);\n\n  function ScrollEngine() {\n    var _this8;\n\n    _classCallCheck(this, ScrollEngine);\n\n    for (var _len7 = arguments.length, args = new Array(_len7), _key7 = 0; _key7 < _len7; _key7++) {\n      args[_key7] = arguments[_key7];\n    }\n\n    _this8 = _super5.call.apply(_super5, [this].concat(args));\n\n    _defineProperty(_assertThisInitialized(_this8), \"ingKey\", 'scrolling');\n\n    return _this8;\n  }\n\n  _createClass(ScrollEngine, [{\n    key: \"scroll\",\n    value: function scroll(event) {\n      if (!this.state._active) this.start(event);\n      this.scrollChange(event);\n      this.timeoutStore.add('scrollEnd', this.scrollEnd.bind(this));\n    }\n  }, {\n    key: \"scrollChange\",\n    value: function scrollChange(event) {\n      if (event.cancelable) event.preventDefault();\n      var state = this.state;\n      var values = scrollValues(event);\n      state._delta = V.sub(values, state._values);\n      V.addTo(state._movement, state._delta);\n      this.computeValues(values);\n      this.compute(event);\n      this.emit();\n    }\n  }, {\n    key: \"scrollEnd\",\n    value: function scrollEnd() {\n      if (!this.state._active) return;\n      this.state._active = false;\n      this.compute();\n      this.emit();\n    }\n  }, {\n    key: \"bind\",\n    value: function bind(bindFunction) {\n      bindFunction('scroll', '', this.scroll.bind(this));\n    }\n  }]);\n\n  return ScrollEngine;\n}(CoordinatesEngine);\n\nvar scrollConfigResolver = coordinatesConfigResolver;\n\nvar WheelEngine = /*#__PURE__*/function (_CoordinatesEngine4) {\n  _inherits(WheelEngine, _CoordinatesEngine4);\n\n  var _super6 = _createSuper(WheelEngine);\n\n  function WheelEngine() {\n    var _this9;\n\n    _classCallCheck(this, WheelEngine);\n\n    for (var _len8 = arguments.length, args = new Array(_len8), _key8 = 0; _key8 < _len8; _key8++) {\n      args[_key8] = arguments[_key8];\n    }\n\n    _this9 = _super6.call.apply(_super6, [this].concat(args));\n\n    _defineProperty(_assertThisInitialized(_this9), \"ingKey\", 'wheeling');\n\n    return _this9;\n  }\n\n  _createClass(WheelEngine, [{\n    key: \"wheel\",\n    value: function wheel(event) {\n      if (!this.state._active) this.start(event);\n      this.wheelChange(event);\n      this.timeoutStore.add('wheelEnd', this.wheelEnd.bind(this));\n    }\n  }, {\n    key: \"wheelChange\",\n    value: function wheelChange(event) {\n      var state = this.state;\n      state._delta = wheelValues(event);\n      V.addTo(this.state._movement, state._delta);\n      this.compute(event);\n      this.emit();\n    }\n  }, {\n    key: \"wheelEnd\",\n    value: function wheelEnd() {\n      if (!this.state._active) return;\n      this.state._active = false;\n      this.compute();\n      this.emit();\n    }\n  }, {\n    key: \"bind\",\n    value: function bind(bindFunction) {\n      bindFunction('wheel', '', this.wheel.bind(this));\n    }\n  }]);\n\n  return WheelEngine;\n}(CoordinatesEngine);\n\nvar wheelConfigResolver = coordinatesConfigResolver;\n\nvar HoverEngine = /*#__PURE__*/function (_CoordinatesEngine5) {\n  _inherits(HoverEngine, _CoordinatesEngine5);\n\n  var _super7 = _createSuper(HoverEngine);\n\n  function HoverEngine() {\n    var _this10;\n\n    _classCallCheck(this, HoverEngine);\n\n    for (var _len9 = arguments.length, args = new Array(_len9), _key9 = 0; _key9 < _len9; _key9++) {\n      args[_key9] = arguments[_key9];\n    }\n\n    _this10 = _super7.call.apply(_super7, [this].concat(args));\n\n    _defineProperty(_assertThisInitialized(_this10), \"ingKey\", 'hovering');\n\n    return _this10;\n  }\n\n  _createClass(HoverEngine, [{\n    key: \"enter\",\n    value: function enter(event) {\n      if (this.config.mouseOnly && event.pointerType !== 'mouse') return;\n      this.start(event);\n      this.computeValues(pointerValues(event));\n      this.compute(event);\n      this.emit();\n    }\n  }, {\n    key: \"leave\",\n    value: function leave(event) {\n      if (this.config.mouseOnly && event.pointerType !== 'mouse') return;\n      var state = this.state;\n      if (!state._active) return;\n      state._active = false;\n      var values = pointerValues(event);\n      state._movement = state._delta = V.sub(values, state._values);\n      this.computeValues(values);\n      this.compute(event);\n      state.delta = state.movement;\n      this.emit();\n    }\n  }, {\n    key: \"bind\",\n    value: function bind(bindFunction) {\n      bindFunction('pointer', 'enter', this.enter.bind(this));\n      bindFunction('pointer', 'leave', this.leave.bind(this));\n    }\n  }]);\n\n  return HoverEngine;\n}(CoordinatesEngine);\n\nvar hoverConfigResolver = _objectSpread2(_objectSpread2({}, coordinatesConfigResolver), {}, {\n  mouseOnly: function mouseOnly() {\n    var value = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : true;\n    return value;\n  }\n});\n\nvar EngineMap = new Map();\nvar ConfigResolverMap = new Map();\n\nfunction registerAction(action) {\n  EngineMap.set(action.key, action.engine);\n  ConfigResolverMap.set(action.key, action.resolver);\n}\n\nvar dragAction = {\n  key: 'drag',\n  engine: DragEngine,\n  resolver: dragConfigResolver\n};\nvar hoverAction = {\n  key: 'hover',\n  engine: HoverEngine,\n  resolver: hoverConfigResolver\n};\nvar moveAction = {\n  key: 'move',\n  engine: MoveEngine,\n  resolver: moveConfigResolver\n};\nvar pinchAction = {\n  key: 'pinch',\n  engine: PinchEngine,\n  resolver: pinchConfigResolver\n};\nvar scrollAction = {\n  key: 'scroll',\n  engine: ScrollEngine,\n  resolver: scrollConfigResolver\n};\nvar wheelAction = {\n  key: 'wheel',\n  engine: WheelEngine,\n  resolver: wheelConfigResolver\n};\nexport { ConfigResolverMap as C, EngineMap as E, SUPPORT as S, _objectSpread2 as _, _defineProperty as a, touchIds as b, chain as c, toHandlerProp as d, dragAction as e, hoverAction as h, isTouch as i, moveAction as m, pinchAction as p, registerAction as r, scrollAction as s, toDomEventType as t, wheelAction as w };","map":{"version":3,"sources":["C:/Users/win10/CODE/cosmos/node_modules/@use-gesture/core/dist/actions-fd032a26.esm.js"],"names":["V","c","computeRubberband","_defineProperty","obj","key","value","Object","defineProperty","enumerable","configurable","writable","ownKeys","object","enumerableOnly","keys","getOwnPropertySymbols","symbols","filter","sym","getOwnPropertyDescriptor","push","apply","_objectSpread2","target","i","arguments","length","source","forEach","getOwnPropertyDescriptors","defineProperties","EVENT_TYPE_MAP","pointer","start","change","end","mouse","touch","gesture","capitalize","string","toUpperCase","slice","toHandlerProp","device","action","capture","deviceProps","actionKey","toDomEventType","isTouch","event","getCurrentTargetTouchList","Array","from","touches","e","_event$currentTarget","_event$currentTarget$","currentTarget","contains","call","getTouchList","type","changedTouches","targetTouches","getValueEvent","distanceAngle","P1","P2","dx","clientX","dy","clientY","cx","cy","distance","Math","hypot","angle","atan2","PI","origin","touchIds","map","identifier","touchDistanceAngle","ids","includes","pointerId","valueEvent","pointerValues","LINE_HEIGHT","PAGE_HEIGHT","wheelValues","deltaX","deltaY","deltaMode","scrollValues","_ref","_ref2","scrollX","scrollY","scrollLeft","scrollTop","getEventDetails","payload","buttons","shiftKey","altKey","metaKey","ctrlKey","assign","v","args","noop","chain","fns","result","fn","assignDefault","fallback","BEFORE_LAST_KINEMATICS_DELAY","Engine","ctrl","state","computeValues","computeInitial","init","reset","shared","gestureEventStores","gestureTimeoutStores","config","handlers","ingKey","_active","active","_blocked","_force","_step","intentional","_movement","_distance","_delta","_bounds","Infinity","axis","undefined","memo","elapsedTime","direction","velocity","movement","delta","timeStamp","lastOffset","offset","startTime","values","_values","transform","_initial","initial","dt","preventDefault","cancelable","pointerIds","size","locked","document","pointerLockElement","down","pressed","_absoluteDelta","abs","addTo","_m0","_m1","threshold","t0","t1","hasCustomTransform","sign","v0","v1","intent","first","last","bounds","setup","previousOffset","computeOffset","sub","absoluteDelta","rubberband","computeMovement","clean","triggerAllEvents","handler","aliasKey","eventStore","timeoutStore","selectAxis","d","restrictVectorToAxis","CoordinatesEngine","add","lockDirection","identity","DEFAULT_RUBBERBAND","commonConfigResolver","enabled","toVector","_k","process","env","NODE_ENV","originalTransform","r","isFinite","console","warn","domTarget","Error","NaN","coordinatesConfigResolver","_v","current","HTMLElement","left","right","top","bottom","DISPLACEMENT","KEYS_DELTA_MAP","ArrowRight","factor","ArrowLeft","ArrowUp","ArrowDown","DragEngine","_pointerId","_pointerActive","_keyboardActive","_preventScroll","_delayed","swipe","tap","canceled","cancel","bind","boundRect","getBoundingClientRect","targetRect","setTimeout","compute","emit","pointerClean","isArray","pointerButtons","setEventIds","pointerCapture","setPointerCapture","setupPointer","preventScroll","setupScrollPrevention","delay","setupDelayTrigger","startPointerDrag","id","movementX","movementY","remove","preventScrollAxis","hasPointerCapture","releasePointerCapture","_unused","setActive","filterTaps","dirx","diry","vx","vy","mx","my","svx","svy","sx","sy","sdt","duration","stopPropagation","sourceEvent","style","window","getComputedStyle","touchAction","_unused2","pointerLock","requestPointerLock","sharedConfig","pointerMove","pointerUp","exitPointerLock","persistEvent","passive","deltaFn","bindFunction","pointerDown","keyDown","keyUp","pointerClick","persist","isBrowser","createElement","supportsTouchEvents","isTouchScreen","navigator","maxTouchPoints","supportsPointerEvents","supportsPointerLock","supportsGestureEvents","GestureEvent","SUPPORT","touchscreen","DEFAULT_PREVENT_SCROLL_DELAY","DEFAULT_DRAG_DELAY","DEFAULT_SWIPE_VELOCITY","DEFAULT_SWIPE_DISTANCE","DEFAULT_SWIPE_DURATION","dragConfigResolver","lock","useTouch","experimental_preventWindowScrollY","swipeVelocity","swipeDistance","swipeDuration","SCALE_ANGLE_RATIO_INTENT_DEG","PINCH_WHEEL_RATIO","PinchEngine","_pointerEvents","Map","_touchIds","turns","axisMovementDifference","ctrlTouchIds","every","has","pinchStart","ctrlPointerIds","set","pinchMove","prev_a","delta_a","delta_turns","some","delete","scale","rotation","_previousMovement","wheelStart","wheelChange","wheelEnd","isR3f","defaultPrevented","wheel","pinchConfigResolver","scaleBounds","angleBounds","_scaleBounds","D","min","max","_angleBounds","A","MoveEngine","mouseOnly","pointerType","moveStart","moveChange","moveEnd","move","moveConfigResolver","ScrollEngine","scrollChange","scrollEnd","scroll","scrollConfigResolver","WheelEngine","wheelConfigResolver","HoverEngine","enter","leave","hoverConfigResolver","EngineMap","ConfigResolverMap","registerAction","engine","resolver","dragAction","hoverAction","moveAction","pinchAction","scrollAction","wheelAction","C","E","S","_","a","b","h","m","p","s","t","w"],"mappings":";;;;;;;;;;;AAAA,SAASA,CAAT,EAAYC,CAAC,IAAIC,iBAAjB,QAA0C,yBAA1C;;AAEA,SAASC,eAAT,CAAyBC,GAAzB,EAA8BC,GAA9B,EAAmCC,KAAnC,EAA0C;AACxC,MAAID,GAAG,IAAID,GAAX,EAAgB;AACdG,IAAAA,MAAM,CAACC,cAAP,CAAsBJ,GAAtB,EAA2BC,GAA3B,EAAgC;AAC9BC,MAAAA,KAAK,EAAEA,KADuB;AAE9BG,MAAAA,UAAU,EAAE,IAFkB;AAG9BC,MAAAA,YAAY,EAAE,IAHgB;AAI9BC,MAAAA,QAAQ,EAAE;AAJoB,KAAhC;AAMD,GAPD,MAOO;AACLP,IAAAA,GAAG,CAACC,GAAD,CAAH,GAAWC,KAAX;AACD;;AAED,SAAOF,GAAP;AACD;;AAED,SAASQ,OAAT,CAAiBC,MAAjB,EAAyBC,cAAzB,EAAyC;AACvC,MAAIC,IAAI,GAAGR,MAAM,CAACQ,IAAP,CAAYF,MAAZ,CAAX;;AAEA,MAAIN,MAAM,CAACS,qBAAX,EAAkC;AAChC,QAAIC,OAAO,GAAGV,MAAM,CAACS,qBAAP,CAA6BH,MAA7B,CAAd;;AAEA,QAAIC,cAAJ,EAAoB;AAClBG,MAAAA,OAAO,GAAGA,OAAO,CAACC,MAAR,CAAe,UAAUC,GAAV,EAAe;AACtC,eAAOZ,MAAM,CAACa,wBAAP,CAAgCP,MAAhC,EAAwCM,GAAxC,EAA6CV,UAApD;AACD,OAFS,CAAV;AAGD;;AAEDM,IAAAA,IAAI,CAACM,IAAL,CAAUC,KAAV,CAAgBP,IAAhB,EAAsBE,OAAtB;AACD;;AAED,SAAOF,IAAP;AACD;;AAED,SAASQ,cAAT,CAAwBC,MAAxB,EAAgC;AAC9B,OAAK,IAAIC,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGC,SAAS,CAACC,MAA9B,EAAsCF,CAAC,EAAvC,EAA2C;AACzC,QAAIG,MAAM,GAAGF,SAAS,CAACD,CAAD,CAAT,IAAgB,IAAhB,GAAuBC,SAAS,CAACD,CAAD,CAAhC,GAAsC,EAAnD;;AAEA,QAAIA,CAAC,GAAG,CAAR,EAAW;AACTb,MAAAA,OAAO,CAACL,MAAM,CAACqB,MAAD,CAAP,EAAiB,IAAjB,CAAP,CAA8BC,OAA9B,CAAsC,UAAUxB,GAAV,EAAe;AACnDF,QAAAA,eAAe,CAACqB,MAAD,EAASnB,GAAT,EAAcuB,MAAM,CAACvB,GAAD,CAApB,CAAf;AACD,OAFD;AAGD,KAJD,MAIO,IAAIE,MAAM,CAACuB,yBAAX,EAAsC;AAC3CvB,MAAAA,MAAM,CAACwB,gBAAP,CAAwBP,MAAxB,EAAgCjB,MAAM,CAACuB,yBAAP,CAAiCF,MAAjC,CAAhC;AACD,KAFM,MAEA;AACLhB,MAAAA,OAAO,CAACL,MAAM,CAACqB,MAAD,CAAP,CAAP,CAAwBC,OAAxB,CAAgC,UAAUxB,GAAV,EAAe;AAC7CE,QAAAA,MAAM,CAACC,cAAP,CAAsBgB,MAAtB,EAA8BnB,GAA9B,EAAmCE,MAAM,CAACa,wBAAP,CAAgCQ,MAAhC,EAAwCvB,GAAxC,CAAnC;AACD,OAFD;AAGD;AACF;;AAED,SAAOmB,MAAP;AACD;;AAED,IAAMQ,cAAc,GAAG;AACrBC,EAAAA,OAAO,EAAE;AACPC,IAAAA,KAAK,EAAE,MADA;AAEPC,IAAAA,MAAM,EAAE,MAFD;AAGPC,IAAAA,GAAG,EAAE;AAHE,GADY;AAMrBC,EAAAA,KAAK,EAAE;AACLH,IAAAA,KAAK,EAAE,MADF;AAELC,IAAAA,MAAM,EAAE,MAFH;AAGLC,IAAAA,GAAG,EAAE;AAHA,GANc;AAWrBE,EAAAA,KAAK,EAAE;AACLJ,IAAAA,KAAK,EAAE,OADF;AAELC,IAAAA,MAAM,EAAE,MAFH;AAGLC,IAAAA,GAAG,EAAE;AAHA,GAXc;AAgBrBG,EAAAA,OAAO,EAAE;AACPL,IAAAA,KAAK,EAAE,OADA;AAEPC,IAAAA,MAAM,EAAE,QAFD;AAGPC,IAAAA,GAAG,EAAE;AAHE;AAhBY,CAAvB;;AAuBA,SAASI,UAAT,CAAoBC,MAApB,EAA4B;AAC1B,MAAI,CAACA,MAAL,EAAa,OAAO,EAAP;AACb,SAAOA,MAAM,CAAC,CAAD,CAAN,CAAUC,WAAV,KAA0BD,MAAM,CAACE,KAAP,CAAa,CAAb,CAAjC;AACD;;AAED,SAASC,aAAT,CAAuBC,MAAvB,EAA6D;AAAA,MAA9BC,MAA8B,uEAArB,EAAqB;AAAA,MAAjBC,OAAiB,uEAAP,KAAO;AAC3D,MAAMC,WAAW,GAAGhB,cAAc,CAACa,MAAD,CAAlC;AACA,MAAMI,SAAS,GAAGD,WAAW,GAAGA,WAAW,CAACF,MAAD,CAAX,IAAuBA,MAA1B,GAAmCA,MAAhE;AACA,SAAO,OAAON,UAAU,CAACK,MAAD,CAAjB,GAA4BL,UAAU,CAACS,SAAD,CAAtC,IAAqDF,OAAO,GAAG,SAAH,GAAe,EAA3E,CAAP;AACD;;AACD,SAASG,cAAT,CAAwBL,MAAxB,EAA6C;AAAA,MAAbC,MAAa,uEAAJ,EAAI;AAC3C,MAAME,WAAW,GAAGhB,cAAc,CAACa,MAAD,CAAlC;AACA,MAAMI,SAAS,GAAGD,WAAW,GAAGA,WAAW,CAACF,MAAD,CAAX,IAAuBA,MAA1B,GAAmCA,MAAhE;AACA,SAAOD,MAAM,GAAGI,SAAhB;AACD;;AACD,SAASE,OAAT,CAAiBC,KAAjB,EAAwB;AACtB,SAAO,aAAaA,KAApB;AACD;;AAED,SAASC,yBAAT,CAAmCD,KAAnC,EAA0C;AACxC,SAAOE,KAAK,CAACC,IAAN,CAAWH,KAAK,CAACI,OAAjB,EAA0BtC,MAA1B,CAAiC,UAAAuC,CAAC,EAAI;AAC3C,QAAIC,oBAAJ,EAA0BC,qBAA1B;;AAEA,WAAOF,CAAC,CAACjC,MAAF,KAAa4B,KAAK,CAACQ,aAAnB,KAAqC,CAACF,oBAAoB,GAAGN,KAAK,CAACQ,aAA9B,MAAiD,IAAjD,IAAyDF,oBAAoB,KAAK,KAAK,CAAvF,GAA2F,KAAK,CAAhG,GAAoG,CAACC,qBAAqB,GAAGD,oBAAoB,CAACG,QAA9C,MAA4D,IAA5D,IAAoEF,qBAAqB,KAAK,KAAK,CAAnG,GAAuG,KAAK,CAA5G,GAAgHA,qBAAqB,CAACG,IAAtB,CAA2BJ,oBAA3B,EAAiDD,CAAC,CAACjC,MAAnD,CAAzP,CAAP;AACD,GAJM,CAAP;AAKD;;AAED,SAASuC,YAAT,CAAsBX,KAAtB,EAA6B;AAC3B,SAAOA,KAAK,CAACY,IAAN,KAAe,UAAf,GAA4BZ,KAAK,CAACa,cAAlC,GAAmDb,KAAK,CAACc,aAAhE;AACD;;AAED,SAASC,aAAT,CAAuBf,KAAvB,EAA8B;AAC5B,SAAOD,OAAO,CAACC,KAAD,CAAP,GAAiBW,YAAY,CAACX,KAAD,CAAZ,CAAoB,CAApB,CAAjB,GAA0CA,KAAjD;AACD;;AAED,SAASgB,aAAT,CAAuBC,EAAvB,EAA2BC,EAA3B,EAA+B;AAC7B,MAAMC,EAAE,GAAGD,EAAE,CAACE,OAAH,GAAaH,EAAE,CAACG,OAA3B;AACA,MAAMC,EAAE,GAAGH,EAAE,CAACI,OAAH,GAAaL,EAAE,CAACK,OAA3B;AACA,MAAMC,EAAE,GAAG,CAACL,EAAE,CAACE,OAAH,GAAaH,EAAE,CAACG,OAAjB,IAA4B,CAAvC;AACA,MAAMI,EAAE,GAAG,CAACN,EAAE,CAACI,OAAH,GAAaL,EAAE,CAACK,OAAjB,IAA4B,CAAvC;AACA,MAAMG,QAAQ,GAAGC,IAAI,CAACC,KAAL,CAAWR,EAAX,EAAeE,EAAf,CAAjB;AACA,MAAMO,KAAK,GAAG,EAAEF,IAAI,CAACG,KAAL,CAAWV,EAAX,EAAeE,EAAf,IAAqB,GAAvB,IAA8BK,IAAI,CAACI,EAAjD;AACA,MAAMC,MAAM,GAAG,CAACR,EAAD,EAAKC,EAAL,CAAf;AACA,SAAO;AACLI,IAAAA,KAAK,EAALA,KADK;AAELH,IAAAA,QAAQ,EAARA,QAFK;AAGLM,IAAAA,MAAM,EAANA;AAHK,GAAP;AAKD;;AACD,SAASC,QAAT,CAAkBhC,KAAlB,EAAyB;AACvB,SAAOC,yBAAyB,CAACD,KAAD,CAAzB,CAAiCiC,GAAjC,CAAqC,UAAA/C,KAAK;AAAA,WAAIA,KAAK,CAACgD,UAAV;AAAA,GAA1C,CAAP;AACD;;AACD,SAASC,kBAAT,CAA4BnC,KAA5B,EAAmCoC,GAAnC,EAAwC;AACtC,2BAAiBlC,KAAK,CAACC,IAAN,CAAWH,KAAK,CAACI,OAAjB,EAA0BtC,MAA1B,CAAiC,UAAAoB,KAAK;AAAA,WAAIkD,GAAG,CAACC,QAAJ,CAAanD,KAAK,CAACgD,UAAnB,CAAJ;AAAA,GAAtC,CAAjB;AAAA;AAAA,MAAOjB,EAAP;AAAA,MAAWC,EAAX;;AACA,SAAOF,aAAa,CAACC,EAAD,EAAKC,EAAL,CAApB;AACD;;AACD,SAASoB,SAAT,CAAmBtC,KAAnB,EAA0B;AACxB,MAAMuC,UAAU,GAAGxB,aAAa,CAACf,KAAD,CAAhC;AACA,SAAOD,OAAO,CAACC,KAAD,CAAP,GAAiBuC,UAAU,CAACL,UAA5B,GAAyCK,UAAU,CAACD,SAA3D;AACD;;AACD,SAASE,aAAT,CAAuBxC,KAAvB,EAA8B;AAC5B,MAAMuC,UAAU,GAAGxB,aAAa,CAACf,KAAD,CAAhC;AACA,SAAO,CAACuC,UAAU,CAACnB,OAAZ,EAAqBmB,UAAU,CAACjB,OAAhC,CAAP;AACD;;AACD,IAAMmB,WAAW,GAAG,EAApB;AACA,IAAMC,WAAW,GAAG,GAApB;;AACA,SAASC,WAAT,CAAqB3C,KAArB,EAA4B;AAC1B,MACE4C,MADF,GAII5C,KAJJ,CACE4C,MADF;AAAA,MAEEC,MAFF,GAII7C,KAJJ,CAEE6C,MAFF;AAAA,MAGEC,SAHF,GAII9C,KAJJ,CAGE8C,SAHF;;AAMA,MAAIA,SAAS,KAAK,CAAlB,EAAqB;AACnBF,IAAAA,MAAM,IAAIH,WAAV;AACAI,IAAAA,MAAM,IAAIJ,WAAV;AACD,GAHD,MAGO,IAAIK,SAAS,KAAK,CAAlB,EAAqB;AAC1BF,IAAAA,MAAM,IAAIF,WAAV;AACAG,IAAAA,MAAM,IAAIH,WAAV;AACD;;AAED,SAAO,CAACE,MAAD,EAASC,MAAT,CAAP;AACD;;AACD,SAASE,YAAT,CAAsB/C,KAAtB,EAA6B;AAC3B,MAAIgD,IAAJ,EAAUC,KAAV;;AAEA,8BAKIjD,KAAK,CAACQ,aALV;AAAA,MACE0C,OADF,yBACEA,OADF;AAAA,MAEEC,OAFF,yBAEEA,OAFF;AAAA,MAGEC,UAHF,yBAGEA,UAHF;AAAA,MAIEC,SAJF,yBAIEA,SAJF;AAMA,SAAO,CAAC,CAACL,IAAI,GAAGE,OAAO,KAAK,IAAZ,IAAoBA,OAAO,KAAK,KAAK,CAArC,GAAyCA,OAAzC,GAAmDE,UAA3D,MAA2E,IAA3E,IAAmFJ,IAAI,KAAK,KAAK,CAAjG,GAAqGA,IAArG,GAA4G,CAA7G,EAAgH,CAACC,KAAK,GAAGE,OAAO,KAAK,IAAZ,IAAoBA,OAAO,KAAK,KAAK,CAArC,GAAyCA,OAAzC,GAAmDE,SAA5D,MAA2E,IAA3E,IAAmFJ,KAAK,KAAK,KAAK,CAAlG,GAAsGA,KAAtG,GAA8G,CAA9N,CAAP;AACD;;AACD,SAASK,eAAT,CAAyBtD,KAAzB,EAAgC;AAC9B,MAAMuD,OAAO,GAAG,EAAhB;AACA,MAAI,aAAavD,KAAjB,EAAwBuD,OAAO,CAACC,OAAR,GAAkBxD,KAAK,CAACwD,OAAxB;;AAExB,MAAI,cAAcxD,KAAlB,EAAyB;AACvB,QACEyD,QADF,GAKIzD,KALJ,CACEyD,QADF;AAAA,QAEEC,MAFF,GAKI1D,KALJ,CAEE0D,MAFF;AAAA,QAGEC,OAHF,GAKI3D,KALJ,CAGE2D,OAHF;AAAA,QAIEC,OAJF,GAKI5D,KALJ,CAIE4D,OAJF;AAMAzG,IAAAA,MAAM,CAAC0G,MAAP,CAAcN,OAAd,EAAuB;AACrBE,MAAAA,QAAQ,EAARA,QADqB;AAErBC,MAAAA,MAAM,EAANA,MAFqB;AAGrBC,MAAAA,OAAO,EAAPA,OAHqB;AAIrBC,MAAAA,OAAO,EAAPA;AAJqB,KAAvB;AAMD;;AAED,SAAOL,OAAP;AACD;;AAED,SAAS7C,IAAT,CAAcoD,CAAd,EAA0B;AACxB,MAAI,OAAOA,CAAP,KAAa,UAAjB,EAA6B;AAAA,sCADXC,IACW;AADXA,MAAAA,IACW;AAAA;;AAC3B,WAAOD,CAAC,MAAD,SAAKC,IAAL,CAAP;AACD,GAFD,MAEO;AACL,WAAOD,CAAP;AACD;AACF;;AACD,SAASE,IAAT,GAAgB,CAAE;;AAClB,SAASC,KAAT,GAAuB;AAAA,qCAALC,GAAK;AAALA,IAAAA,GAAK;AAAA;;AACrB,MAAIA,GAAG,CAAC3F,MAAJ,KAAe,CAAnB,EAAsB,OAAOyF,IAAP;AACtB,MAAIE,GAAG,CAAC3F,MAAJ,KAAe,CAAnB,EAAsB,OAAO2F,GAAG,CAAC,CAAD,CAAV;AACtB,SAAO,YAAY;AACjB,QAAIC,MAAJ;;AADiB,+CAGAD,GAHA;AAAA;;AAAA;AAGjB,2DAAsB;AAAA,YAAXE,EAAW;AACpBD,QAAAA,MAAM,GAAGC,EAAE,CAAClG,KAAH,CAAS,IAAT,EAAeI,SAAf,KAA6B6F,MAAtC;AACD;AALgB;AAAA;AAAA;AAAA;AAAA;;AAOjB,WAAOA,MAAP;AACD,GARD;AASD;;AACD,SAASE,aAAT,CAAuBnH,KAAvB,EAA8BoH,QAA9B,EAAwC;AACtC,SAAOnH,MAAM,CAAC0G,MAAP,CAAc,EAAd,EAAkBS,QAAlB,EAA4BpH,KAAK,IAAI,EAArC,CAAP;AACD;;AAED,IAAMqH,4BAA4B,GAAG,EAArC;;IACMC,M;AACJ,kBAAYC,IAAZ,EAAkBV,IAAlB,EAAwB9G,GAAxB,EAA6B;AAAA;;AAC3B,SAAKwH,IAAL,GAAYA,IAAZ;AACA,SAAKV,IAAL,GAAYA,IAAZ;AACA,SAAK9G,GAAL,GAAWA,GAAX;;AAEA,QAAI,CAAC,KAAKyH,KAAV,EAAiB;AACf,WAAKA,KAAL,GAAa,EAAb;AACA,WAAKC,aAAL,CAAmB,CAAC,CAAD,EAAI,CAAJ,CAAnB;AACA,WAAKC,cAAL;AACA,UAAI,KAAKC,IAAT,EAAe,KAAKA,IAAL;AACf,WAAKC,KAAL;AACD;AACF;;;;SAED,eAAY;AACV,aAAO,KAAKL,IAAL,CAAUC,KAAV,CAAgB,KAAKzH,GAArB,CAAP;AACD,K;SAED,aAAUyH,KAAV,EAAiB;AACf,WAAKD,IAAL,CAAUC,KAAV,CAAgB,KAAKzH,GAArB,IAA4ByH,KAA5B;AACD;;;SAED,eAAa;AACX,aAAO,KAAKD,IAAL,CAAUC,KAAV,CAAgBK,MAAvB;AACD;;;SAED,eAAiB;AACf,aAAO,KAAKN,IAAL,CAAUO,kBAAV,CAA6B,KAAK/H,GAAlC,CAAP;AACD;;;SAED,eAAmB;AACjB,aAAO,KAAKwH,IAAL,CAAUQ,oBAAV,CAA+B,KAAKhI,GAApC,CAAP;AACD;;;SAED,eAAa;AACX,aAAO,KAAKwH,IAAL,CAAUS,MAAV,CAAiB,KAAKjI,GAAtB,CAAP;AACD;;;SAED,eAAmB;AACjB,aAAO,KAAKwH,IAAL,CAAUS,MAAV,CAAiBH,MAAxB;AACD;;;SAED,eAAc;AACZ,aAAO,KAAKN,IAAL,CAAUU,QAAV,CAAmB,KAAKlI,GAAxB,CAAP;AACD;;;WAED,iBAAQ;AACN,UACEyH,KADF,GAKI,IALJ,CACEA,KADF;AAAA,UAEEK,MAFF,GAKI,IALJ,CAEEA,MAFF;AAAA,UAGEK,MAHF,GAKI,IALJ,CAGEA,MAHF;AAAA,UAIErB,IAJF,GAKI,IALJ,CAIEA,IAJF;AAMAgB,MAAAA,MAAM,CAACK,MAAD,CAAN,GAAiBV,KAAK,CAACW,OAAN,GAAgBX,KAAK,CAACY,MAAN,GAAeZ,KAAK,CAACa,QAAN,GAAiBb,KAAK,CAACc,MAAN,GAAe,KAAhF;AACAd,MAAAA,KAAK,CAACe,KAAN,GAAc,CAAC,KAAD,EAAQ,KAAR,CAAd;AACAf,MAAAA,KAAK,CAACgB,WAAN,GAAoB,KAApB;AACAhB,MAAAA,KAAK,CAACiB,SAAN,GAAkB,CAAC,CAAD,EAAI,CAAJ,CAAlB;AACAjB,MAAAA,KAAK,CAACkB,SAAN,GAAkB,CAAC,CAAD,EAAI,CAAJ,CAAlB;AACAlB,MAAAA,KAAK,CAACmB,MAAN,GAAe,CAAC,CAAD,EAAI,CAAJ,CAAf;AACAnB,MAAAA,KAAK,CAACoB,OAAN,GAAgB,CAAC,CAAC,CAACC,QAAF,EAAYA,QAAZ,CAAD,EAAwB,CAAC,CAACA,QAAF,EAAYA,QAAZ,CAAxB,CAAhB;AACArB,MAAAA,KAAK,CAACX,IAAN,GAAaA,IAAb;AACAW,MAAAA,KAAK,CAACsB,IAAN,GAAaC,SAAb;AACAvB,MAAAA,KAAK,CAACwB,IAAN,GAAaD,SAAb;AACAvB,MAAAA,KAAK,CAACyB,WAAN,GAAoB,CAApB;AACAzB,MAAAA,KAAK,CAAC0B,SAAN,GAAkB,CAAC,CAAD,EAAI,CAAJ,CAAlB;AACA1B,MAAAA,KAAK,CAACjD,QAAN,GAAiB,CAAC,CAAD,EAAI,CAAJ,CAAjB;AACAiD,MAAAA,KAAK,CAAC2B,QAAN,GAAiB,CAAC,CAAD,EAAI,CAAJ,CAAjB;AACA3B,MAAAA,KAAK,CAAC4B,QAAN,GAAiB,CAAC,CAAD,EAAI,CAAJ,CAAjB;AACA5B,MAAAA,KAAK,CAAC6B,KAAN,GAAc,CAAC,CAAD,EAAI,CAAJ,CAAd;AACA7B,MAAAA,KAAK,CAAC8B,SAAN,GAAkB,CAAlB;AACD;;;WAED,eAAMxG,KAAN,EAAa;AACX,UAAM0E,KAAK,GAAG,KAAKA,KAAnB;AACA,UAAMQ,MAAM,GAAG,KAAKA,MAApB;;AAEA,UAAI,CAACR,KAAK,CAACW,OAAX,EAAoB;AAClB,aAAKP,KAAL;AACA,aAAKF,cAAL;AACAF,QAAAA,KAAK,CAACW,OAAN,GAAgB,IAAhB;AACAX,QAAAA,KAAK,CAACtG,MAAN,GAAe4B,KAAK,CAAC5B,MAArB;AACAsG,QAAAA,KAAK,CAAClE,aAAN,GAAsBR,KAAK,CAACQ,aAA5B;AACAkE,QAAAA,KAAK,CAAC+B,UAAN,GAAmBvB,MAAM,CAAC/E,IAAP,GAAcO,IAAI,CAACwE,MAAM,CAAC/E,IAAR,EAAcuE,KAAd,CAAlB,GAAyCA,KAAK,CAACgC,MAAlE;AACAhC,QAAAA,KAAK,CAACgC,MAAN,GAAehC,KAAK,CAAC+B,UAArB;AACD;;AAED/B,MAAAA,KAAK,CAACiC,SAAN,GAAkBjC,KAAK,CAAC8B,SAAN,GAAkBxG,KAAK,CAACwG,SAA1C;AACD;;;WAED,uBAAcI,MAAd,EAAsB;AACpB,UAAMlC,KAAK,GAAG,KAAKA,KAAnB;AACAA,MAAAA,KAAK,CAACmC,OAAN,GAAgBD,MAAhB;AACAlC,MAAAA,KAAK,CAACkC,MAAN,GAAe,KAAK1B,MAAL,CAAY4B,SAAZ,CAAsBF,MAAtB,CAAf;AACD;;;WAED,0BAAiB;AACf,UAAMlC,KAAK,GAAG,KAAKA,KAAnB;AACAA,MAAAA,KAAK,CAACqC,QAAN,GAAiBrC,KAAK,CAACmC,OAAvB;AACAnC,MAAAA,KAAK,CAACsC,OAAN,GAAgBtC,KAAK,CAACkC,MAAtB;AACD;;;WAED,iBAAQ5G,KAAR,EAAe;AACb,UACE0E,KADF,GAII,IAJJ,CACEA,KADF;AAAA,UAEEQ,MAFF,GAII,IAJJ,CAEEA,MAFF;AAAA,UAGEH,MAHF,GAII,IAJJ,CAGEA,MAHF;AAKAL,MAAAA,KAAK,CAACX,IAAN,GAAa,KAAKA,IAAlB;AACA,UAAIkD,EAAE,GAAG,CAAT;;AAEA,UAAIjH,KAAJ,EAAW;AACT0E,QAAAA,KAAK,CAAC1E,KAAN,GAAcA,KAAd;AACA,YAAIkF,MAAM,CAACgC,cAAP,IAAyBlH,KAAK,CAACmH,UAAnC,EAA+CzC,KAAK,CAAC1E,KAAN,CAAYkH,cAAZ;AAC/CxC,QAAAA,KAAK,CAAC9D,IAAN,GAAaZ,KAAK,CAACY,IAAnB;AACAmE,QAAAA,MAAM,CAAC3E,OAAP,GAAiB,KAAKqE,IAAL,CAAU2C,UAAV,CAAqBC,IAArB,IAA6B,KAAK5C,IAAL,CAAUzC,QAAV,CAAmBqF,IAAjE;AACAtC,QAAAA,MAAM,CAACuC,MAAP,GAAgB,CAAC,CAACC,QAAQ,CAACC,kBAA3B;AACArK,QAAAA,MAAM,CAAC0G,MAAP,CAAckB,MAAd,EAAsBzB,eAAe,CAACtD,KAAD,CAArC;AACA+E,QAAAA,MAAM,CAAC0C,IAAP,GAAc1C,MAAM,CAAC2C,OAAP,GAAiB3C,MAAM,CAACvB,OAAP,GAAiB,CAAjB,KAAuB,CAAvB,IAA4BuB,MAAM,CAAC3E,OAAP,GAAiB,CAA5E;AACA6G,QAAAA,EAAE,GAAGjH,KAAK,CAACwG,SAAN,GAAkB9B,KAAK,CAAC8B,SAA7B;AACA9B,QAAAA,KAAK,CAAC8B,SAAN,GAAkBxG,KAAK,CAACwG,SAAxB;AACA9B,QAAAA,KAAK,CAACyB,WAAN,GAAoBzB,KAAK,CAAC8B,SAAN,GAAkB9B,KAAK,CAACiC,SAA5C;AACD;;AAED,UAAIjC,KAAK,CAACW,OAAV,EAAmB;AACjB,YAAMsC,cAAc,GAAGjD,KAAK,CAACmB,MAAN,CAAa5D,GAAb,CAAiBP,IAAI,CAACkG,GAAtB,CAAvB;;AAEAhL,QAAAA,CAAC,CAACiL,KAAF,CAAQnD,KAAK,CAACkB,SAAd,EAAyB+B,cAAzB;AACD;;AAED,4CAAmBjD,KAAK,CAACiB,SAAzB;AAAA,UAAOmC,GAAP;AAAA,UAAYC,GAAZ;;AACA,6CAAiB7C,MAAM,CAAC8C,SAAxB;AAAA,UAAOC,EAAP;AAAA,UAAWC,EAAX;;AACA,UACEzC,KADF,GAGIf,KAHJ,CACEe,KADF;AAAA,UAEEmB,MAFF,GAGIlC,KAHJ,CAEEkC,MAFF;;AAKA,UAAI1B,MAAM,CAACiD,kBAAX,EAA+B;AAC7B,YAAI1C,KAAK,CAAC,CAAD,CAAL,KAAa,KAAjB,EAAwBA,KAAK,CAAC,CAAD,CAAL,GAAW/D,IAAI,CAACkG,GAAL,CAASE,GAAT,KAAiBG,EAAjB,IAAuBrB,MAAM,CAAC,CAAD,CAAxC;AACxB,YAAInB,KAAK,CAAC,CAAD,CAAL,KAAa,KAAjB,EAAwBA,KAAK,CAAC,CAAD,CAAL,GAAW/D,IAAI,CAACkG,GAAL,CAASG,GAAT,KAAiBG,EAAjB,IAAuBtB,MAAM,CAAC,CAAD,CAAxC;AACzB,OAHD,MAGO;AACL,YAAInB,KAAK,CAAC,CAAD,CAAL,KAAa,KAAjB,EAAwBA,KAAK,CAAC,CAAD,CAAL,GAAW/D,IAAI,CAACkG,GAAL,CAASE,GAAT,KAAiBG,EAAjB,IAAuBvG,IAAI,CAAC0G,IAAL,CAAUN,GAAV,IAAiBG,EAAnD;AACxB,YAAIxC,KAAK,CAAC,CAAD,CAAL,KAAa,KAAjB,EAAwBA,KAAK,CAAC,CAAD,CAAL,GAAW/D,IAAI,CAACkG,GAAL,CAASG,GAAT,KAAiBG,EAAjB,IAAuBxG,IAAI,CAAC0G,IAAL,CAAUL,GAAV,IAAiBG,EAAnD;AACzB;;AAEDxD,MAAAA,KAAK,CAACgB,WAAN,GAAoBD,KAAK,CAAC,CAAD,CAAL,KAAa,KAAb,IAAsBA,KAAK,CAAC,CAAD,CAAL,KAAa,KAAvD;AACA,UAAI,CAACf,KAAK,CAACgB,WAAX,EAAwB;AACxB,UAAMY,QAAQ,GAAG,CAAC,CAAD,EAAI,CAAJ,CAAjB;;AAEA,UAAIpB,MAAM,CAACiD,kBAAX,EAA+B;AAC7B,sCAAiBvB,MAAjB;AAAA,YAAOyB,EAAP;AAAA,YAAWC,EAAX;;AACAhC,QAAAA,QAAQ,CAAC,CAAD,CAAR,GAAcb,KAAK,CAAC,CAAD,CAAL,KAAa,KAAb,GAAqB4C,EAAE,GAAG5C,KAAK,CAAC,CAAD,CAA/B,GAAqC,CAAnD;AACAa,QAAAA,QAAQ,CAAC,CAAD,CAAR,GAAcb,KAAK,CAAC,CAAD,CAAL,KAAa,KAAb,GAAqB6C,EAAE,GAAG7C,KAAK,CAAC,CAAD,CAA/B,GAAqC,CAAnD;AACD,OAJD,MAIO;AACLa,QAAAA,QAAQ,CAAC,CAAD,CAAR,GAAcb,KAAK,CAAC,CAAD,CAAL,KAAa,KAAb,GAAqBqC,GAAG,GAAGrC,KAAK,CAAC,CAAD,CAAhC,GAAsC,CAApD;AACAa,QAAAA,QAAQ,CAAC,CAAD,CAAR,GAAcb,KAAK,CAAC,CAAD,CAAL,KAAa,KAAb,GAAqBsC,GAAG,GAAGtC,KAAK,CAAC,CAAD,CAAhC,GAAsC,CAApD;AACD;;AAED,UAAI,KAAK8C,MAAT,EAAiB,KAAKA,MAAL,CAAYjC,QAAZ;;AAEjB,UAAI5B,KAAK,CAACW,OAAN,IAAiB,CAACX,KAAK,CAACa,QAAxB,IAAoCb,KAAK,CAACY,MAA9C,EAAsD;AACpDZ,QAAAA,KAAK,CAAC8D,KAAN,GAAc9D,KAAK,CAACW,OAAN,IAAiB,CAACX,KAAK,CAACY,MAAtC;AACAZ,QAAAA,KAAK,CAAC+D,IAAN,GAAa,CAAC/D,KAAK,CAACW,OAAP,IAAkBX,KAAK,CAACY,MAArC;AACAZ,QAAAA,KAAK,CAACY,MAAN,GAAeP,MAAM,CAAC,KAAKK,MAAN,CAAN,GAAsBV,KAAK,CAACW,OAA3C;;AAEA,YAAIrF,KAAJ,EAAW;AACT,cAAI0E,KAAK,CAAC8D,KAAV,EAAiB;AACf,gBAAI,YAAYtD,MAAhB,EAAwBR,KAAK,CAACoB,OAAN,GAAgBpF,IAAI,CAACwE,MAAM,CAACwD,MAAR,EAAgBhE,KAAhB,CAApB;AACxB,gBAAI,KAAKiE,KAAT,EAAgB,KAAKA,KAAL;AACjB;;AAEDjE,UAAAA,KAAK,CAAC4B,QAAN,GAAiBA,QAAjB;AACA,cAAMsC,cAAc,GAAGlE,KAAK,CAACgC,MAA7B;AACA,eAAKmC,aAAL;;AAEA,cAAI,CAACnE,KAAK,CAAC+D,IAAP,IAAexB,EAAE,GAAG1C,4BAAxB,EAAsD;AACpDG,YAAAA,KAAK,CAAC6B,KAAN,GAAc3J,CAAC,CAACkM,GAAF,CAAMpE,KAAK,CAACgC,MAAZ,EAAoBkC,cAApB,CAAd;AACA,gBAAMG,aAAa,GAAGrE,KAAK,CAAC6B,KAAN,CAAYtE,GAAZ,CAAgBP,IAAI,CAACkG,GAArB,CAAtB;AACAhL,YAAAA,CAAC,CAACiL,KAAF,CAAQnD,KAAK,CAACjD,QAAd,EAAwBsH,aAAxB;AACArE,YAAAA,KAAK,CAAC0B,SAAN,GAAkB1B,KAAK,CAAC6B,KAAN,CAAYtE,GAAZ,CAAgBP,IAAI,CAAC0G,IAArB,CAAlB;;AAEA,gBAAI,CAAC1D,KAAK,CAAC8D,KAAP,IAAgBvB,EAAE,GAAG,CAAzB,EAA4B;AAC1BvC,cAAAA,KAAK,CAAC2B,QAAN,GAAiB,CAAC0C,aAAa,CAAC,CAAD,CAAb,GAAmB9B,EAApB,EAAwB8B,aAAa,CAAC,CAAD,CAAb,GAAmB9B,EAA3C,CAAjB;AACD;AACF;AACF;AACF;;AAED,UAAM+B,UAAU,GAAGtE,KAAK,CAACW,OAAN,GAAgBH,MAAM,CAAC8D,UAAP,IAAqB,CAAC,CAAD,EAAI,CAAJ,CAArC,GAA8C,CAAC,CAAD,EAAI,CAAJ,CAAjE;AACAtE,MAAAA,KAAK,CAACgC,MAAN,GAAe5J,iBAAiB,CAAC4H,KAAK,CAACoB,OAAP,EAAgBpB,KAAK,CAACgC,MAAtB,EAA8BsC,UAA9B,CAAhC;AACA,WAAKC,eAAL;AACD;;;WAED,gBAAO;AACL,UAAMvE,KAAK,GAAG,KAAKA,KAAnB;AACA,UAAMK,MAAM,GAAG,KAAKA,MAApB;AACA,UAAMG,MAAM,GAAG,KAAKA,MAApB;AACA,UAAI,CAACR,KAAK,CAACW,OAAX,EAAoB,KAAK6D,KAAL;AACpB,UAAI,CAACxE,KAAK,CAACa,QAAN,IAAkB,CAACb,KAAK,CAACgB,WAA1B,KAA0C,CAAChB,KAAK,CAACc,MAAjD,IAA2D,CAACN,MAAM,CAACiE,gBAAvE,EAAyF;AACzF,UAAMjD,IAAI,GAAG,KAAKkD,OAAL,CAAajL,cAAc,CAACA,cAAc,CAACA,cAAc,CAAC,EAAD,EAAK4G,MAAL,CAAf,EAA6BL,KAA7B,CAAf,EAAoD,EAApD,uBACrC,KAAK2E,QADgC,EACrB3E,KAAK,CAACkC,MADe,EAA3B,CAAb;AAGA,UAAIV,IAAI,KAAKD,SAAb,EAAwBvB,KAAK,CAACwB,IAAN,GAAaA,IAAb;AACzB;;;WAED,iBAAQ;AACN,WAAKoD,UAAL,CAAgBJ,KAAhB;AACA,WAAKK,YAAL,CAAkBL,KAAlB;AACD;;;;;;AAIH,SAASM,UAAT,QAA8B;AAAA;AAAA,MAATrI,EAAS;AAAA,MAALE,EAAK;;AAC5B,MAAMoI,CAAC,GAAG/H,IAAI,CAACkG,GAAL,CAASzG,EAAT,IAAeO,IAAI,CAACkG,GAAL,CAASvG,EAAT,CAAzB;AACA,MAAIoI,CAAC,GAAG,CAAR,EAAW,OAAO,GAAP;AACX,MAAIA,CAAC,GAAG,CAAR,EAAW,OAAO,GAAP;AACX,SAAOxD,SAAP;AACD;;AAED,SAASyD,oBAAT,CAA8B5F,CAA9B,EAAiCkC,IAAjC,EAAuC;AACrC,UAAQA,IAAR;AACE,SAAK,GAAL;AACElC,MAAAA,CAAC,CAAC,CAAD,CAAD,GAAO,CAAP;AACA;;AAEF,SAAK,GAAL;AACEA,MAAAA,CAAC,CAAC,CAAD,CAAD,GAAO,CAAP;AACA;AAPJ;AASD;;IAEK6F,iB;;;;;AACJ,+BAAqB;AAAA;;AAAA;;AAAA,uCAAN5F,IAAM;AAANA,MAAAA,IAAM;AAAA;;AACnB,oDAASA,IAAT;;AAEAhH,IAAAA,eAAe,gCAAO,UAAP,EAAmB,IAAnB,CAAf;;AAHmB;AAIpB;;;;WAED,iBAAQ;AACN;;AACA,WAAK2H,KAAL,CAAWsB,IAAX,GAAkBC,SAAlB;AACD;;;WAED,gBAAO;AACL,WAAKvB,KAAL,CAAWgC,MAAX,GAAoB,CAAC,CAAD,EAAI,CAAJ,CAApB;AACA,WAAKhC,KAAL,CAAW+B,UAAX,GAAwB,CAAC,CAAD,EAAI,CAAJ,CAAxB;AACD;;;WAED,yBAAgB;AACd,WAAK/B,KAAL,CAAWgC,MAAX,GAAoB9J,CAAC,CAACgN,GAAF,CAAM,KAAKlF,KAAL,CAAW+B,UAAjB,EAA6B,KAAK/B,KAAL,CAAW4B,QAAxC,CAApB;AACD;;;WAED,2BAAkB;AAChB,WAAK5B,KAAL,CAAW4B,QAAX,GAAsB1J,CAAC,CAACkM,GAAF,CAAM,KAAKpE,KAAL,CAAWgC,MAAjB,EAAyB,KAAKhC,KAAL,CAAW+B,UAApC,CAAtB;AACD;;;WAED,gBAAO3C,CAAP,EAAU;AACR,WAAKY,KAAL,CAAWsB,IAAX,GAAkB,KAAKtB,KAAL,CAAWsB,IAAX,IAAmBwD,UAAU,CAAC1F,CAAD,CAA/C;AACA,WAAKY,KAAL,CAAWa,QAAX,GAAsB,CAAC,KAAKL,MAAL,CAAY2E,aAAZ,IAA6B,CAAC,CAAC,KAAK3E,MAAL,CAAYc,IAA5C,KAAqD,CAAC,KAAKtB,KAAL,CAAWsB,IAAjE,IAAyE,CAAC,CAAC,KAAKd,MAAL,CAAYc,IAAd,IAAsB,KAAKd,MAAL,CAAYc,IAAZ,KAAqB,KAAKtB,KAAL,CAAWsB,IAArJ;AACA,UAAI,KAAKtB,KAAL,CAAWa,QAAf,EAAyB;;AAEzB,UAAI,KAAKL,MAAL,CAAYc,IAAZ,IAAoB,KAAKd,MAAL,CAAY2E,aAApC,EAAmD;AACjDH,QAAAA,oBAAoB,CAAC5F,CAAD,EAAI,KAAKY,KAAL,CAAWsB,IAAf,CAApB;AACD;AACF;;;;EAjC6BxB,M;;AAqChC,IAAMsF,QAAQ,GAAG,SAAXA,QAAW,CAAAhG,CAAC;AAAA,SAAIA,CAAJ;AAAA,CAAlB;;AACA,IAAMiG,kBAAkB,GAAG,IAA3B;AACA,IAAMC,oBAAoB,GAAG;AAC3BC,EAAAA,OAD2B,qBACL;AAAA,QAAd/M,KAAc,uEAAN,IAAM;AACpB,WAAOA,KAAP;AACD,GAH0B;AAK3BgK,EAAAA,cAL2B,4BAKG;AAAA,QAAfhK,KAAe,uEAAP,KAAO;AAC5B,WAAOA,KAAP;AACD,GAP0B;AAS3BiM,EAAAA,gBAT2B,8BASK;AAAA,QAAfjM,KAAe,uEAAP,KAAO;AAC9B,WAAOA,KAAP;AACD,GAX0B;AAa3B8L,EAAAA,UAb2B,wBAaL;AAAA,QAAX9L,KAAW,uEAAH,CAAG;;AACpB,YAAQA,KAAR;AACE,WAAK,IAAL;AACE,eAAO,CAAC6M,kBAAD,EAAqBA,kBAArB,CAAP;;AAEF,WAAK,KAAL;AACE,eAAO,CAAC,CAAD,EAAI,CAAJ,CAAP;;AAEF;AACE,eAAOnN,CAAC,CAACsN,QAAF,CAAWhN,KAAX,CAAP;AARJ;AAUD,GAxB0B;AA0B3BiD,EAAAA,IA1B2B,gBA0BtBjD,KA1BsB,EA0Bf;AACV,QAAI,OAAOA,KAAP,KAAiB,UAArB,EAAiC,OAAOA,KAAP;AACjC,QAAIA,KAAK,IAAI,IAAb,EAAmB,OAAON,CAAC,CAACsN,QAAF,CAAWhN,KAAX,CAAP;AACpB,GA7B0B;AA+B3B4J,EAAAA,SA/B2B,qBA+BjB5J,KA/BiB,EA+BViN,EA/BU,EA+BNjF,MA/BM,EA+BE;AAC3B,QAAM4B,SAAS,GAAG5J,KAAK,IAAIgI,MAAM,CAACH,MAAP,CAAc+B,SAAzC;AACA,SAAKqB,kBAAL,GAA0B,CAAC,CAACrB,SAA5B;;AAEA,QAAIsD,OAAO,CAACC,GAAR,CAAYC,QAAZ,KAAyB,aAA7B,EAA4C;AAC1C,UAAMC,iBAAiB,GAAGzD,SAAS,IAAIgD,QAAvC;AACA,aAAO,UAAAhG,CAAC,EAAI;AACV,YAAM0G,CAAC,GAAGD,iBAAiB,CAACzG,CAAD,CAA3B;;AAEA,YAAI,CAAC2G,QAAQ,CAACD,CAAC,CAAC,CAAD,CAAF,CAAT,IAAmB,CAACC,QAAQ,CAACD,CAAC,CAAC,CAAD,CAAF,CAAhC,EAAwC;AACtCE,UAAAA,OAAO,CAACC,IAAR,wFAA6FH,CAAC,CAAC,CAAD,CAA9F,cAAqG,CAAC,CAAD,CAArG;AACD;;AAED,eAAOA,CAAP;AACD,OARD;AASD;;AAED,WAAO1D,SAAS,IAAIgD,QAApB;AACD,GAjD0B;AAmD3B9B,EAAAA,SAnD2B,qBAmDjB9K,KAnDiB,EAmDV;AACf,WAAON,CAAC,CAACsN,QAAF,CAAWhN,KAAX,EAAkB,CAAlB,CAAP;AACD;AArD0B,CAA7B;;AAyDA,IAAIkN,OAAO,CAACC,GAAR,CAAYC,QAAZ,KAAyB,aAA7B,EAA4C;AAC1CnN,EAAAA,MAAM,CAAC0G,MAAP,CAAcmG,oBAAd,EAAoC;AAClCY,IAAAA,SADkC,qBACxB1N,KADwB,EACjB;AACf,UAAIA,KAAK,KAAK+I,SAAd,EAAyB;AACvB,cAAM4E,KAAK,oEAAX;AACD;;AAED,aAAOC,GAAP;AACD,KAPiC;AASlCjB,IAAAA,aATkC,yBASpB3M,KAToB,EASb;AACnB,UAAIA,KAAK,KAAK+I,SAAd,EAAyB;AACvB,cAAM4E,KAAK,uGAAX;AACD;;AAED,aAAOC,GAAP;AACD,KAfiC;AAiBlC9D,IAAAA,OAjBkC,mBAiB1B9J,KAjB0B,EAiBnB;AACb,UAAIA,KAAK,KAAK+I,SAAd,EAAyB;AACvB,cAAM4E,KAAK,gEAAX;AACD;;AAED,aAAOC,GAAP;AACD;AAvBiC,GAApC;AA0BD;;AAED,IAAMC,yBAAyB,GAAG5M,cAAc,CAACA,cAAc,CAAC,EAAD,EAAK6L,oBAAL,CAAf,EAA2C,EAA3C,EAA+C;AAC7FhE,EAAAA,IAD6F,gBACxFgF,EADwF,EACpFb,EADoF,SAG1F;AAAA,QADDnE,IACC,SADDA,IACC;AACD,SAAK6D,aAAL,GAAqB7D,IAAI,KAAK,MAA9B;AACA,QAAI,CAAC,KAAK6D,aAAV,EAAyB,OAAO7D,IAAP;AAC1B,GAN4F;AAQ7F0C,EAAAA,MAR6F,oBAQ1E;AAAA,QAAZxL,KAAY,uEAAJ,EAAI;;AACjB,QAAI,OAAOA,KAAP,KAAiB,UAArB,EAAiC;AAC/B,aAAO,UAAAwH,KAAK;AAAA,eAAIqG,yBAAyB,CAACrC,MAA1B,CAAiCxL,KAAK,CAACwH,KAAD,CAAtC,CAAJ;AAAA,OAAZ;AACD;;AAED,QAAI,aAAaxH,KAAjB,EAAwB;AACtB,aAAO;AAAA,eAAMA,KAAK,CAAC+N,OAAZ;AAAA,OAAP;AACD;;AAED,QAAI,OAAOC,WAAP,KAAuB,UAAvB,IAAqChO,KAAK,YAAYgO,WAA1D,EAAuE;AACrE,aAAOhO,KAAP;AACD;;AAED,sBAKIA,KALJ,CACEiO,IADF;AAAA,QACEA,IADF,4BACS,CAACpF,QADV;AAAA,uBAKI7I,KALJ,CAEEkO,KAFF;AAAA,QAEEA,KAFF,6BAEUrF,QAFV;AAAA,qBAKI7I,KALJ,CAGEmO,GAHF;AAAA,QAGEA,GAHF,2BAGQ,CAACtF,QAHT;AAAA,wBAKI7I,KALJ,CAIEoO,MAJF;AAAA,QAIEA,MAJF,8BAIWvF,QAJX;AAMA,WAAO,CAAC,CAACoF,IAAD,EAAOC,KAAP,CAAD,EAAgB,CAACC,GAAD,EAAMC,MAAN,CAAhB,CAAP;AACD;AA5B4F,CAA/C,CAAhD;;AAgCA,IAAMC,YAAY,GAAG,EAArB;AACA,IAAMC,cAAc,GAAG;AACrBC,EAAAA,UAAU,EAAE;AAAA,QAACC,MAAD,uEAAU,CAAV;AAAA,WAAgB,CAACH,YAAY,GAAGG,MAAhB,EAAwB,CAAxB,CAAhB;AAAA,GADS;AAErBC,EAAAA,SAAS,EAAE;AAAA,QAACD,MAAD,uEAAU,CAAV;AAAA,WAAgB,CAAC,CAACH,YAAD,GAAgBG,MAAjB,EAAyB,CAAzB,CAAhB;AAAA,GAFU;AAGrBE,EAAAA,OAAO,EAAE;AAAA,QAACF,MAAD,uEAAU,CAAV;AAAA,WAAgB,CAAC,CAAD,EAAI,CAACH,YAAD,GAAgBG,MAApB,CAAhB;AAAA,GAHY;AAIrBG,EAAAA,SAAS,EAAE;AAAA,QAACH,MAAD,uEAAU,CAAV;AAAA,WAAgB,CAAC,CAAD,EAAIH,YAAY,GAAGG,MAAnB,CAAhB;AAAA;AAJU,CAAvB;;IAMMI,U;;;;;AACJ,wBAAqB;AAAA;;AAAA;;AAAA,uCAAN/H,IAAM;AAANA,MAAAA,IAAM;AAAA;;AACnB,uDAASA,IAAT;;AAEAhH,IAAAA,eAAe,iCAAO,QAAP,EAAiB,UAAjB,CAAf;;AAHmB;AAIpB;;;;WAED,iBAAQ;AACN;;AACA,UAAM2H,KAAK,GAAG,KAAKA,KAAnB;AACAA,MAAAA,KAAK,CAACqH,UAAN,GAAmB9F,SAAnB;AACAvB,MAAAA,KAAK,CAACsH,cAAN,GAAuB,KAAvB;AACAtH,MAAAA,KAAK,CAACuH,eAAN,GAAwB,KAAxB;AACAvH,MAAAA,KAAK,CAACwH,cAAN,GAAuB,KAAvB;AACAxH,MAAAA,KAAK,CAACyH,QAAN,GAAiB,KAAjB;AACAzH,MAAAA,KAAK,CAAC0H,KAAN,GAAc,CAAC,CAAD,EAAI,CAAJ,CAAd;AACA1H,MAAAA,KAAK,CAAC2H,GAAN,GAAY,KAAZ;AACA3H,MAAAA,KAAK,CAAC4H,QAAN,GAAiB,KAAjB;AACA5H,MAAAA,KAAK,CAAC6H,MAAN,GAAe,KAAKA,MAAL,CAAYC,IAAZ,CAAiB,IAAjB,CAAf;AACD;;;WAED,iBAAQ;AACN,UAAM9H,KAAK,GAAG,KAAKA,KAAnB;;AAEA,UAAIA,KAAK,CAACoB,OAAN,YAAyBoF,WAA7B,EAA0C;AACxC,YAAMuB,SAAS,GAAG/H,KAAK,CAACoB,OAAN,CAAc4G,qBAAd,EAAlB;;AAEA,YAAMC,UAAU,GAAGjI,KAAK,CAAClE,aAAN,CAAoBkM,qBAApB,EAAnB;AACA,YAAM5G,OAAO,GAAG;AACdqF,UAAAA,IAAI,EAAEsB,SAAS,CAACtB,IAAV,GAAiBwB,UAAU,CAACxB,IAA5B,GAAmCzG,KAAK,CAACgC,MAAN,CAAa,CAAb,CAD3B;AAEd0E,UAAAA,KAAK,EAAEqB,SAAS,CAACrB,KAAV,GAAkBuB,UAAU,CAACvB,KAA7B,GAAqC1G,KAAK,CAACgC,MAAN,CAAa,CAAb,CAF9B;AAGd2E,UAAAA,GAAG,EAAEoB,SAAS,CAACpB,GAAV,GAAgBsB,UAAU,CAACtB,GAA3B,GAAiC3G,KAAK,CAACgC,MAAN,CAAa,CAAb,CAHxB;AAId4E,UAAAA,MAAM,EAAEmB,SAAS,CAACnB,MAAV,GAAmBqB,UAAU,CAACrB,MAA9B,GAAuC5G,KAAK,CAACgC,MAAN,CAAa,CAAb;AAJjC,SAAhB;AAMAhC,QAAAA,KAAK,CAACoB,OAAN,GAAgBiF,yBAAyB,CAACrC,MAA1B,CAAiC5C,OAAjC,CAAhB;AACD;AACF;;;WAED,kBAAS;AAAA;;AACP,UAAMpB,KAAK,GAAG,KAAKA,KAAnB;AACA,UAAIA,KAAK,CAAC4H,QAAV,EAAoB;AACpB5H,MAAAA,KAAK,CAAC4H,QAAN,GAAiB,IAAjB;AACA5H,MAAAA,KAAK,CAACW,OAAN,GAAgB,KAAhB;AACAuH,MAAAA,UAAU,CAAC,YAAM;AACf,QAAA,MAAI,CAACC,OAAL;;AACA,QAAA,MAAI,CAACC,IAAL;AACD,OAHS,EAGP,CAHO,CAAV;AAID;;;WAED,qBAAY;AACV,WAAKpI,KAAL,CAAWW,OAAX,GAAqB,KAAKX,KAAL,CAAWsH,cAAX,IAA6B,KAAKtH,KAAL,CAAWuH,eAA7D;AACD;;;WAED,iBAAQ;AACN,WAAKc,YAAL;AACA,WAAKrI,KAAL,CAAWsH,cAAX,GAA4B,KAA5B;AACA,WAAKtH,KAAL,CAAWuH,eAAX,GAA6B,KAA7B;;AACA;AACD;;;WAED,qBAAYjM,KAAZ,EAAmB;AACjB,UAAMkF,MAAM,GAAG,KAAKA,MAApB;AACA,UAAMR,KAAK,GAAG,KAAKA,KAAnB;AACA,UAAI1E,KAAK,CAACwD,OAAN,IAAiB,IAAjB,KAA0BtD,KAAK,CAAC8M,OAAN,CAAc9H,MAAM,CAAC+H,cAArB,IAAuC,CAAC/H,MAAM,CAAC+H,cAAP,CAAsB5K,QAAtB,CAA+BrC,KAAK,CAACwD,OAArC,CAAxC,GAAwF0B,MAAM,CAAC+H,cAAP,KAA0B,CAAC,CAA3B,IAAgC/H,MAAM,CAAC+H,cAAP,KAA0BjN,KAAK,CAACwD,OAAlL,CAAJ,EAAgM;AAChM,WAAKiB,IAAL,CAAUyI,WAAV,CAAsBlN,KAAtB;;AAEA,UAAIkF,MAAM,CAACiI,cAAX,EAA2B;AACzBnN,QAAAA,KAAK,CAAC5B,MAAN,CAAagP,iBAAb,CAA+BpN,KAAK,CAACsC,SAArC;AACD;;AAED,UAAIoC,KAAK,CAACsH,cAAV,EAA0B;AAC1B,WAAKlN,KAAL,CAAWkB,KAAX;AACA,WAAKqN,YAAL,CAAkBrN,KAAlB;AACA0E,MAAAA,KAAK,CAACqH,UAAN,GAAmBzJ,SAAS,CAACtC,KAAD,CAA5B;AACA0E,MAAAA,KAAK,CAACsH,cAAN,GAAuB,IAAvB;AACA,WAAKrH,aAAL,CAAmBnC,aAAa,CAACxC,KAAD,CAAhC;AACA,WAAK4E,cAAL;;AAEA,UAAIM,MAAM,CAACoI,aAAX,EAA0B;AACxB,aAAKC,qBAAL,CAA2BvN,KAA3B;AACD,OAFD,MAEO,IAAIkF,MAAM,CAACsI,KAAP,GAAe,CAAnB,EAAsB;AAC3B,aAAKC,iBAAL,CAAuBzN,KAAvB;AACD,OAFM,MAEA;AACL,aAAK0N,gBAAL,CAAsB1N,KAAtB;AACD;AACF;;;WAED,0BAAiBA,KAAjB,EAAwB;AACtB,UAAM0E,KAAK,GAAG,KAAKA,KAAnB;AACAA,MAAAA,KAAK,CAACW,OAAN,GAAgB,IAAhB;AACAX,MAAAA,KAAK,CAACwH,cAAN,GAAuB,IAAvB;AACAxH,MAAAA,KAAK,CAACyH,QAAN,GAAiB,KAAjB;AACA,WAAKU,OAAL,CAAa7M,KAAb;AACA,WAAK8M,IAAL;AACD;;;WAED,qBAAY9M,KAAZ,EAAmB;AACjB,UAAM0E,KAAK,GAAG,KAAKA,KAAnB;AACA,UAAMQ,MAAM,GAAG,KAAKA,MAApB;AACA,UAAI,CAACR,KAAK,CAACsH,cAAX,EAA2B;AAC3B,UAAItH,KAAK,CAAC9D,IAAN,KAAeZ,KAAK,CAACY,IAArB,IAA6BZ,KAAK,CAACwG,SAAN,KAAoB9B,KAAK,CAAC8B,SAA3D,EAAsE;AACtE,UAAMmH,EAAE,GAAGrL,SAAS,CAACtC,KAAD,CAApB;AACA,UAAI0E,KAAK,CAACqH,UAAN,IAAoB4B,EAAE,KAAKjJ,KAAK,CAACqH,UAArC,EAAiD;;AAEjD,UAAMlF,OAAO,GAAGrE,aAAa,CAACxC,KAAD,CAA7B;;AAEA,UAAIuH,QAAQ,CAACC,kBAAT,KAAgCxH,KAAK,CAAC5B,MAA1C,EAAkD;AAChDsG,QAAAA,KAAK,CAACmB,MAAN,GAAe,CAAC7F,KAAK,CAAC4N,SAAP,EAAkB5N,KAAK,CAAC6N,SAAxB,CAAf;AACD,OAFD,MAEO;AACLnJ,QAAAA,KAAK,CAACmB,MAAN,GAAejJ,CAAC,CAACkM,GAAF,CAAMjC,OAAN,EAAenC,KAAK,CAACmC,OAArB,CAAf;AACA,aAAKlC,aAAL,CAAmBkC,OAAnB;AACD;;AAEDjK,MAAAA,CAAC,CAACiL,KAAF,CAAQnD,KAAK,CAACiB,SAAd,EAAyBjB,KAAK,CAACmB,MAA/B;AACA,WAAKgH,OAAL,CAAa7M,KAAb;;AAEA,UAAI0E,KAAK,CAACyH,QAAV,EAAoB;AAClB,aAAK5C,YAAL,CAAkBuE,MAAlB,CAAyB,WAAzB;AACApJ,QAAAA,KAAK,CAACY,MAAN,GAAe,KAAf;AACA,aAAKoI,gBAAL,CAAsB1N,KAAtB;AACA;AACD;;AAED,UAAIkF,MAAM,CAACoI,aAAP,IAAwB,CAAC5I,KAAK,CAACwH,cAAnC,EAAmD;AACjD,YAAIxH,KAAK,CAACsB,IAAV,EAAgB;AACd,cAAItB,KAAK,CAACsB,IAAN,KAAed,MAAM,CAAC6I,iBAAtB,IAA2C7I,MAAM,CAAC6I,iBAAP,KAA6B,IAA5E,EAAkF;AAChFrJ,YAAAA,KAAK,CAACW,OAAN,GAAgB,KAAhB;AACA,iBAAK6D,KAAL;AACA;AACD,WAJD,MAIO;AACL,iBAAKK,YAAL,CAAkBuE,MAAlB,CAAyB,kBAAzB;AACA,iBAAKJ,gBAAL,CAAsB1N,KAAtB;AACA;AACD;AACF,SAVD,MAUO;AACL;AACD;AACF;;AAED,WAAK8M,IAAL;AACD;;;WAED,mBAAU9M,KAAV,EAAiB;AACf,WAAKyE,IAAL,CAAUyI,WAAV,CAAsBlN,KAAtB;;AAEA,UAAI;AACF,YAAI,KAAKkF,MAAL,CAAYiI,cAAZ,IAA8BnN,KAAK,CAAC5B,MAAN,CAAa4P,iBAAb,CAA+BhO,KAAK,CAACsC,SAArC,CAAlC,EAAmF;AACjF;AACAtC,UAAAA,KAAK,CAAC5B,MAAN,CAAa6P,qBAAb,CAAmCjO,KAAK,CAACsC,SAAzC;AACD;AACF,OALD,CAKE,OAAO4L,OAAP,EAAgB;AAChB,YAAI9D,OAAO,CAACC,GAAR,CAAYC,QAAZ,KAAyB,aAA7B,EAA4C;AAC1CI,UAAAA,OAAO,CAACC,IAAR;AACD;AACF;;AAED,UAAMjG,KAAK,GAAG,KAAKA,KAAnB;AACA,UAAMQ,MAAM,GAAG,KAAKA,MAApB;AACA,UAAI,CAACR,KAAK,CAACsH,cAAX,EAA2B;AAC3B,UAAM2B,EAAE,GAAGrL,SAAS,CAACtC,KAAD,CAApB;AACA,UAAI0E,KAAK,CAACqH,UAAN,IAAoB4B,EAAE,KAAKjJ,KAAK,CAACqH,UAArC,EAAiD;AACjD,WAAKrH,KAAL,CAAWsH,cAAX,GAA4B,KAA5B;AACA,WAAKmC,SAAL;AACA,WAAKtB,OAAL,CAAa7M,KAAb;;AACA,4CAAiB0E,KAAK,CAACkB,SAAvB;AAAA,UAAOzE,EAAP;AAAA,UAAWE,EAAX;;AACAqD,MAAAA,KAAK,CAAC2H,GAAN,GAAYlL,EAAE,IAAI,CAAN,IAAWE,EAAE,IAAI,CAA7B;;AAEA,UAAIqD,KAAK,CAAC2H,GAAN,IAAanH,MAAM,CAACkJ,UAAxB,EAAoC;AAClC1J,QAAAA,KAAK,CAACc,MAAN,GAAe,IAAf;AACD,OAFD,MAEO;AACL,8CAAqBd,KAAK,CAAC0B,SAA3B;AAAA,YAAOiI,IAAP;AAAA,YAAaC,IAAb;;AACA,6CAAiB5J,KAAK,CAAC2B,QAAvB;AAAA,YAAOkI,EAAP;AAAA,YAAWC,EAAX;;AACA,6CAAiB9J,KAAK,CAAC4B,QAAvB;AAAA,YAAOmI,EAAP;AAAA,YAAWC,EAAX;;AACA,mDAAmBxJ,MAAM,CAACkH,KAAP,CAAa/F,QAAhC;AAAA,YAAOsI,GAAP;AAAA,YAAYC,GAAZ;;AACA,mDAAiB1J,MAAM,CAACkH,KAAP,CAAa3K,QAA9B;AAAA,YAAOoN,EAAP;AAAA,YAAWC,EAAX;;AACA,YAAMC,GAAG,GAAG7J,MAAM,CAACkH,KAAP,CAAa4C,QAAzB;;AAEA,YAAItK,KAAK,CAACyB,WAAN,GAAoB4I,GAAxB,EAA6B;AAC3B,cAAIrN,IAAI,CAACkG,GAAL,CAAS2G,EAAT,IAAeI,GAAf,IAAsBjN,IAAI,CAACkG,GAAL,CAAS6G,EAAT,IAAeI,EAAzC,EAA6CnK,KAAK,CAAC0H,KAAN,CAAY,CAAZ,IAAiBiC,IAAjB;AAC7C,cAAI3M,IAAI,CAACkG,GAAL,CAAS4G,EAAT,IAAeI,GAAf,IAAsBlN,IAAI,CAACkG,GAAL,CAAS8G,EAAT,IAAeI,EAAzC,EAA6CpK,KAAK,CAAC0H,KAAN,CAAY,CAAZ,IAAiBkC,IAAjB;AAC9C;AACF;;AAED,WAAKxB,IAAL;AACD;;;WAED,sBAAa9M,KAAb,EAAoB;AAClB,UAAI,CAAC,KAAK0E,KAAL,CAAW2H,GAAhB,EAAqB;AACnBrM,QAAAA,KAAK,CAACkH,cAAN;AACAlH,QAAAA,KAAK,CAACiP,eAAN;AACD;AACF;;;WAED,sBAAajP,KAAb,EAAoB;AAClB,UAAMkF,MAAM,GAAG,KAAKA,MAApB;AACA,UAAIzF,MAAM,GAAGyF,MAAM,CAACzF,MAApB;;AAEA,UAAI2K,OAAO,CAACC,GAAR,CAAYC,QAAZ,KAAyB,aAA7B,EAA4C;AAC1C,YAAI;AACF,cAAI7K,MAAM,KAAK,SAAf,EAA0B;AACxB,gBAAMe,aAAa,GAAG,QAAQR,KAAR,GAAgBA,KAAK,CAACkP,WAAN,CAAkB1O,aAAlC,GAAkDR,KAAK,CAACQ,aAA9E;AACA,gBAAM2O,KAAK,GAAGC,MAAM,CAACC,gBAAP,CAAwB7O,aAAxB,CAAd;;AAEA,gBAAI2O,KAAK,CAACG,WAAN,KAAsB,MAA1B,EAAkC;AAChC5E,cAAAA,OAAO,CAACC,IAAR,oaAAsbnK,aAAtb;AACD;AACF;AACF,SATD,CASE,OAAO+O,QAAP,EAAiB,CAAE;AACtB;;AAED,UAAIrK,MAAM,CAACsK,WAAX,EAAwB;AACtBxP,QAAAA,KAAK,CAACQ,aAAN,CAAoBiP,kBAApB;AACD;;AAED,UAAI,CAACvK,MAAM,CAACiI,cAAZ,EAA4B;AAC1B,aAAK7D,UAAL,CAAgBM,GAAhB,CAAoB,KAAK8F,YAAL,CAAkBN,MAAtC,EAA8C3P,MAA9C,EAAsD,QAAtD,EAAgE,KAAKkQ,WAAL,CAAiBnD,IAAjB,CAAsB,IAAtB,CAAhE;AACA,aAAKlD,UAAL,CAAgBM,GAAhB,CAAoB,KAAK8F,YAAL,CAAkBN,MAAtC,EAA8C3P,MAA9C,EAAsD,KAAtD,EAA6D,KAAKmQ,SAAL,CAAepD,IAAf,CAAoB,IAApB,CAA7D;AACD;AACF;;;WAED,wBAAe;AACb,UAAI,KAAKtH,MAAL,CAAYsK,WAAZ,IAA2BjI,QAAQ,CAACC,kBAAT,KAAgC,KAAK9C,KAAL,CAAWlE,aAA1E,EAAyF;AACvF+G,QAAAA,QAAQ,CAACsI,eAAT;AACD;AACF;;;WAED,uBAAc7P,KAAd,EAAqB;AACnB,UAAI,KAAK0E,KAAL,CAAWwH,cAAX,IAA6BlM,KAAK,CAACmH,UAAvC,EAAmD;AACjDnH,QAAAA,KAAK,CAACkH,cAAN;AACD;AACF;;;WAED,+BAAsBlH,KAAtB,EAA6B;AAC3B8P,MAAAA,YAAY,CAAC9P,KAAD,CAAZ;AACA,WAAKsJ,UAAL,CAAgBM,GAAhB,CAAoB,KAAK8F,YAAL,CAAkBN,MAAtC,EAA8C,OAA9C,EAAuD,QAAvD,EAAiE,KAAK9B,aAAL,CAAmBd,IAAnB,CAAwB,IAAxB,CAAjE,EAAgG;AAC9FuD,QAAAA,OAAO,EAAE;AADqF,OAAhG;AAGA,WAAKzG,UAAL,CAAgBM,GAAhB,CAAoB,KAAK8F,YAAL,CAAkBN,MAAtC,EAA8C,OAA9C,EAAuD,KAAvD,EAA8D,KAAKlG,KAAL,CAAWsD,IAAX,CAAgB,IAAhB,CAA9D,EAAqF;AACnFuD,QAAAA,OAAO,EAAE;AAD0E,OAArF;AAGA,WAAKzG,UAAL,CAAgBM,GAAhB,CAAoB,KAAK8F,YAAL,CAAkBN,MAAtC,EAA8C,OAA9C,EAAuD,QAAvD,EAAiE,KAAKlG,KAAL,CAAWsD,IAAX,CAAgB,IAAhB,CAAjE,EAAwF;AACtFuD,QAAAA,OAAO,EAAE;AAD6E,OAAxF;AAGA,WAAKxG,YAAL,CAAkBK,GAAlB,CAAsB,kBAAtB,EAA0C,KAAK8D,gBAAL,CAAsBlB,IAAtB,CAA2B,IAA3B,CAA1C,EAA4E,KAAKtH,MAAL,CAAYoI,aAAxF,EAAuGtN,KAAvG;AACD;;;WAED,2BAAkBA,KAAlB,EAAyB;AACvB,WAAK0E,KAAL,CAAWyH,QAAX,GAAsB,IAAtB;AACA,WAAK5C,YAAL,CAAkBK,GAAlB,CAAsB,WAAtB,EAAmC,KAAK8D,gBAAL,CAAsBlB,IAAtB,CAA2B,IAA3B,CAAnC,EAAqE,KAAKtH,MAAL,CAAYsI,KAAjF,EAAwFxN,KAAxF;AACD;;;WAED,iBAAQA,KAAR,EAAe;AACb,UAAMgQ,OAAO,GAAGxE,cAAc,CAACxL,KAAK,CAAC/C,GAAP,CAA9B;;AAEA,UAAI+S,OAAJ,EAAa;AACX,YAAMtL,KAAK,GAAG,KAAKA,KAAnB;AACA,YAAMgH,MAAM,GAAG1L,KAAK,CAACyD,QAAN,GAAiB,EAAjB,GAAsBzD,KAAK,CAAC0D,MAAN,GAAe,GAAf,GAAqB,CAA1D;AACAgB,QAAAA,KAAK,CAACmB,MAAN,GAAemK,OAAO,CAACtE,MAAD,CAAtB;AACA,aAAK5M,KAAL,CAAWkB,KAAX;AACA0E,QAAAA,KAAK,CAACuH,eAAN,GAAwB,IAAxB;AACArP,QAAAA,CAAC,CAACiL,KAAF,CAAQnD,KAAK,CAACiB,SAAd,EAAyBjB,KAAK,CAACmB,MAA/B;AACA,aAAKgH,OAAL,CAAa7M,KAAb;AACA,aAAK8M,IAAL;AACD;AACF;;;WAED,eAAM9M,KAAN,EAAa;AACX,UAAI,EAAEA,KAAK,CAAC/C,GAAN,IAAauO,cAAf,CAAJ,EAAoC;AACpC,WAAK9G,KAAL,CAAWuH,eAAX,GAA6B,KAA7B;AACA,WAAKkC,SAAL;AACA,WAAKtB,OAAL,CAAa7M,KAAb;AACA,WAAK8M,IAAL;AACD;;;WAED,cAAKmD,YAAL,EAAmB;AACjB,UAAMxQ,MAAM,GAAG,KAAKyF,MAAL,CAAYzF,MAA3B;AACAwQ,MAAAA,YAAY,CAACxQ,MAAD,EAAS,OAAT,EAAkB,KAAKyQ,WAAL,CAAiB1D,IAAjB,CAAsB,IAAtB,CAAlB,CAAZ;;AAEA,UAAI,KAAKtH,MAAL,CAAYiI,cAAhB,EAAgC;AAC9B8C,QAAAA,YAAY,CAACxQ,MAAD,EAAS,QAAT,EAAmB,KAAKkQ,WAAL,CAAiBnD,IAAjB,CAAsB,IAAtB,CAAnB,CAAZ;AACAyD,QAAAA,YAAY,CAACxQ,MAAD,EAAS,KAAT,EAAgB,KAAKmQ,SAAL,CAAepD,IAAf,CAAoB,IAApB,CAAhB,CAAZ;AACAyD,QAAAA,YAAY,CAACxQ,MAAD,EAAS,QAAT,EAAmB,KAAKmQ,SAAL,CAAepD,IAAf,CAAoB,IAApB,CAAnB,CAAZ;AACD;;AAEDyD,MAAAA,YAAY,CAAC,KAAD,EAAQ,MAAR,EAAgB,KAAKE,OAAL,CAAa3D,IAAb,CAAkB,IAAlB,CAAhB,CAAZ;AACAyD,MAAAA,YAAY,CAAC,KAAD,EAAQ,IAAR,EAAc,KAAKG,KAAL,CAAW5D,IAAX,CAAgB,IAAhB,CAAd,CAAZ;;AAEA,UAAI,KAAKtH,MAAL,CAAYkJ,UAAhB,EAA4B;AAC1B6B,QAAAA,YAAY,CAAC,OAAD,EAAU,EAAV,EAAc,KAAKI,YAAL,CAAkB7D,IAAlB,CAAuB,IAAvB,CAAd,EAA4C;AACtD7M,UAAAA,OAAO,EAAE;AAD6C,SAA5C,CAAZ;AAGD;AACF;;;;EApSsBgK,iB;;AAwSzB,SAASmG,YAAT,CAAsB9P,KAAtB,EAA6B;AAC3B,eAAaA,KAAb,IAAsB,OAAOA,KAAK,CAACsQ,OAAb,KAAyB,UAA/C,IAA6DtQ,KAAK,CAACsQ,OAAN,EAA7D;AACD;;AAED,IAAMC,SAAS,GAAG,OAAOnB,MAAP,KAAkB,WAAlB,IAAiCA,MAAM,CAAC7H,QAAxC,IAAoD6H,MAAM,CAAC7H,QAAP,CAAgBiJ,aAAtF;;AAEA,SAASC,mBAAT,GAA+B;AAC7B,SAAOF,SAAS,IAAI,kBAAkBnB,MAAtC;AACD;;AAED,SAASsB,aAAT,GAAyB;AACvB,SAAOD,mBAAmB,MAAMF,SAAS,IAAInB,MAAM,CAACuB,SAAP,CAAiBC,cAAjB,GAAkC,CAA/E;AACD;;AAED,SAASC,qBAAT,GAAiC;AAC/B,SAAON,SAAS,IAAI,mBAAmBnB,MAAvC;AACD;;AAED,SAAS0B,mBAAT,GAA+B;AAC7B,SAAOP,SAAS,IAAI,qBAAqBnB,MAAM,CAAC7H,QAAhD;AACD;;AAED,SAASwJ,qBAAT,GAAiC;AAC/B,MAAI;AACF,WAAO,iBAAiBC,YAAxB;AACD,GAFD,CAEE,OAAO3Q,CAAP,EAAU;AACV,WAAO,KAAP;AACD;AACF;;AAED,IAAM4Q,OAAO,GAAG;AACdV,EAAAA,SAAS,EAATA,SADc;AAEdpR,EAAAA,OAAO,EAAE4R,qBAAqB,EAFhB;AAGd7R,EAAAA,KAAK,EAAEuR,mBAAmB,EAHZ;AAIdS,EAAAA,WAAW,EAAER,aAAa,EAJZ;AAKd7R,EAAAA,OAAO,EAAEgS,qBAAqB,EALhB;AAMdrB,EAAAA,WAAW,EAAEsB,mBAAmB;AANlB,CAAhB;AASA,IAAMK,4BAA4B,GAAG,GAArC;AACA,IAAMC,kBAAkB,GAAG,GAA3B;AACA,IAAMC,sBAAsB,GAAG,GAA/B;AACA,IAAMC,sBAAsB,GAAG,EAA/B;AACA,IAAMC,sBAAsB,GAAG,GAA/B;;AACA,IAAMC,kBAAkB,GAAGrT,cAAc,CAACA,cAAc,CAAC,EAAD,EAAK4M,yBAAL,CAAf,EAAgD,EAAhD,EAAoD;AAC3FyE,EAAAA,WAD2F,uBAC/ExE,EAD+E,EAC3Eb,EAD2E,SAMxF;AAAA,8BAJDtL,OAIC;AAAA,+CADG,EACH;AAAA,2CAHC4S,IAGD;AAAA,QAHCA,IAGD,mCAHQ,KAGR;AAAA,4CAFCvS,KAED;AAAA,QAFCA,KAED,oCAFS,KAET;AACD,SAAKwS,QAAL,GAAgBT,OAAO,CAAC/R,KAAR,IAAiBA,KAAjC;AACA,WAAO+R,OAAO,CAACzB,WAAR,IAAuBiC,IAA9B;AACD,GAT0F;AAW3FhS,EAAAA,MAX2F,kBAWpFuL,EAXoF,EAWhFb,EAXgF,EAW5E;AACb,QAAI,KAAKuH,QAAT,EAAmB,OAAO,OAAP;AACnB,QAAI,KAAKlC,WAAT,EAAsB,OAAO,OAAP;AACtB,QAAIyB,OAAO,CAACpS,OAAZ,EAAqB,OAAO,SAAP;AACrB,QAAIoS,OAAO,CAAC/R,KAAZ,EAAmB,OAAO,OAAP;AACnB,WAAO,OAAP;AACD,GAjB0F;AAmB3FoO,EAAAA,aAnB2F,2BAqBxF;AAAA,QAFWpQ,KAEX,uEAFmB,KAEnB;;AAAA,QAF0BiN,EAE1B;;AAAA;AAAA,sCADD4D,iBACC;AAAA,QADDA,iBACC,sCADmB,GACnB;;AACD,QAAIA,iBAAJ,EAAuB,KAAKA,iBAAL,GAAyBA,iBAAzB;AACvB,QAAI,CAACkD,OAAO,CAACC,WAAb,EAA0B,OAAO,KAAP;AAC1B,QAAI,OAAOhU,KAAP,KAAiB,QAArB,EAA+B,OAAOA,KAAP;AAC/B,WAAOA,KAAK,GAAGiU,4BAAH,GAAkC,KAA9C;AACD,GA1B0F;AA4B3FhE,EAAAA,cA5B2F,0BA4B5EnC,EA5B4E,EA4BxEb,EA5BwE,SAiCxF;AAAA,8BAJDtL,OAIC;AAAA,+CADG,EACH;AAAA,8CAHCc,OAGD;AAAA,QAHCA,OAGD,sCAHW,IAGX;AAAA,8CAFC6D,OAED;AAAA,QAFCA,OAED,sCAFW,CAEX;AACD,SAAKyJ,cAAL,GAAsBzJ,OAAtB;AACA,WAAO,CAAC,KAAKgM,WAAN,IAAqB,KAAK/P,MAAL,KAAgB,SAArC,IAAkDE,OAAzD;AACD,GApC0F;AAsC3FqI,EAAAA,SAtC2F,qBAsCjF9K,KAtCiF,EAsC1EiN,EAtC0E,SAyCxF;AAAA,iCAFDiE,UAEC;AAAA,QAFDA,UAEC,iCAFY,KAEZ;AAAA,2BADDpI,IACC;AAAA,QADDA,IACC,2BADMC,SACN;AACD,QAAM+B,SAAS,GAAGpL,CAAC,CAACsN,QAAF,CAAWhN,KAAX,EAAkBkR,UAAU,GAAG,CAAH,GAAOpI,IAAI,GAAG,CAAH,GAAO,CAA9C,CAAlB;AACA,SAAKoI,UAAL,GAAkBA,UAAlB;AACA,WAAOpG,SAAP;AACD,GA7C0F;AA+C3FoE,EAAAA,KA/C2F,mBAmDnF;AAAA,qFAAJ,EAAI;AAAA,iCAHN/F,QAGM;AAAA,QAHNA,QAGM,gCAHKgL,sBAGL;AAAA,iCAFN5P,QAEM;AAAA,QAFNA,QAEM,gCAFK6P,sBAEL;AAAA,iCADNtC,QACM;AAAA,QADNA,QACM,gCADKuC,sBACL;;AACN,WAAO;AACLlL,MAAAA,QAAQ,EAAE,KAAKS,SAAL,CAAelK,CAAC,CAACsN,QAAF,CAAW7D,QAAX,CAAf,CADL;AAEL5E,MAAAA,QAAQ,EAAE,KAAKqF,SAAL,CAAelK,CAAC,CAACsN,QAAF,CAAWzI,QAAX,CAAf,CAFL;AAGLuN,MAAAA,QAAQ,EAARA;AAHK,KAAP;AAKD,GAzD0F;AA2D3FxB,EAAAA,KA3D2F,mBA2D1E;AAAA,QAAXtQ,KAAW,uEAAH,CAAG;;AACf,YAAQA,KAAR;AACE,WAAK,IAAL;AACE,eAAOkU,kBAAP;;AAEF,WAAK,KAAL;AACE,eAAO,CAAP;;AAEF;AACE,eAAOlU,KAAP;AARJ;AAUD;AAtE0F,CAApD,CAAzC;;AA0EA,IAAIkN,OAAO,CAACC,GAAR,CAAYC,QAAZ,KAAyB,aAA7B,EAA4C;AAC1CnN,EAAAA,MAAM,CAAC0G,MAAP,CAAc2N,kBAAd,EAAkC;AAChCE,IAAAA,QADgC,oBACvBxU,KADuB,EAChB;AACd,UAAIA,KAAK,KAAK+I,SAAd,EAAyB;AACvB,cAAM4E,KAAK,uHAAX;AACD;;AAED,aAAOC,GAAP;AACD,KAP+B;AAShC6G,IAAAA,iCATgC,6CASEzU,KATF,EASS;AACvC,UAAIA,KAAK,KAAK+I,SAAd,EAAyB;AACvB,cAAM4E,KAAK,mGAAX;AACD;;AAED,aAAOC,GAAP;AACD,KAf+B;AAiBhC8G,IAAAA,aAjBgC,yBAiBlB1U,KAjBkB,EAiBX;AACnB,UAAIA,KAAK,KAAK+I,SAAd,EAAyB;AACvB,cAAM4E,KAAK,6HAAX;AACD;;AAED,aAAOC,GAAP;AACD,KAvB+B;AAyBhC+G,IAAAA,aAzBgC,yBAyBlB3U,KAzBkB,EAyBX;AACnB,UAAIA,KAAK,KAAK+I,SAAd,EAAyB;AACvB,cAAM4E,KAAK,4HAAX;AACD;;AAED,aAAOC,GAAP;AACD,KA/B+B;AAiChCgH,IAAAA,aAjCgC,yBAiClB5U,KAjCkB,EAiCX;AACnB,UAAIA,KAAK,KAAK+I,SAAd,EAAyB;AACvB,cAAM4E,KAAK,6HAAX;AACD;;AAED,aAAOC,GAAP;AACD;AAvC+B,GAAlC;AA0CD;;AAED,IAAMiH,4BAA4B,GAAG,EAArC;AACA,IAAMC,iBAAiB,GAAG,EAA1B;;IACMC,W;;;;;AACJ,yBAAqB;AAAA;;AAAA;;AAAA,uCAANlO,IAAM;AAANA,MAAAA,IAAM;AAAA;;AACnB,uDAASA,IAAT;;AAEAhH,IAAAA,eAAe,iCAAO,QAAP,EAAiB,UAAjB,CAAf;;AAEAA,IAAAA,eAAe,iCAAO,UAAP,EAAmB,IAAnB,CAAf;;AALmB;AAMpB;;;;WAED,gBAAO;AACL,WAAK2H,KAAL,CAAWgC,MAAX,GAAoB,CAAC,CAAD,EAAI,CAAJ,CAApB;AACA,WAAKhC,KAAL,CAAW+B,UAAX,GAAwB,CAAC,CAAD,EAAI,CAAJ,CAAxB;AACA,WAAK/B,KAAL,CAAWwN,cAAX,GAA4B,IAAIC,GAAJ,EAA5B;AACD;;;WAED,iBAAQ;AACN;;AACA,UAAMzN,KAAK,GAAG,KAAKA,KAAnB;AACAA,MAAAA,KAAK,CAAC0N,SAAN,GAAkB,EAAlB;AACA1N,MAAAA,KAAK,CAAC4H,QAAN,GAAiB,KAAjB;AACA5H,MAAAA,KAAK,CAAC6H,MAAN,GAAe,KAAKA,MAAL,CAAYC,IAAZ,CAAiB,IAAjB,CAAf;AACA9H,MAAAA,KAAK,CAAC2N,KAAN,GAAc,CAAd;AACD;;;WAED,yBAAgB;AACd,wBAII,KAAK3N,KAJT;AAAA,UACE9D,IADF,eACEA,IADF;AAAA,UAEE0F,QAFF,eAEEA,QAFF;AAAA,UAGEG,UAHF,eAGEA,UAHF;;AAMA,UAAI7F,IAAI,KAAK,OAAb,EAAsB;AACpB,aAAK8D,KAAL,CAAWgC,MAAX,GAAoB9J,CAAC,CAACgN,GAAF,CAAMtD,QAAN,EAAgBG,UAAhB,CAApB;AACD,OAFD,MAEO;AACL,aAAK/B,KAAL,CAAWgC,MAAX,GAAoB,CAAC,CAAC,IAAIJ,QAAQ,CAAC,CAAD,CAAb,IAAoBG,UAAU,CAAC,CAAD,CAA/B,EAAoCH,QAAQ,CAAC,CAAD,CAAR,GAAcG,UAAU,CAAC,CAAD,CAA5D,CAApB;AACD;AACF;;;WAED,2BAAkB;AAChB,yBAGI,KAAK/B,KAHT;AAAA,UACEgC,MADF,gBACEA,MADF;AAAA,UAEED,UAFF,gBAEEA,UAFF;AAIA,WAAK/B,KAAL,CAAW4B,QAAX,GAAsB,CAACI,MAAM,CAAC,CAAD,CAAN,GAAYD,UAAU,CAAC,CAAD,CAAvB,EAA4BC,MAAM,CAAC,CAAD,CAAN,GAAYD,UAAU,CAAC,CAAD,CAAlD,CAAtB;AACD;;;WAED,gBAAO3C,CAAP,EAAU;AACR,UAAMY,KAAK,GAAG,KAAKA,KAAnB;;AAEA,UAAI,CAACA,KAAK,CAACsB,IAAX,EAAiB;AACf,YAAMsM,sBAAsB,GAAG5Q,IAAI,CAACkG,GAAL,CAAS9D,CAAC,CAAC,CAAD,CAAV,IAAiBiO,4BAAjB,GAAgDrQ,IAAI,CAACkG,GAAL,CAAS9D,CAAC,CAAC,CAAD,CAAV,CAA/E;AACA,YAAIwO,sBAAsB,GAAG,CAA7B,EAAgC5N,KAAK,CAACsB,IAAN,GAAa,OAAb,CAAhC,KAA0D,IAAIsM,sBAAsB,GAAG,CAA7B,EAAgC5N,KAAK,CAACsB,IAAN,GAAa,OAAb;AAC3F;;AAED,UAAI,KAAKd,MAAL,CAAY2E,aAAhB,EAA+B;AAC7B,YAAInF,KAAK,CAACsB,IAAN,KAAe,OAAnB,EAA4BlC,CAAC,CAAC,CAAD,CAAD,GAAO,CAAP,CAA5B,KAA0C,IAAIY,KAAK,CAACsB,IAAN,KAAe,OAAnB,EAA4BlC,CAAC,CAAC,CAAD,CAAD,GAAO,CAAP;AACvE;AACF;;;WAED,kBAAS;AAAA;;AACP,UAAMY,KAAK,GAAG,KAAKA,KAAnB;AACA,UAAIA,KAAK,CAAC4H,QAAV,EAAoB;AACpBM,MAAAA,UAAU,CAAC,YAAM;AACflI,QAAAA,KAAK,CAAC4H,QAAN,GAAiB,IAAjB;AACA5H,QAAAA,KAAK,CAACW,OAAN,GAAgB,KAAhB;;AACA,QAAA,MAAI,CAACwH,OAAL;;AACA,QAAA,MAAI,CAACC,IAAL;AACD,OALS,EAKP,CALO,CAAV;AAMD;;;WAED,oBAAW9M,KAAX,EAAkB;AAChB,WAAKyE,IAAL,CAAUyI,WAAV,CAAsBlN,KAAtB;AACA,UAAM0E,KAAK,GAAG,KAAKA,KAAnB;AACA,UAAM6N,YAAY,GAAG,KAAK9N,IAAL,CAAUzC,QAA/B;;AAEA,UAAI0C,KAAK,CAACW,OAAV,EAAmB;AACjB,YAAIX,KAAK,CAAC0N,SAAN,CAAgBI,KAAhB,CAAsB,UAAA7E,EAAE;AAAA,iBAAI4E,YAAY,CAACE,GAAb,CAAiB9E,EAAjB,CAAJ;AAAA,SAAxB,CAAJ,EAAuD;AACxD;;AAED,UAAI4E,YAAY,CAAClL,IAAb,GAAoB,CAAxB,EAA2B;AAC3B,WAAKvI,KAAL,CAAWkB,KAAX;AACA0E,MAAAA,KAAK,CAAC0N,SAAN,GAAkBlS,KAAK,CAACC,IAAN,CAAWoS,YAAX,EAAyBhT,KAAzB,CAA+B,CAA/B,EAAkC,CAAlC,CAAlB;AACA,UAAMgE,OAAO,GAAGpB,kBAAkB,CAACnC,KAAD,EAAQ0E,KAAK,CAAC0N,SAAd,CAAlC;AACA,WAAKM,UAAL,CAAgB1S,KAAhB,EAAuBuD,OAAvB;AACD;;;WAED,sBAAavD,KAAb,EAAoB;AAClB,UAAIA,KAAK,CAACwD,OAAN,IAAiB,IAAjB,IAAyBxD,KAAK,CAACwD,OAAN,GAAgB,CAAhB,KAAsB,CAAnD,EAAsD;AACtD,WAAKiB,IAAL,CAAUyI,WAAV,CAAsBlN,KAAtB;AACAA,MAAAA,KAAK,CAAC5B,MAAN,CAAagP,iBAAb,CAA+BpN,KAAK,CAACsC,SAArC;AACA,UAAMoC,KAAK,GAAG,KAAKA,KAAnB;AACA,UAAMwN,cAAc,GAAGxN,KAAK,CAACwN,cAA7B;AACA,UAAMS,cAAc,GAAG,KAAKlO,IAAL,CAAU2C,UAAjC;;AAEA,UAAI1C,KAAK,CAACW,OAAV,EAAmB;AACjB,YAAInF,KAAK,CAACC,IAAN,CAAW+R,cAAc,CAACvU,IAAf,EAAX,EAAkC6U,KAAlC,CAAwC,UAAA7E,EAAE;AAAA,iBAAIgF,cAAc,CAACF,GAAf,CAAmB9E,EAAnB,CAAJ;AAAA,SAA1C,CAAJ,EAA2E;AAC5E;;AAED,UAAIuE,cAAc,CAAC7K,IAAf,GAAsB,CAA1B,EAA6B;AAC3B6K,QAAAA,cAAc,CAACU,GAAf,CAAmB5S,KAAK,CAACsC,SAAzB,EAAoCtC,KAApC;AACD;;AAED,UAAI0E,KAAK,CAACwN,cAAN,CAAqB7K,IAArB,GAA4B,CAAhC,EAAmC;AACnC,WAAKvI,KAAL,CAAWkB,KAAX;AACA,UAAMuD,OAAO,GAAGvC,aAAa,MAAb,4BAAiBd,KAAK,CAACC,IAAN,CAAW+R,cAAc,CAACtL,MAAf,EAAX,CAAjB,EAAhB;AACA,WAAK8L,UAAL,CAAgB1S,KAAhB,EAAuBuD,OAAvB;AACD;;;WAED,oBAAWvD,KAAX,EAAkBuD,OAAlB,EAA2B;AACzB,UAAMmB,KAAK,GAAG,KAAKA,KAAnB;AACAA,MAAAA,KAAK,CAAC3C,MAAN,GAAewB,OAAO,CAACxB,MAAvB;AACA,WAAK4C,aAAL,CAAmB,CAACpB,OAAO,CAAC9B,QAAT,EAAmB8B,OAAO,CAAC3B,KAA3B,CAAnB;AACA,WAAKgD,cAAL;AACA,WAAKiI,OAAL,CAAa7M,KAAb;AACA,WAAK8M,IAAL;AACD;;;WAED,mBAAU9M,KAAV,EAAiB;AACf,UAAI,CAAC,KAAK0E,KAAL,CAAWW,OAAhB,EAAyB;AACzB,UAAM9B,OAAO,GAAGpB,kBAAkB,CAACnC,KAAD,EAAQ,KAAK0E,KAAL,CAAW0N,SAAnB,CAAlC;AACA,WAAKS,SAAL,CAAe7S,KAAf,EAAsBuD,OAAtB;AACD;;;WAED,qBAAYvD,KAAZ,EAAmB;AACjB,UAAMkS,cAAc,GAAG,KAAKxN,KAAL,CAAWwN,cAAlC;;AAEA,UAAIA,cAAc,CAACO,GAAf,CAAmBzS,KAAK,CAACsC,SAAzB,CAAJ,EAAyC;AACvC4P,QAAAA,cAAc,CAACU,GAAf,CAAmB5S,KAAK,CAACsC,SAAzB,EAAoCtC,KAApC;AACD;;AAED,UAAI,CAAC,KAAK0E,KAAL,CAAWW,OAAhB,EAAyB;AACzB,UAAM9B,OAAO,GAAGvC,aAAa,MAAb,4BAAiBd,KAAK,CAACC,IAAN,CAAW+R,cAAc,CAACtL,MAAf,EAAX,CAAjB,EAAhB;AACA,WAAKiM,SAAL,CAAe7S,KAAf,EAAsBuD,OAAtB;AACD;;;WAED,mBAAUvD,KAAV,EAAiBuD,OAAjB,EAA0B;AACxB,UAAMmB,KAAK,GAAG,KAAKA,KAAnB;AACA,UAAMoO,MAAM,GAAGpO,KAAK,CAACmC,OAAN,CAAc,CAAd,CAAf;AACA,UAAMkM,OAAO,GAAGxP,OAAO,CAAC3B,KAAR,GAAgBkR,MAAhC;AACA,UAAIE,WAAW,GAAG,CAAlB;AACA,UAAItR,IAAI,CAACkG,GAAL,CAASmL,OAAT,IAAoB,GAAxB,EAA6BC,WAAW,IAAItR,IAAI,CAAC0G,IAAL,CAAU2K,OAAV,CAAf;AAC7B,WAAKpO,aAAL,CAAmB,CAACpB,OAAO,CAAC9B,QAAT,EAAmB8B,OAAO,CAAC3B,KAAR,GAAgB,MAAMoR,WAAzC,CAAnB;AACAtO,MAAAA,KAAK,CAAC3C,MAAN,GAAewB,OAAO,CAACxB,MAAvB;AACA2C,MAAAA,KAAK,CAAC2N,KAAN,GAAcW,WAAd;AACAtO,MAAAA,KAAK,CAACiB,SAAN,GAAkB,CAACjB,KAAK,CAACmC,OAAN,CAAc,CAAd,IAAmBnC,KAAK,CAACqC,QAAN,CAAe,CAAf,CAAnB,GAAuC,CAAxC,EAA2CrC,KAAK,CAACmC,OAAN,CAAc,CAAd,IAAmBnC,KAAK,CAACqC,QAAN,CAAe,CAAf,CAA9D,CAAlB;AACA,WAAK8F,OAAL,CAAa7M,KAAb;AACA,WAAK8M,IAAL;AACD;;;WAED,kBAAS9M,KAAT,EAAgB;AAAA;;AACd,WAAKyE,IAAL,CAAUyI,WAAV,CAAsBlN,KAAtB;AACA,UAAI,CAAC,KAAK0E,KAAL,CAAWW,OAAhB,EAAyB;;AAEzB,UAAI,KAAKX,KAAL,CAAW0N,SAAX,CAAqBa,IAArB,CAA0B,UAAAtF,EAAE;AAAA,eAAI,CAAC,MAAI,CAAClJ,IAAL,CAAUzC,QAAV,CAAmByQ,GAAnB,CAAuB9E,EAAvB,CAAL;AAAA,OAA5B,CAAJ,EAAkE;AAChE,aAAKjJ,KAAL,CAAWW,OAAX,GAAqB,KAArB;AACA,aAAKwH,OAAL,CAAa7M,KAAb;AACA,aAAK8M,IAAL;AACD;AACF;;;WAED,oBAAW9M,KAAX,EAAkB;AAChB,UAAM0E,KAAK,GAAG,KAAKA,KAAnB;AACA,WAAKD,IAAL,CAAUyI,WAAV,CAAsBlN,KAAtB;;AAEA,UAAI;AACFA,QAAAA,KAAK,CAAC5B,MAAN,CAAa6P,qBAAb,CAAmCjO,KAAK,CAACsC,SAAzC;AACD,OAFD,CAEE,OAAO4L,OAAP,EAAgB,CAAE;;AAEpB,UAAIxJ,KAAK,CAACwN,cAAN,CAAqBO,GAArB,CAAyBzS,KAAK,CAACsC,SAA/B,CAAJ,EAA+C;AAC7CoC,QAAAA,KAAK,CAACwN,cAAN,CAAqBgB,MAArB,CAA4BlT,KAAK,CAACsC,SAAlC;AACD;;AAED,UAAI,CAACoC,KAAK,CAACW,OAAX,EAAoB;;AAEpB,UAAIX,KAAK,CAACwN,cAAN,CAAqB7K,IAArB,GAA4B,CAAhC,EAAmC;AACjC3C,QAAAA,KAAK,CAACW,OAAN,GAAgB,KAAhB;AACA,aAAKwH,OAAL,CAAa7M,KAAb;AACA,aAAK8M,IAAL;AACD;AACF;;;WAED,sBAAa9M,KAAb,EAAoB;AAClB,UAAIA,KAAK,CAACmH,UAAV,EAAsBnH,KAAK,CAACkH,cAAN;AACtB,UAAMxC,KAAK,GAAG,KAAKA,KAAnB;AACA,UAAIA,KAAK,CAACW,OAAV,EAAmB;AACnB,WAAKvG,KAAL,CAAWkB,KAAX;AACA,WAAK2E,aAAL,CAAmB,CAAC3E,KAAK,CAACmT,KAAP,EAAcnT,KAAK,CAACoT,QAApB,CAAnB;AACA1O,MAAAA,KAAK,CAAC3C,MAAN,GAAe,CAAC/B,KAAK,CAACoB,OAAP,EAAgBpB,KAAK,CAACsB,OAAtB,CAAf;AACA,WAAKuL,OAAL,CAAa7M,KAAb;AACA,WAAK8M,IAAL;AACD;;;WAED,qBAAY9M,KAAZ,EAAmB;AACjB,UAAIA,KAAK,CAACmH,UAAV,EAAsBnH,KAAK,CAACkH,cAAN;AACtB,UAAI,CAAC,KAAKxC,KAAL,CAAWW,OAAhB,EAAyB;AACzB,UAAMX,KAAK,GAAG,KAAKA,KAAnB;AACA,WAAKC,aAAL,CAAmB,CAAC3E,KAAK,CAACmT,KAAP,EAAcnT,KAAK,CAACoT,QAApB,CAAnB;AACA1O,MAAAA,KAAK,CAAC3C,MAAN,GAAe,CAAC/B,KAAK,CAACoB,OAAP,EAAgBpB,KAAK,CAACsB,OAAtB,CAAf;AACA,UAAM+R,iBAAiB,GAAG3O,KAAK,CAACiB,SAAhC;AACAjB,MAAAA,KAAK,CAACiB,SAAN,GAAkB,CAAC3F,KAAK,CAACmT,KAAN,GAAc,CAAf,EAAkBnT,KAAK,CAACoT,QAAxB,CAAlB;AACA1O,MAAAA,KAAK,CAACmB,MAAN,GAAejJ,CAAC,CAACkM,GAAF,CAAMpE,KAAK,CAACiB,SAAZ,EAAuB0N,iBAAvB,CAAf;AACA,WAAKxG,OAAL,CAAa7M,KAAb;AACA,WAAK8M,IAAL;AACD;;;WAED,oBAAW9M,KAAX,EAAkB;AAChB,UAAI,CAAC,KAAK0E,KAAL,CAAWW,OAAhB,EAAyB;AACzB,WAAKX,KAAL,CAAWW,OAAX,GAAqB,KAArB;AACA,WAAKwH,OAAL,CAAa7M,KAAb;AACA,WAAK8M,IAAL;AACD;;;WAED,eAAM9M,KAAN,EAAa;AACX,UAAI,CAACA,KAAK,CAAC4D,OAAX,EAAoB;AACpB,UAAI,CAAC,KAAKc,KAAL,CAAWW,OAAhB,EAAyB,KAAKiO,UAAL,CAAgBtT,KAAhB,EAAzB,KAAqD,KAAKuT,WAAL,CAAiBvT,KAAjB;AACrD,WAAKuJ,YAAL,CAAkBK,GAAlB,CAAsB,UAAtB,EAAkC,KAAK4J,QAAL,CAAchH,IAAd,CAAmB,IAAnB,CAAlC;AACD;;;WAED,oBAAWxM,KAAX,EAAkB;AAChB,WAAKlB,KAAL,CAAWkB,KAAX;AACA,WAAKuT,WAAL,CAAiBvT,KAAjB;AACD;;;WAED,qBAAYA,KAAZ,EAAmB;AACjB,UAAMyT,KAAK,IAAI,QAAQzT,KAAZ,CAAX;;AAEA,UAAI,CAACyT,KAAL,EAAY;AACV,YAAIzT,KAAK,CAACmH,UAAV,EAAsB;AACpBnH,UAAAA,KAAK,CAACkH,cAAN;AACD;;AAED,YAAIkD,OAAO,CAACC,GAAR,CAAYC,QAAZ,KAAyB,aAAzB,IAA0C,CAACtK,KAAK,CAAC0T,gBAArD,EAAuE;AACrEhJ,UAAAA,OAAO,CAACC,IAAR;AACD;AACF;;AAED,UAAMjG,KAAK,GAAG,KAAKA,KAAnB;AACAA,MAAAA,KAAK,CAACmB,MAAN,GAAe,CAAC,CAAClD,WAAW,CAAC3C,KAAD,CAAX,CAAmB,CAAnB,CAAD,GAAyBgS,iBAAzB,GAA6CtN,KAAK,CAACgC,MAAN,CAAa,CAAb,CAA9C,EAA+D,CAA/D,CAAf;AACA9J,MAAAA,CAAC,CAACiL,KAAF,CAAQnD,KAAK,CAACiB,SAAd,EAAyBjB,KAAK,CAACmB,MAA/B;AACA,WAAKnB,KAAL,CAAW3C,MAAX,GAAoB,CAAC/B,KAAK,CAACoB,OAAP,EAAgBpB,KAAK,CAACsB,OAAtB,CAApB;AACA,WAAKuL,OAAL,CAAa7M,KAAb;AACA,WAAK8M,IAAL;AACD;;;WAED,oBAAW;AACT,UAAI,CAAC,KAAKpI,KAAL,CAAWW,OAAhB,EAAyB;AACzB,WAAKX,KAAL,CAAWW,OAAX,GAAqB,KAArB;AACA,WAAKwH,OAAL;AACA,WAAKC,IAAL;AACD;;;WAED,cAAKmD,YAAL,EAAmB;AACjB,UAAMxQ,MAAM,GAAG,KAAKyF,MAAL,CAAYzF,MAA3B;;AAEA,UAAI,CAAC,CAACA,MAAN,EAAc;AACZwQ,QAAAA,YAAY,CAACxQ,MAAD,EAAS,OAAT,EAAkB,KAAKA,MAAM,GAAG,OAAd,EAAuB+M,IAAvB,CAA4B,IAA5B,CAAlB,CAAZ;AACAyD,QAAAA,YAAY,CAACxQ,MAAD,EAAS,QAAT,EAAmB,KAAKA,MAAM,GAAG,MAAd,EAAsB+M,IAAtB,CAA2B,IAA3B,CAAnB,CAAZ;AACAyD,QAAAA,YAAY,CAACxQ,MAAD,EAAS,KAAT,EAAgB,KAAKA,MAAM,GAAG,KAAd,EAAqB+M,IAArB,CAA0B,IAA1B,CAAhB,CAAZ;AACAyD,QAAAA,YAAY,CAACxQ,MAAD,EAAS,QAAT,EAAmB,KAAKA,MAAM,GAAG,KAAd,EAAqB+M,IAArB,CAA0B,IAA1B,CAAnB,CAAZ;AACD,OALD,MAKO;AACLyD,QAAAA,YAAY,CAAC,OAAD,EAAU,EAAV,EAAc,KAAK0D,KAAL,CAAWnH,IAAX,CAAgB,IAAhB,CAAd,EAAqC;AAC/CuD,UAAAA,OAAO,EAAE;AADsC,SAArC,CAAZ;AAGD;AACF;;;;EAxQuBvL,M;;AA4Q1B,IAAMoP,mBAAmB,GAAGzV,cAAc,CAACA,cAAc,CAAC,EAAD,EAAK6L,oBAAL,CAAf,EAA2C,EAA3C,EAA+C;AACvF0H,EAAAA,QADuF,oBAC9E1G,EAD8E,EAC1Eb,EAD0E,UAKpF;AAAA,gCAHDtL,OAGC;AAAA,iDADG,EACH;AAAA,8CAFCK,KAED;AAAA,QAFCA,KAED,qCAFS,KAET;AACD,WAAO+R,OAAO,CAAC/R,KAAR,IAAiBA,KAAxB;AACD,GAPsF;AASvFO,EAAAA,MATuF,kBAShFuL,EATgF,EAS5Eb,EAT4E,EASxEjF,MATwE,EAShE;AACrB,QAAMwK,YAAY,GAAGxK,MAAM,CAACH,MAA5B;AACA,QAAI2K,YAAY,CAACtR,MAAb,IAAuB,CAAC6S,OAAO,CAAC/R,KAAhC,IAAyC+R,OAAO,CAAC9R,OAArD,EAA8D,OAAO,SAAP;AAC9D,QAAI,KAAKuS,QAAT,EAAmB,OAAO,OAAP;;AAEnB,QAAIT,OAAO,CAACC,WAAZ,EAAyB;AACvB,UAAID,OAAO,CAACpS,OAAZ,EAAqB,OAAO,SAAP;AACrB,UAAIoS,OAAO,CAAC/R,KAAZ,EAAmB,OAAO,OAAP;AACpB;AACF,GAlBsF;AAoBvFwJ,EAAAA,MApBuF,kBAoBhFsC,EApBgF,EAoB5Eb,EApB4E,UAuBpF;AAAA,oCAFD0J,WAEC;AAAA,QAFDA,WAEC,mCAFa,EAEb;AAAA,oCADDC,WACC;AAAA,QADDA,WACC,mCADa,EACb;;AACD,QAAMC,YAAY,GAAG,SAAfA,YAAe,CAAArP,KAAK,EAAI;AAC5B,UAAMsP,CAAC,GAAG3P,aAAa,CAAC3D,IAAI,CAACmT,WAAD,EAAcnP,KAAd,CAAL,EAA2B;AAChDuP,QAAAA,GAAG,EAAE,CAAClO,QAD0C;AAEhDmO,QAAAA,GAAG,EAAEnO;AAF2C,OAA3B,CAAvB;AAIA,aAAO,CAACiO,CAAC,CAACC,GAAH,EAAQD,CAAC,CAACE,GAAV,CAAP;AACD,KAND;;AAQA,QAAMC,YAAY,GAAG,SAAfA,YAAe,CAAAzP,KAAK,EAAI;AAC5B,UAAM0P,CAAC,GAAG/P,aAAa,CAAC3D,IAAI,CAACoT,WAAD,EAAcpP,KAAd,CAAL,EAA2B;AAChDuP,QAAAA,GAAG,EAAE,CAAClO,QAD0C;AAEhDmO,QAAAA,GAAG,EAAEnO;AAF2C,OAA3B,CAAvB;AAIA,aAAO,CAACqO,CAAC,CAACH,GAAH,EAAQG,CAAC,CAACF,GAAV,CAAP;AACD,KAND;;AAQA,QAAI,OAAOL,WAAP,KAAuB,UAAvB,IAAqC,OAAOC,WAAP,KAAuB,UAAhE,EAA4E,OAAO,CAACC,YAAY,EAAb,EAAiBI,YAAY,EAA7B,CAAP;AAC5E,WAAO,UAAAzP,KAAK;AAAA,aAAI,CAACqP,YAAY,CAACrP,KAAD,CAAb,EAAsByP,YAAY,CAACzP,KAAD,CAAlC,CAAJ;AAAA,KAAZ;AACD,GA1CsF;AA4CvFsD,EAAAA,SA5CuF,qBA4C7E9K,KA5C6E,EA4CtEiN,EA5CsE,EA4ClEjF,MA5CkE,EA4C1D;AAC3B,SAAK2E,aAAL,GAAqB3E,MAAM,CAACc,IAAP,KAAgB,MAArC;AACA,QAAMgC,SAAS,GAAGpL,CAAC,CAACsN,QAAF,CAAWhN,KAAX,EAAkB,KAAK2M,aAAL,GAAqB,CAAC,GAAD,EAAM,CAAN,CAArB,GAAgC,CAAlD,CAAlB;AACA,WAAO7B,SAAP;AACD;AAhDsF,CAA/C,CAA1C;;IAoDMqM,U;;;;;AACJ,wBAAqB;AAAA;;AAAA;;AAAA,uCAANtQ,IAAM;AAANA,MAAAA,IAAM;AAAA;;AACnB,uDAASA,IAAT;;AAEAhH,IAAAA,eAAe,iCAAO,QAAP,EAAiB,QAAjB,CAAf;;AAHmB;AAIpB;;;;WAED,cAAKiD,KAAL,EAAY;AACV,UAAI,KAAKkF,MAAL,CAAYoP,SAAZ,IAAyBtU,KAAK,CAACuU,WAAN,KAAsB,OAAnD,EAA4D;AAC5D,UAAI,CAAC,KAAK7P,KAAL,CAAWW,OAAhB,EAAyB,KAAKmP,SAAL,CAAexU,KAAf,EAAzB,KAAoD,KAAKyU,UAAL,CAAgBzU,KAAhB;AACpD,WAAKuJ,YAAL,CAAkBK,GAAlB,CAAsB,SAAtB,EAAiC,KAAK8K,OAAL,CAAalI,IAAb,CAAkB,IAAlB,CAAjC;AACD;;;WAED,mBAAUxM,KAAV,EAAiB;AACf,WAAKlB,KAAL,CAAWkB,KAAX;AACA,WAAK2E,aAAL,CAAmBnC,aAAa,CAACxC,KAAD,CAAhC;AACA,WAAK6M,OAAL,CAAa7M,KAAb;AACA,WAAK4E,cAAL;AACA,WAAKkI,IAAL;AACD;;;WAED,oBAAW9M,KAAX,EAAkB;AAChB,UAAI,CAAC,KAAK0E,KAAL,CAAWW,OAAhB,EAAyB;AACzB,UAAMuB,MAAM,GAAGpE,aAAa,CAACxC,KAAD,CAA5B;AACA,UAAM0E,KAAK,GAAG,KAAKA,KAAnB;AACAA,MAAAA,KAAK,CAACmB,MAAN,GAAejJ,CAAC,CAACkM,GAAF,CAAMlC,MAAN,EAAclC,KAAK,CAACmC,OAApB,CAAf;AACAjK,MAAAA,CAAC,CAACiL,KAAF,CAAQnD,KAAK,CAACiB,SAAd,EAAyBjB,KAAK,CAACmB,MAA/B;AACA,WAAKlB,aAAL,CAAmBiC,MAAnB;AACA,WAAKiG,OAAL,CAAa7M,KAAb;AACA,WAAK8M,IAAL;AACD;;;WAED,iBAAQ9M,KAAR,EAAe;AACb,UAAI,CAAC,KAAK0E,KAAL,CAAWW,OAAhB,EAAyB;AACzB,WAAKX,KAAL,CAAWW,OAAX,GAAqB,KAArB;AACA,WAAKwH,OAAL,CAAa7M,KAAb;AACA,WAAK8M,IAAL;AACD;;;WAED,cAAKmD,YAAL,EAAmB;AACjBA,MAAAA,YAAY,CAAC,SAAD,EAAY,QAAZ,EAAsB,KAAK0E,IAAL,CAAUnI,IAAV,CAAe,IAAf,CAAtB,CAAZ;AACAyD,MAAAA,YAAY,CAAC,SAAD,EAAY,OAAZ,EAAqB,KAAKyE,OAAL,CAAalI,IAAb,CAAkB,IAAlB,CAArB,CAAZ;AACD;;;;EA1CsB7C,iB;;AA8CzB,IAAMiL,kBAAkB,GAAGzW,cAAc,CAACA,cAAc,CAAC,EAAD,EAAK4M,yBAAL,CAAf,EAAgD,EAAhD,EAAoD;AAC3FuJ,EAAAA,SAAS,EAAE;AAAA,QAACpX,KAAD,uEAAS,IAAT;AAAA,WAAkBA,KAAlB;AAAA;AADgF,CAApD,CAAzC;;IAIM2X,Y;;;;;AACJ,0BAAqB;AAAA;;AAAA;;AAAA,uCAAN9Q,IAAM;AAANA,MAAAA,IAAM;AAAA;;AACnB,uDAASA,IAAT;;AAEAhH,IAAAA,eAAe,iCAAO,QAAP,EAAiB,WAAjB,CAAf;;AAHmB;AAIpB;;;;WAED,gBAAOiD,KAAP,EAAc;AACZ,UAAI,CAAC,KAAK0E,KAAL,CAAWW,OAAhB,EAAyB,KAAKvG,KAAL,CAAWkB,KAAX;AACzB,WAAK8U,YAAL,CAAkB9U,KAAlB;AACA,WAAKuJ,YAAL,CAAkBK,GAAlB,CAAsB,WAAtB,EAAmC,KAAKmL,SAAL,CAAevI,IAAf,CAAoB,IAApB,CAAnC;AACD;;;WAED,sBAAaxM,KAAb,EAAoB;AAClB,UAAIA,KAAK,CAACmH,UAAV,EAAsBnH,KAAK,CAACkH,cAAN;AACtB,UAAMxC,KAAK,GAAG,KAAKA,KAAnB;AACA,UAAMkC,MAAM,GAAG7D,YAAY,CAAC/C,KAAD,CAA3B;AACA0E,MAAAA,KAAK,CAACmB,MAAN,GAAejJ,CAAC,CAACkM,GAAF,CAAMlC,MAAN,EAAclC,KAAK,CAACmC,OAApB,CAAf;AACAjK,MAAAA,CAAC,CAACiL,KAAF,CAAQnD,KAAK,CAACiB,SAAd,EAAyBjB,KAAK,CAACmB,MAA/B;AACA,WAAKlB,aAAL,CAAmBiC,MAAnB;AACA,WAAKiG,OAAL,CAAa7M,KAAb;AACA,WAAK8M,IAAL;AACD;;;WAED,qBAAY;AACV,UAAI,CAAC,KAAKpI,KAAL,CAAWW,OAAhB,EAAyB;AACzB,WAAKX,KAAL,CAAWW,OAAX,GAAqB,KAArB;AACA,WAAKwH,OAAL;AACA,WAAKC,IAAL;AACD;;;WAED,cAAKmD,YAAL,EAAmB;AACjBA,MAAAA,YAAY,CAAC,QAAD,EAAW,EAAX,EAAe,KAAK+E,MAAL,CAAYxI,IAAZ,CAAiB,IAAjB,CAAf,CAAZ;AACD;;;;EAjCwB7C,iB;;AAqC3B,IAAMsL,oBAAoB,GAAGlK,yBAA7B;;IAEMmK,W;;;;;AACJ,yBAAqB;AAAA;;AAAA;;AAAA,uCAANnR,IAAM;AAANA,MAAAA,IAAM;AAAA;;AACnB,uDAASA,IAAT;;AAEAhH,IAAAA,eAAe,iCAAO,QAAP,EAAiB,UAAjB,CAAf;;AAHmB;AAIpB;;;;WAED,eAAMiD,KAAN,EAAa;AACX,UAAI,CAAC,KAAK0E,KAAL,CAAWW,OAAhB,EAAyB,KAAKvG,KAAL,CAAWkB,KAAX;AACzB,WAAKuT,WAAL,CAAiBvT,KAAjB;AACA,WAAKuJ,YAAL,CAAkBK,GAAlB,CAAsB,UAAtB,EAAkC,KAAK4J,QAAL,CAAchH,IAAd,CAAmB,IAAnB,CAAlC;AACD;;;WAED,qBAAYxM,KAAZ,EAAmB;AACjB,UAAM0E,KAAK,GAAG,KAAKA,KAAnB;AACAA,MAAAA,KAAK,CAACmB,MAAN,GAAelD,WAAW,CAAC3C,KAAD,CAA1B;AACApD,MAAAA,CAAC,CAACiL,KAAF,CAAQ,KAAKnD,KAAL,CAAWiB,SAAnB,EAA8BjB,KAAK,CAACmB,MAApC;AACA,WAAKgH,OAAL,CAAa7M,KAAb;AACA,WAAK8M,IAAL;AACD;;;WAED,oBAAW;AACT,UAAI,CAAC,KAAKpI,KAAL,CAAWW,OAAhB,EAAyB;AACzB,WAAKX,KAAL,CAAWW,OAAX,GAAqB,KAArB;AACA,WAAKwH,OAAL;AACA,WAAKC,IAAL;AACD;;;WAED,cAAKmD,YAAL,EAAmB;AACjBA,MAAAA,YAAY,CAAC,OAAD,EAAU,EAAV,EAAc,KAAK0D,KAAL,CAAWnH,IAAX,CAAgB,IAAhB,CAAd,CAAZ;AACD;;;;EA9BuB7C,iB;;AAkC1B,IAAMwL,mBAAmB,GAAGpK,yBAA5B;;IAEMqK,W;;;;;AACJ,yBAAqB;AAAA;;AAAA;;AAAA,uCAANrR,IAAM;AAANA,MAAAA,IAAM;AAAA;;AACnB,wDAASA,IAAT;;AAEAhH,IAAAA,eAAe,kCAAO,QAAP,EAAiB,UAAjB,CAAf;;AAHmB;AAIpB;;;;WAED,eAAMiD,KAAN,EAAa;AACX,UAAI,KAAKkF,MAAL,CAAYoP,SAAZ,IAAyBtU,KAAK,CAACuU,WAAN,KAAsB,OAAnD,EAA4D;AAC5D,WAAKzV,KAAL,CAAWkB,KAAX;AACA,WAAK2E,aAAL,CAAmBnC,aAAa,CAACxC,KAAD,CAAhC;AACA,WAAK6M,OAAL,CAAa7M,KAAb;AACA,WAAK8M,IAAL;AACD;;;WAED,eAAM9M,KAAN,EAAa;AACX,UAAI,KAAKkF,MAAL,CAAYoP,SAAZ,IAAyBtU,KAAK,CAACuU,WAAN,KAAsB,OAAnD,EAA4D;AAC5D,UAAM7P,KAAK,GAAG,KAAKA,KAAnB;AACA,UAAI,CAACA,KAAK,CAACW,OAAX,EAAoB;AACpBX,MAAAA,KAAK,CAACW,OAAN,GAAgB,KAAhB;AACA,UAAMuB,MAAM,GAAGpE,aAAa,CAACxC,KAAD,CAA5B;AACA0E,MAAAA,KAAK,CAACiB,SAAN,GAAkBjB,KAAK,CAACmB,MAAN,GAAejJ,CAAC,CAACkM,GAAF,CAAMlC,MAAN,EAAclC,KAAK,CAACmC,OAApB,CAAjC;AACA,WAAKlC,aAAL,CAAmBiC,MAAnB;AACA,WAAKiG,OAAL,CAAa7M,KAAb;AACA0E,MAAAA,KAAK,CAAC6B,KAAN,GAAc7B,KAAK,CAAC4B,QAApB;AACA,WAAKwG,IAAL;AACD;;;WAED,cAAKmD,YAAL,EAAmB;AACjBA,MAAAA,YAAY,CAAC,SAAD,EAAY,OAAZ,EAAqB,KAAKoF,KAAL,CAAW7I,IAAX,CAAgB,IAAhB,CAArB,CAAZ;AACAyD,MAAAA,YAAY,CAAC,SAAD,EAAY,OAAZ,EAAqB,KAAKqF,KAAL,CAAW9I,IAAX,CAAgB,IAAhB,CAArB,CAAZ;AACD;;;;EA/BuB7C,iB;;AAmC1B,IAAM4L,mBAAmB,GAAGpX,cAAc,CAACA,cAAc,CAAC,EAAD,EAAK4M,yBAAL,CAAf,EAAgD,EAAhD,EAAoD;AAC5FuJ,EAAAA,SAAS,EAAE;AAAA,QAACpX,KAAD,uEAAS,IAAT;AAAA,WAAkBA,KAAlB;AAAA;AADiF,CAApD,CAA1C;;AAIA,IAAMsY,SAAS,GAAG,IAAIrD,GAAJ,EAAlB;AACA,IAAMsD,iBAAiB,GAAG,IAAItD,GAAJ,EAA1B;;AACA,SAASuD,cAAT,CAAwBhW,MAAxB,EAAgC;AAC9B8V,EAAAA,SAAS,CAAC5C,GAAV,CAAclT,MAAM,CAACzC,GAArB,EAA0ByC,MAAM,CAACiW,MAAjC;AACAF,EAAAA,iBAAiB,CAAC7C,GAAlB,CAAsBlT,MAAM,CAACzC,GAA7B,EAAkCyC,MAAM,CAACkW,QAAzC;AACD;;AACD,IAAMC,UAAU,GAAG;AACjB5Y,EAAAA,GAAG,EAAE,MADY;AAEjB0Y,EAAAA,MAAM,EAAE7J,UAFS;AAGjB8J,EAAAA,QAAQ,EAAEpE;AAHO,CAAnB;AAKA,IAAMsE,WAAW,GAAG;AAClB7Y,EAAAA,GAAG,EAAE,OADa;AAElB0Y,EAAAA,MAAM,EAAEP,WAFU;AAGlBQ,EAAAA,QAAQ,EAAEL;AAHQ,CAApB;AAKA,IAAMQ,UAAU,GAAG;AACjB9Y,EAAAA,GAAG,EAAE,MADY;AAEjB0Y,EAAAA,MAAM,EAAEtB,UAFS;AAGjBuB,EAAAA,QAAQ,EAAEhB;AAHO,CAAnB;AAKA,IAAMoB,WAAW,GAAG;AAClB/Y,EAAAA,GAAG,EAAE,OADa;AAElB0Y,EAAAA,MAAM,EAAE1D,WAFU;AAGlB2D,EAAAA,QAAQ,EAAEhC;AAHQ,CAApB;AAKA,IAAMqC,YAAY,GAAG;AACnBhZ,EAAAA,GAAG,EAAE,QADc;AAEnB0Y,EAAAA,MAAM,EAAEd,YAFW;AAGnBe,EAAAA,QAAQ,EAAEX;AAHS,CAArB;AAKA,IAAMiB,WAAW,GAAG;AAClBjZ,EAAAA,GAAG,EAAE,OADa;AAElB0Y,EAAAA,MAAM,EAAET,WAFU;AAGlBU,EAAAA,QAAQ,EAAET;AAHQ,CAApB;AAMA,SAASM,iBAAiB,IAAIU,CAA9B,EAAiCX,SAAS,IAAIY,CAA9C,EAAiDnF,OAAO,IAAIoF,CAA5D,EAA+DlY,cAAc,IAAImY,CAAjF,EAAoFvZ,eAAe,IAAIwZ,CAAvG,EAA0GvU,QAAQ,IAAIwU,CAAtH,EAAyHvS,KAAK,IAAIpH,CAAlI,EAAqI2C,aAAa,IAAIiK,CAAtJ,EAAyJoM,UAAU,IAAIxV,CAAvK,EAA0KyV,WAAW,IAAIW,CAAzL,EAA4L1W,OAAO,IAAI1B,CAAvM,EAA0M0X,UAAU,IAAIW,CAAxN,EAA2NV,WAAW,IAAIW,CAA1O,EAA6OjB,cAAc,IAAIlL,CAA/P,EAAkQyL,YAAY,IAAIW,CAAlR,EAAqR9W,cAAc,IAAI+W,CAAvS,EAA0SX,WAAW,IAAIY,CAAzT","sourcesContent":["import { V, c as computeRubberband } from './maths-b2a210f4.esm.js';\n\nfunction _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nfunction ownKeys(object, enumerableOnly) {\n  var keys = Object.keys(object);\n\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n\n    if (enumerableOnly) {\n      symbols = symbols.filter(function (sym) {\n        return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n      });\n    }\n\n    keys.push.apply(keys, symbols);\n  }\n\n  return keys;\n}\n\nfunction _objectSpread2(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i] != null ? arguments[i] : {};\n\n    if (i % 2) {\n      ownKeys(Object(source), true).forEach(function (key) {\n        _defineProperty(target, key, source[key]);\n      });\n    } else if (Object.getOwnPropertyDescriptors) {\n      Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));\n    } else {\n      ownKeys(Object(source)).forEach(function (key) {\n        Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n      });\n    }\n  }\n\n  return target;\n}\n\nconst EVENT_TYPE_MAP = {\n  pointer: {\n    start: 'down',\n    change: 'move',\n    end: 'up'\n  },\n  mouse: {\n    start: 'down',\n    change: 'move',\n    end: 'up'\n  },\n  touch: {\n    start: 'start',\n    change: 'move',\n    end: 'end'\n  },\n  gesture: {\n    start: 'start',\n    change: 'change',\n    end: 'end'\n  }\n};\n\nfunction capitalize(string) {\n  if (!string) return '';\n  return string[0].toUpperCase() + string.slice(1);\n}\n\nfunction toHandlerProp(device, action = '', capture = false) {\n  const deviceProps = EVENT_TYPE_MAP[device];\n  const actionKey = deviceProps ? deviceProps[action] || action : action;\n  return 'on' + capitalize(device) + capitalize(actionKey) + (capture ? 'Capture' : '');\n}\nfunction toDomEventType(device, action = '') {\n  const deviceProps = EVENT_TYPE_MAP[device];\n  const actionKey = deviceProps ? deviceProps[action] || action : action;\n  return device + actionKey;\n}\nfunction isTouch(event) {\n  return 'touches' in event;\n}\n\nfunction getCurrentTargetTouchList(event) {\n  return Array.from(event.touches).filter(e => {\n    var _event$currentTarget, _event$currentTarget$;\n\n    return e.target === event.currentTarget || ((_event$currentTarget = event.currentTarget) === null || _event$currentTarget === void 0 ? void 0 : (_event$currentTarget$ = _event$currentTarget.contains) === null || _event$currentTarget$ === void 0 ? void 0 : _event$currentTarget$.call(_event$currentTarget, e.target));\n  });\n}\n\nfunction getTouchList(event) {\n  return event.type === 'touchend' ? event.changedTouches : event.targetTouches;\n}\n\nfunction getValueEvent(event) {\n  return isTouch(event) ? getTouchList(event)[0] : event;\n}\n\nfunction distanceAngle(P1, P2) {\n  const dx = P2.clientX - P1.clientX;\n  const dy = P2.clientY - P1.clientY;\n  const cx = (P2.clientX + P1.clientX) / 2;\n  const cy = (P2.clientY + P1.clientY) / 2;\n  const distance = Math.hypot(dx, dy);\n  const angle = -(Math.atan2(dx, dy) * 180) / Math.PI;\n  const origin = [cx, cy];\n  return {\n    angle,\n    distance,\n    origin\n  };\n}\nfunction touchIds(event) {\n  return getCurrentTargetTouchList(event).map(touch => touch.identifier);\n}\nfunction touchDistanceAngle(event, ids) {\n  const [P1, P2] = Array.from(event.touches).filter(touch => ids.includes(touch.identifier));\n  return distanceAngle(P1, P2);\n}\nfunction pointerId(event) {\n  const valueEvent = getValueEvent(event);\n  return isTouch(event) ? valueEvent.identifier : valueEvent.pointerId;\n}\nfunction pointerValues(event) {\n  const valueEvent = getValueEvent(event);\n  return [valueEvent.clientX, valueEvent.clientY];\n}\nconst LINE_HEIGHT = 40;\nconst PAGE_HEIGHT = 800;\nfunction wheelValues(event) {\n  let {\n    deltaX,\n    deltaY,\n    deltaMode\n  } = event;\n\n  if (deltaMode === 1) {\n    deltaX *= LINE_HEIGHT;\n    deltaY *= LINE_HEIGHT;\n  } else if (deltaMode === 2) {\n    deltaX *= PAGE_HEIGHT;\n    deltaY *= PAGE_HEIGHT;\n  }\n\n  return [deltaX, deltaY];\n}\nfunction scrollValues(event) {\n  var _ref, _ref2;\n\n  const {\n    scrollX,\n    scrollY,\n    scrollLeft,\n    scrollTop\n  } = event.currentTarget;\n  return [(_ref = scrollX !== null && scrollX !== void 0 ? scrollX : scrollLeft) !== null && _ref !== void 0 ? _ref : 0, (_ref2 = scrollY !== null && scrollY !== void 0 ? scrollY : scrollTop) !== null && _ref2 !== void 0 ? _ref2 : 0];\n}\nfunction getEventDetails(event) {\n  const payload = {};\n  if ('buttons' in event) payload.buttons = event.buttons;\n\n  if ('shiftKey' in event) {\n    const {\n      shiftKey,\n      altKey,\n      metaKey,\n      ctrlKey\n    } = event;\n    Object.assign(payload, {\n      shiftKey,\n      altKey,\n      metaKey,\n      ctrlKey\n    });\n  }\n\n  return payload;\n}\n\nfunction call(v, ...args) {\n  if (typeof v === 'function') {\n    return v(...args);\n  } else {\n    return v;\n  }\n}\nfunction noop() {}\nfunction chain(...fns) {\n  if (fns.length === 0) return noop;\n  if (fns.length === 1) return fns[0];\n  return function () {\n    let result;\n\n    for (const fn of fns) {\n      result = fn.apply(this, arguments) || result;\n    }\n\n    return result;\n  };\n}\nfunction assignDefault(value, fallback) {\n  return Object.assign({}, fallback, value || {});\n}\n\nconst BEFORE_LAST_KINEMATICS_DELAY = 32;\nclass Engine {\n  constructor(ctrl, args, key) {\n    this.ctrl = ctrl;\n    this.args = args;\n    this.key = key;\n\n    if (!this.state) {\n      this.state = {};\n      this.computeValues([0, 0]);\n      this.computeInitial();\n      if (this.init) this.init();\n      this.reset();\n    }\n  }\n\n  get state() {\n    return this.ctrl.state[this.key];\n  }\n\n  set state(state) {\n    this.ctrl.state[this.key] = state;\n  }\n\n  get shared() {\n    return this.ctrl.state.shared;\n  }\n\n  get eventStore() {\n    return this.ctrl.gestureEventStores[this.key];\n  }\n\n  get timeoutStore() {\n    return this.ctrl.gestureTimeoutStores[this.key];\n  }\n\n  get config() {\n    return this.ctrl.config[this.key];\n  }\n\n  get sharedConfig() {\n    return this.ctrl.config.shared;\n  }\n\n  get handler() {\n    return this.ctrl.handlers[this.key];\n  }\n\n  reset() {\n    const {\n      state,\n      shared,\n      ingKey,\n      args\n    } = this;\n    shared[ingKey] = state._active = state.active = state._blocked = state._force = false;\n    state._step = [false, false];\n    state.intentional = false;\n    state._movement = [0, 0];\n    state._distance = [0, 0];\n    state._delta = [0, 0];\n    state._bounds = [[-Infinity, Infinity], [-Infinity, Infinity]];\n    state.args = args;\n    state.axis = undefined;\n    state.memo = undefined;\n    state.elapsedTime = 0;\n    state.direction = [0, 0];\n    state.distance = [0, 0];\n    state.velocity = [0, 0];\n    state.movement = [0, 0];\n    state.delta = [0, 0];\n    state.timeStamp = 0;\n  }\n\n  start(event) {\n    const state = this.state;\n    const config = this.config;\n\n    if (!state._active) {\n      this.reset();\n      this.computeInitial();\n      state._active = true;\n      state.target = event.target;\n      state.currentTarget = event.currentTarget;\n      state.lastOffset = config.from ? call(config.from, state) : state.offset;\n      state.offset = state.lastOffset;\n    }\n\n    state.startTime = state.timeStamp = event.timeStamp;\n  }\n\n  computeValues(values) {\n    const state = this.state;\n    state._values = values;\n    state.values = this.config.transform(values);\n  }\n\n  computeInitial() {\n    const state = this.state;\n    state._initial = state._values;\n    state.initial = state.values;\n  }\n\n  compute(event) {\n    const {\n      state,\n      config,\n      shared\n    } = this;\n    state.args = this.args;\n    let dt = 0;\n\n    if (event) {\n      state.event = event;\n      if (config.preventDefault && event.cancelable) state.event.preventDefault();\n      state.type = event.type;\n      shared.touches = this.ctrl.pointerIds.size || this.ctrl.touchIds.size;\n      shared.locked = !!document.pointerLockElement;\n      Object.assign(shared, getEventDetails(event));\n      shared.down = shared.pressed = shared.buttons % 2 === 1 || shared.touches > 0;\n      dt = event.timeStamp - state.timeStamp;\n      state.timeStamp = event.timeStamp;\n      state.elapsedTime = state.timeStamp - state.startTime;\n    }\n\n    if (state._active) {\n      const _absoluteDelta = state._delta.map(Math.abs);\n\n      V.addTo(state._distance, _absoluteDelta);\n    }\n\n    const [_m0, _m1] = state._movement;\n    const [t0, t1] = config.threshold;\n    const {\n      _step,\n      values\n    } = state;\n\n    if (config.hasCustomTransform) {\n      if (_step[0] === false) _step[0] = Math.abs(_m0) >= t0 && values[0];\n      if (_step[1] === false) _step[1] = Math.abs(_m1) >= t1 && values[1];\n    } else {\n      if (_step[0] === false) _step[0] = Math.abs(_m0) >= t0 && Math.sign(_m0) * t0;\n      if (_step[1] === false) _step[1] = Math.abs(_m1) >= t1 && Math.sign(_m1) * t1;\n    }\n\n    state.intentional = _step[0] !== false || _step[1] !== false;\n    if (!state.intentional) return;\n    const movement = [0, 0];\n\n    if (config.hasCustomTransform) {\n      const [v0, v1] = values;\n      movement[0] = _step[0] !== false ? v0 - _step[0] : 0;\n      movement[1] = _step[1] !== false ? v1 - _step[1] : 0;\n    } else {\n      movement[0] = _step[0] !== false ? _m0 - _step[0] : 0;\n      movement[1] = _step[1] !== false ? _m1 - _step[1] : 0;\n    }\n\n    if (this.intent) this.intent(movement);\n\n    if (state._active && !state._blocked || state.active) {\n      state.first = state._active && !state.active;\n      state.last = !state._active && state.active;\n      state.active = shared[this.ingKey] = state._active;\n\n      if (event) {\n        if (state.first) {\n          if ('bounds' in config) state._bounds = call(config.bounds, state);\n          if (this.setup) this.setup();\n        }\n\n        state.movement = movement;\n        const previousOffset = state.offset;\n        this.computeOffset();\n\n        if (!state.last || dt > BEFORE_LAST_KINEMATICS_DELAY) {\n          state.delta = V.sub(state.offset, previousOffset);\n          const absoluteDelta = state.delta.map(Math.abs);\n          V.addTo(state.distance, absoluteDelta);\n          state.direction = state.delta.map(Math.sign);\n\n          if (!state.first && dt > 0) {\n            state.velocity = [absoluteDelta[0] / dt, absoluteDelta[1] / dt];\n          }\n        }\n      }\n    }\n\n    const rubberband = state._active ? config.rubberband || [0, 0] : [0, 0];\n    state.offset = computeRubberband(state._bounds, state.offset, rubberband);\n    this.computeMovement();\n  }\n\n  emit() {\n    const state = this.state;\n    const shared = this.shared;\n    const config = this.config;\n    if (!state._active) this.clean();\n    if ((state._blocked || !state.intentional) && !state._force && !config.triggerAllEvents) return;\n    const memo = this.handler(_objectSpread2(_objectSpread2(_objectSpread2({}, shared), state), {}, {\n      [this.aliasKey]: state.values\n    }));\n    if (memo !== undefined) state.memo = memo;\n  }\n\n  clean() {\n    this.eventStore.clean();\n    this.timeoutStore.clean();\n  }\n\n}\n\nfunction selectAxis([dx, dy]) {\n  const d = Math.abs(dx) - Math.abs(dy);\n  if (d > 0) return 'x';\n  if (d < 0) return 'y';\n  return undefined;\n}\n\nfunction restrictVectorToAxis(v, axis) {\n  switch (axis) {\n    case 'x':\n      v[1] = 0;\n      break;\n\n    case 'y':\n      v[0] = 0;\n      break;\n  }\n}\n\nclass CoordinatesEngine extends Engine {\n  constructor(...args) {\n    super(...args);\n\n    _defineProperty(this, \"aliasKey\", 'xy');\n  }\n\n  reset() {\n    super.reset();\n    this.state.axis = undefined;\n  }\n\n  init() {\n    this.state.offset = [0, 0];\n    this.state.lastOffset = [0, 0];\n  }\n\n  computeOffset() {\n    this.state.offset = V.add(this.state.lastOffset, this.state.movement);\n  }\n\n  computeMovement() {\n    this.state.movement = V.sub(this.state.offset, this.state.lastOffset);\n  }\n\n  intent(v) {\n    this.state.axis = this.state.axis || selectAxis(v);\n    this.state._blocked = (this.config.lockDirection || !!this.config.axis) && !this.state.axis || !!this.config.axis && this.config.axis !== this.state.axis;\n    if (this.state._blocked) return;\n\n    if (this.config.axis || this.config.lockDirection) {\n      restrictVectorToAxis(v, this.state.axis);\n    }\n  }\n\n}\n\nconst identity = v => v;\nconst DEFAULT_RUBBERBAND = 0.15;\nconst commonConfigResolver = {\n  enabled(value = true) {\n    return value;\n  },\n\n  preventDefault(value = false) {\n    return value;\n  },\n\n  triggerAllEvents(value = false) {\n    return value;\n  },\n\n  rubberband(value = 0) {\n    switch (value) {\n      case true:\n        return [DEFAULT_RUBBERBAND, DEFAULT_RUBBERBAND];\n\n      case false:\n        return [0, 0];\n\n      default:\n        return V.toVector(value);\n    }\n  },\n\n  from(value) {\n    if (typeof value === 'function') return value;\n    if (value != null) return V.toVector(value);\n  },\n\n  transform(value, _k, config) {\n    const transform = value || config.shared.transform;\n    this.hasCustomTransform = !!transform;\n\n    if (process.env.NODE_ENV === 'development') {\n      const originalTransform = transform || identity;\n      return v => {\n        const r = originalTransform(v);\n\n        if (!isFinite(r[0]) || !isFinite(r[1])) {\n          console.warn(`[@use-gesture]: config.transform() must produce a valid result, but it was: [${r[0]},${[1]}]`);\n        }\n\n        return r;\n      };\n    }\n\n    return transform || identity;\n  },\n\n  threshold(value) {\n    return V.toVector(value, 0);\n  }\n\n};\n\nif (process.env.NODE_ENV === 'development') {\n  Object.assign(commonConfigResolver, {\n    domTarget(value) {\n      if (value !== undefined) {\n        throw Error(`[@use-gesture]: \\`domTarget\\` option has been renamed to \\`target\\`.`);\n      }\n\n      return NaN;\n    },\n\n    lockDirection(value) {\n      if (value !== undefined) {\n        throw Error(`[@use-gesture]: \\`lockDirection\\` option has been merged with \\`axis\\`. Use it as in \\`{ axis: 'lock' }\\``);\n      }\n\n      return NaN;\n    },\n\n    initial(value) {\n      if (value !== undefined) {\n        throw Error(`[@use-gesture]: \\`initial\\` option has been renamed to \\`from\\`.`);\n      }\n\n      return NaN;\n    }\n\n  });\n}\n\nconst coordinatesConfigResolver = _objectSpread2(_objectSpread2({}, commonConfigResolver), {}, {\n  axis(_v, _k, {\n    axis\n  }) {\n    this.lockDirection = axis === 'lock';\n    if (!this.lockDirection) return axis;\n  },\n\n  bounds(value = {}) {\n    if (typeof value === 'function') {\n      return state => coordinatesConfigResolver.bounds(value(state));\n    }\n\n    if ('current' in value) {\n      return () => value.current;\n    }\n\n    if (typeof HTMLElement === 'function' && value instanceof HTMLElement) {\n      return value;\n    }\n\n    const {\n      left = -Infinity,\n      right = Infinity,\n      top = -Infinity,\n      bottom = Infinity\n    } = value;\n    return [[left, right], [top, bottom]];\n  }\n\n});\n\nconst DISPLACEMENT = 10;\nconst KEYS_DELTA_MAP = {\n  ArrowRight: (factor = 1) => [DISPLACEMENT * factor, 0],\n  ArrowLeft: (factor = 1) => [-DISPLACEMENT * factor, 0],\n  ArrowUp: (factor = 1) => [0, -DISPLACEMENT * factor],\n  ArrowDown: (factor = 1) => [0, DISPLACEMENT * factor]\n};\nclass DragEngine extends CoordinatesEngine {\n  constructor(...args) {\n    super(...args);\n\n    _defineProperty(this, \"ingKey\", 'dragging');\n  }\n\n  reset() {\n    super.reset();\n    const state = this.state;\n    state._pointerId = undefined;\n    state._pointerActive = false;\n    state._keyboardActive = false;\n    state._preventScroll = false;\n    state._delayed = false;\n    state.swipe = [0, 0];\n    state.tap = false;\n    state.canceled = false;\n    state.cancel = this.cancel.bind(this);\n  }\n\n  setup() {\n    const state = this.state;\n\n    if (state._bounds instanceof HTMLElement) {\n      const boundRect = state._bounds.getBoundingClientRect();\n\n      const targetRect = state.currentTarget.getBoundingClientRect();\n      const _bounds = {\n        left: boundRect.left - targetRect.left + state.offset[0],\n        right: boundRect.right - targetRect.right + state.offset[0],\n        top: boundRect.top - targetRect.top + state.offset[1],\n        bottom: boundRect.bottom - targetRect.bottom + state.offset[1]\n      };\n      state._bounds = coordinatesConfigResolver.bounds(_bounds);\n    }\n  }\n\n  cancel() {\n    const state = this.state;\n    if (state.canceled) return;\n    state.canceled = true;\n    state._active = false;\n    setTimeout(() => {\n      this.compute();\n      this.emit();\n    }, 0);\n  }\n\n  setActive() {\n    this.state._active = this.state._pointerActive || this.state._keyboardActive;\n  }\n\n  clean() {\n    this.pointerClean();\n    this.state._pointerActive = false;\n    this.state._keyboardActive = false;\n    super.clean();\n  }\n\n  pointerDown(event) {\n    const config = this.config;\n    const state = this.state;\n    if (event.buttons != null && (Array.isArray(config.pointerButtons) ? !config.pointerButtons.includes(event.buttons) : config.pointerButtons !== -1 && config.pointerButtons !== event.buttons)) return;\n    this.ctrl.setEventIds(event);\n\n    if (config.pointerCapture) {\n      event.target.setPointerCapture(event.pointerId);\n    }\n\n    if (state._pointerActive) return;\n    this.start(event);\n    this.setupPointer(event);\n    state._pointerId = pointerId(event);\n    state._pointerActive = true;\n    this.computeValues(pointerValues(event));\n    this.computeInitial();\n\n    if (config.preventScroll) {\n      this.setupScrollPrevention(event);\n    } else if (config.delay > 0) {\n      this.setupDelayTrigger(event);\n    } else {\n      this.startPointerDrag(event);\n    }\n  }\n\n  startPointerDrag(event) {\n    const state = this.state;\n    state._active = true;\n    state._preventScroll = true;\n    state._delayed = false;\n    this.compute(event);\n    this.emit();\n  }\n\n  pointerMove(event) {\n    const state = this.state;\n    const config = this.config;\n    if (!state._pointerActive) return;\n    if (state.type === event.type && event.timeStamp === state.timeStamp) return;\n    const id = pointerId(event);\n    if (state._pointerId && id !== state._pointerId) return;\n\n    const _values = pointerValues(event);\n\n    if (document.pointerLockElement === event.target) {\n      state._delta = [event.movementX, event.movementY];\n    } else {\n      state._delta = V.sub(_values, state._values);\n      this.computeValues(_values);\n    }\n\n    V.addTo(state._movement, state._delta);\n    this.compute(event);\n\n    if (state._delayed) {\n      this.timeoutStore.remove('dragDelay');\n      state.active = false;\n      this.startPointerDrag(event);\n      return;\n    }\n\n    if (config.preventScroll && !state._preventScroll) {\n      if (state.axis) {\n        if (state.axis === config.preventScrollAxis || config.preventScrollAxis === 'xy') {\n          state._active = false;\n          this.clean();\n          return;\n        } else {\n          this.timeoutStore.remove('startPointerDrag');\n          this.startPointerDrag(event);\n          return;\n        }\n      } else {\n        return;\n      }\n    }\n\n    this.emit();\n  }\n\n  pointerUp(event) {\n    this.ctrl.setEventIds(event);\n\n    try {\n      if (this.config.pointerCapture && event.target.hasPointerCapture(event.pointerId)) {\n        ;\n        event.target.releasePointerCapture(event.pointerId);\n      }\n    } catch (_unused) {\n      if (process.env.NODE_ENV === 'development') {\n        console.warn(`[@use-gesture]: If you see this message, it's likely that you're using an outdated version of \\`@react-three/fiber\\`. \\n\\nPlease upgrade to the latest version.`);\n      }\n    }\n\n    const state = this.state;\n    const config = this.config;\n    if (!state._pointerActive) return;\n    const id = pointerId(event);\n    if (state._pointerId && id !== state._pointerId) return;\n    this.state._pointerActive = false;\n    this.setActive();\n    this.compute(event);\n    const [dx, dy] = state._distance;\n    state.tap = dx <= 3 && dy <= 3;\n\n    if (state.tap && config.filterTaps) {\n      state._force = true;\n    } else {\n      const [dirx, diry] = state.direction;\n      const [vx, vy] = state.velocity;\n      const [mx, my] = state.movement;\n      const [svx, svy] = config.swipe.velocity;\n      const [sx, sy] = config.swipe.distance;\n      const sdt = config.swipe.duration;\n\n      if (state.elapsedTime < sdt) {\n        if (Math.abs(vx) > svx && Math.abs(mx) > sx) state.swipe[0] = dirx;\n        if (Math.abs(vy) > svy && Math.abs(my) > sy) state.swipe[1] = diry;\n      }\n    }\n\n    this.emit();\n  }\n\n  pointerClick(event) {\n    if (!this.state.tap) {\n      event.preventDefault();\n      event.stopPropagation();\n    }\n  }\n\n  setupPointer(event) {\n    const config = this.config;\n    let device = config.device;\n\n    if (process.env.NODE_ENV === 'development') {\n      try {\n        if (device === 'pointer') {\n          const currentTarget = 'uv' in event ? event.sourceEvent.currentTarget : event.currentTarget;\n          const style = window.getComputedStyle(currentTarget);\n\n          if (style.touchAction === 'auto') {\n            console.warn(`[@use-gesture]: The drag target has its \\`touch-action\\` style property set to \\`auto\\`. It is recommended to add \\`touch-action: 'none'\\` so that the drag gesture behaves correctly on touch-enabled devices. For more information read this: https://use-gesture.netlify.app/docs/extras/#touch-action.\\n\\nThis message will only show in development mode. It won't appear in production. If this is intended, you can ignore it.`, currentTarget);\n          }\n        }\n      } catch (_unused2) {}\n    }\n\n    if (config.pointerLock) {\n      event.currentTarget.requestPointerLock();\n    }\n\n    if (!config.pointerCapture) {\n      this.eventStore.add(this.sharedConfig.window, device, 'change', this.pointerMove.bind(this));\n      this.eventStore.add(this.sharedConfig.window, device, 'end', this.pointerUp.bind(this));\n    }\n  }\n\n  pointerClean() {\n    if (this.config.pointerLock && document.pointerLockElement === this.state.currentTarget) {\n      document.exitPointerLock();\n    }\n  }\n\n  preventScroll(event) {\n    if (this.state._preventScroll && event.cancelable) {\n      event.preventDefault();\n    }\n  }\n\n  setupScrollPrevention(event) {\n    persistEvent(event);\n    this.eventStore.add(this.sharedConfig.window, 'touch', 'change', this.preventScroll.bind(this), {\n      passive: false\n    });\n    this.eventStore.add(this.sharedConfig.window, 'touch', 'end', this.clean.bind(this), {\n      passive: false\n    });\n    this.eventStore.add(this.sharedConfig.window, 'touch', 'cancel', this.clean.bind(this), {\n      passive: false\n    });\n    this.timeoutStore.add('startPointerDrag', this.startPointerDrag.bind(this), this.config.preventScroll, event);\n  }\n\n  setupDelayTrigger(event) {\n    this.state._delayed = true;\n    this.timeoutStore.add('dragDelay', this.startPointerDrag.bind(this), this.config.delay, event);\n  }\n\n  keyDown(event) {\n    const deltaFn = KEYS_DELTA_MAP[event.key];\n\n    if (deltaFn) {\n      const state = this.state;\n      const factor = event.shiftKey ? 10 : event.altKey ? 0.1 : 1;\n      state._delta = deltaFn(factor);\n      this.start(event);\n      state._keyboardActive = true;\n      V.addTo(state._movement, state._delta);\n      this.compute(event);\n      this.emit();\n    }\n  }\n\n  keyUp(event) {\n    if (!(event.key in KEYS_DELTA_MAP)) return;\n    this.state._keyboardActive = false;\n    this.setActive();\n    this.compute(event);\n    this.emit();\n  }\n\n  bind(bindFunction) {\n    const device = this.config.device;\n    bindFunction(device, 'start', this.pointerDown.bind(this));\n\n    if (this.config.pointerCapture) {\n      bindFunction(device, 'change', this.pointerMove.bind(this));\n      bindFunction(device, 'end', this.pointerUp.bind(this));\n      bindFunction(device, 'cancel', this.pointerUp.bind(this));\n    }\n\n    bindFunction('key', 'down', this.keyDown.bind(this));\n    bindFunction('key', 'up', this.keyUp.bind(this));\n\n    if (this.config.filterTaps) {\n      bindFunction('click', '', this.pointerClick.bind(this), {\n        capture: true\n      });\n    }\n  }\n\n}\n\nfunction persistEvent(event) {\n  'persist' in event && typeof event.persist === 'function' && event.persist();\n}\n\nconst isBrowser = typeof window !== 'undefined' && window.document && window.document.createElement;\n\nfunction supportsTouchEvents() {\n  return isBrowser && 'ontouchstart' in window;\n}\n\nfunction isTouchScreen() {\n  return supportsTouchEvents() || isBrowser && window.navigator.maxTouchPoints > 1;\n}\n\nfunction supportsPointerEvents() {\n  return isBrowser && 'onpointerdown' in window;\n}\n\nfunction supportsPointerLock() {\n  return isBrowser && 'exitPointerLock' in window.document;\n}\n\nfunction supportsGestureEvents() {\n  try {\n    return 'constructor' in GestureEvent;\n  } catch (e) {\n    return false;\n  }\n}\n\nconst SUPPORT = {\n  isBrowser,\n  gesture: supportsGestureEvents(),\n  touch: supportsTouchEvents(),\n  touchscreen: isTouchScreen(),\n  pointer: supportsPointerEvents(),\n  pointerLock: supportsPointerLock()\n};\n\nconst DEFAULT_PREVENT_SCROLL_DELAY = 250;\nconst DEFAULT_DRAG_DELAY = 180;\nconst DEFAULT_SWIPE_VELOCITY = 0.5;\nconst DEFAULT_SWIPE_DISTANCE = 50;\nconst DEFAULT_SWIPE_DURATION = 250;\nconst dragConfigResolver = _objectSpread2(_objectSpread2({}, coordinatesConfigResolver), {}, {\n  pointerLock(_v, _k, {\n    pointer: {\n      lock = false,\n      touch = false\n    } = {}\n  }) {\n    this.useTouch = SUPPORT.touch && touch;\n    return SUPPORT.pointerLock && lock;\n  },\n\n  device(_v, _k) {\n    if (this.useTouch) return 'touch';\n    if (this.pointerLock) return 'mouse';\n    if (SUPPORT.pointer) return 'pointer';\n    if (SUPPORT.touch) return 'touch';\n    return 'mouse';\n  },\n\n  preventScroll(value = false, _k, {\n    preventScrollAxis = 'y'\n  }) {\n    if (preventScrollAxis) this.preventScrollAxis = preventScrollAxis;\n    if (!SUPPORT.touchscreen) return false;\n    if (typeof value === 'number') return value;\n    return value ? DEFAULT_PREVENT_SCROLL_DELAY : false;\n  },\n\n  pointerCapture(_v, _k, {\n    pointer: {\n      capture = true,\n      buttons = 1\n    } = {}\n  }) {\n    this.pointerButtons = buttons;\n    return !this.pointerLock && this.device === 'pointer' && capture;\n  },\n\n  threshold(value, _k, {\n    filterTaps = false,\n    axis = undefined\n  }) {\n    const threshold = V.toVector(value, filterTaps ? 3 : axis ? 1 : 0);\n    this.filterTaps = filterTaps;\n    return threshold;\n  },\n\n  swipe({\n    velocity = DEFAULT_SWIPE_VELOCITY,\n    distance = DEFAULT_SWIPE_DISTANCE,\n    duration = DEFAULT_SWIPE_DURATION\n  } = {}) {\n    return {\n      velocity: this.transform(V.toVector(velocity)),\n      distance: this.transform(V.toVector(distance)),\n      duration\n    };\n  },\n\n  delay(value = 0) {\n    switch (value) {\n      case true:\n        return DEFAULT_DRAG_DELAY;\n\n      case false:\n        return 0;\n\n      default:\n        return value;\n    }\n  }\n\n});\n\nif (process.env.NODE_ENV === 'development') {\n  Object.assign(dragConfigResolver, {\n    useTouch(value) {\n      if (value !== undefined) {\n        throw Error(`[@use-gesture]: \\`useTouch\\` option has been renamed to \\`pointer.touch\\`. Use it as in \\`{ pointer: { touch: true } }\\`.`);\n      }\n\n      return NaN;\n    },\n\n    experimental_preventWindowScrollY(value) {\n      if (value !== undefined) {\n        throw Error(`[@use-gesture]: \\`experimental_preventWindowScrollY\\` option has been renamed to \\`preventScroll\\`.`);\n      }\n\n      return NaN;\n    },\n\n    swipeVelocity(value) {\n      if (value !== undefined) {\n        throw Error(`[@use-gesture]: \\`swipeVelocity\\` option has been renamed to \\`swipe.velocity\\`. Use it as in \\`{ swipe: { velocity: 0.5 } }\\`.`);\n      }\n\n      return NaN;\n    },\n\n    swipeDistance(value) {\n      if (value !== undefined) {\n        throw Error(`[@use-gesture]: \\`swipeDistance\\` option has been renamed to \\`swipe.distance\\`. Use it as in \\`{ swipe: { distance: 50 } }\\`.`);\n      }\n\n      return NaN;\n    },\n\n    swipeDuration(value) {\n      if (value !== undefined) {\n        throw Error(`[@use-gesture]: \\`swipeDuration\\` option has been renamed to \\`swipe.duration\\`. Use it as in \\`{ swipe: { duration: 250 } }\\`.`);\n      }\n\n      return NaN;\n    }\n\n  });\n}\n\nconst SCALE_ANGLE_RATIO_INTENT_DEG = 30;\nconst PINCH_WHEEL_RATIO = 36;\nclass PinchEngine extends Engine {\n  constructor(...args) {\n    super(...args);\n\n    _defineProperty(this, \"ingKey\", 'pinching');\n\n    _defineProperty(this, \"aliasKey\", 'da');\n  }\n\n  init() {\n    this.state.offset = [1, 0];\n    this.state.lastOffset = [1, 0];\n    this.state._pointerEvents = new Map();\n  }\n\n  reset() {\n    super.reset();\n    const state = this.state;\n    state._touchIds = [];\n    state.canceled = false;\n    state.cancel = this.cancel.bind(this);\n    state.turns = 0;\n  }\n\n  computeOffset() {\n    const {\n      type,\n      movement,\n      lastOffset\n    } = this.state;\n\n    if (type === 'wheel') {\n      this.state.offset = V.add(movement, lastOffset);\n    } else {\n      this.state.offset = [(1 + movement[0]) * lastOffset[0], movement[1] + lastOffset[1]];\n    }\n  }\n\n  computeMovement() {\n    const {\n      offset,\n      lastOffset\n    } = this.state;\n    this.state.movement = [offset[0] / lastOffset[0], offset[1] - lastOffset[1]];\n  }\n\n  intent(v) {\n    const state = this.state;\n\n    if (!state.axis) {\n      const axisMovementDifference = Math.abs(v[0]) * SCALE_ANGLE_RATIO_INTENT_DEG - Math.abs(v[1]);\n      if (axisMovementDifference < 0) state.axis = 'angle';else if (axisMovementDifference > 0) state.axis = 'scale';\n    }\n\n    if (this.config.lockDirection) {\n      if (state.axis === 'scale') v[1] = 0;else if (state.axis === 'angle') v[0] = 0;\n    }\n  }\n\n  cancel() {\n    const state = this.state;\n    if (state.canceled) return;\n    setTimeout(() => {\n      state.canceled = true;\n      state._active = false;\n      this.compute();\n      this.emit();\n    }, 0);\n  }\n\n  touchStart(event) {\n    this.ctrl.setEventIds(event);\n    const state = this.state;\n    const ctrlTouchIds = this.ctrl.touchIds;\n\n    if (state._active) {\n      if (state._touchIds.every(id => ctrlTouchIds.has(id))) return;\n    }\n\n    if (ctrlTouchIds.size < 2) return;\n    this.start(event);\n    state._touchIds = Array.from(ctrlTouchIds).slice(0, 2);\n    const payload = touchDistanceAngle(event, state._touchIds);\n    this.pinchStart(event, payload);\n  }\n\n  pointerStart(event) {\n    if (event.buttons != null && event.buttons % 2 !== 1) return;\n    this.ctrl.setEventIds(event);\n    event.target.setPointerCapture(event.pointerId);\n    const state = this.state;\n    const _pointerEvents = state._pointerEvents;\n    const ctrlPointerIds = this.ctrl.pointerIds;\n\n    if (state._active) {\n      if (Array.from(_pointerEvents.keys()).every(id => ctrlPointerIds.has(id))) return;\n    }\n\n    if (_pointerEvents.size < 2) {\n      _pointerEvents.set(event.pointerId, event);\n    }\n\n    if (state._pointerEvents.size < 2) return;\n    this.start(event);\n    const payload = distanceAngle(...Array.from(_pointerEvents.values()));\n    this.pinchStart(event, payload);\n  }\n\n  pinchStart(event, payload) {\n    const state = this.state;\n    state.origin = payload.origin;\n    this.computeValues([payload.distance, payload.angle]);\n    this.computeInitial();\n    this.compute(event);\n    this.emit();\n  }\n\n  touchMove(event) {\n    if (!this.state._active) return;\n    const payload = touchDistanceAngle(event, this.state._touchIds);\n    this.pinchMove(event, payload);\n  }\n\n  pointerMove(event) {\n    const _pointerEvents = this.state._pointerEvents;\n\n    if (_pointerEvents.has(event.pointerId)) {\n      _pointerEvents.set(event.pointerId, event);\n    }\n\n    if (!this.state._active) return;\n    const payload = distanceAngle(...Array.from(_pointerEvents.values()));\n    this.pinchMove(event, payload);\n  }\n\n  pinchMove(event, payload) {\n    const state = this.state;\n    const prev_a = state._values[1];\n    const delta_a = payload.angle - prev_a;\n    let delta_turns = 0;\n    if (Math.abs(delta_a) > 270) delta_turns += Math.sign(delta_a);\n    this.computeValues([payload.distance, payload.angle - 360 * delta_turns]);\n    state.origin = payload.origin;\n    state.turns = delta_turns;\n    state._movement = [state._values[0] / state._initial[0] - 1, state._values[1] - state._initial[1]];\n    this.compute(event);\n    this.emit();\n  }\n\n  touchEnd(event) {\n    this.ctrl.setEventIds(event);\n    if (!this.state._active) return;\n\n    if (this.state._touchIds.some(id => !this.ctrl.touchIds.has(id))) {\n      this.state._active = false;\n      this.compute(event);\n      this.emit();\n    }\n  }\n\n  pointerEnd(event) {\n    const state = this.state;\n    this.ctrl.setEventIds(event);\n\n    try {\n      event.target.releasePointerCapture(event.pointerId);\n    } catch (_unused) {}\n\n    if (state._pointerEvents.has(event.pointerId)) {\n      state._pointerEvents.delete(event.pointerId);\n    }\n\n    if (!state._active) return;\n\n    if (state._pointerEvents.size < 2) {\n      state._active = false;\n      this.compute(event);\n      this.emit();\n    }\n  }\n\n  gestureStart(event) {\n    if (event.cancelable) event.preventDefault();\n    const state = this.state;\n    if (state._active) return;\n    this.start(event);\n    this.computeValues([event.scale, event.rotation]);\n    state.origin = [event.clientX, event.clientY];\n    this.compute(event);\n    this.emit();\n  }\n\n  gestureMove(event) {\n    if (event.cancelable) event.preventDefault();\n    if (!this.state._active) return;\n    const state = this.state;\n    this.computeValues([event.scale, event.rotation]);\n    state.origin = [event.clientX, event.clientY];\n    const _previousMovement = state._movement;\n    state._movement = [event.scale - 1, event.rotation];\n    state._delta = V.sub(state._movement, _previousMovement);\n    this.compute(event);\n    this.emit();\n  }\n\n  gestureEnd(event) {\n    if (!this.state._active) return;\n    this.state._active = false;\n    this.compute(event);\n    this.emit();\n  }\n\n  wheel(event) {\n    if (!event.ctrlKey) return;\n    if (!this.state._active) this.wheelStart(event);else this.wheelChange(event);\n    this.timeoutStore.add('wheelEnd', this.wheelEnd.bind(this));\n  }\n\n  wheelStart(event) {\n    this.start(event);\n    this.wheelChange(event);\n  }\n\n  wheelChange(event) {\n    const isR3f = ('uv' in event);\n\n    if (!isR3f) {\n      if (event.cancelable) {\n        event.preventDefault();\n      }\n\n      if (process.env.NODE_ENV === 'development' && !event.defaultPrevented) {\n        console.warn(`[@use-gesture]: To properly support zoom on trackpads, try using the \\`target\\` option.\\n\\nThis message will only appear in development mode.`);\n      }\n    }\n\n    const state = this.state;\n    state._delta = [-wheelValues(event)[1] / PINCH_WHEEL_RATIO * state.offset[0], 0];\n    V.addTo(state._movement, state._delta);\n    this.state.origin = [event.clientX, event.clientY];\n    this.compute(event);\n    this.emit();\n  }\n\n  wheelEnd() {\n    if (!this.state._active) return;\n    this.state._active = false;\n    this.compute();\n    this.emit();\n  }\n\n  bind(bindFunction) {\n    const device = this.config.device;\n\n    if (!!device) {\n      bindFunction(device, 'start', this[device + 'Start'].bind(this));\n      bindFunction(device, 'change', this[device + 'Move'].bind(this));\n      bindFunction(device, 'end', this[device + 'End'].bind(this));\n      bindFunction(device, 'cancel', this[device + 'End'].bind(this));\n    } else {\n      bindFunction('wheel', '', this.wheel.bind(this), {\n        passive: false\n      });\n    }\n  }\n\n}\n\nconst pinchConfigResolver = _objectSpread2(_objectSpread2({}, commonConfigResolver), {}, {\n  useTouch(_v, _k, {\n    pointer: {\n      touch = false\n    } = {}\n  }) {\n    return SUPPORT.touch && touch;\n  },\n\n  device(_v, _k, config) {\n    const sharedConfig = config.shared;\n    if (sharedConfig.target && !SUPPORT.touch && SUPPORT.gesture) return 'gesture';\n    if (this.useTouch) return 'touch';\n\n    if (SUPPORT.touchscreen) {\n      if (SUPPORT.pointer) return 'pointer';\n      if (SUPPORT.touch) return 'touch';\n    }\n  },\n\n  bounds(_v, _k, {\n    scaleBounds = {},\n    angleBounds = {}\n  }) {\n    const _scaleBounds = state => {\n      const D = assignDefault(call(scaleBounds, state), {\n        min: -Infinity,\n        max: Infinity\n      });\n      return [D.min, D.max];\n    };\n\n    const _angleBounds = state => {\n      const A = assignDefault(call(angleBounds, state), {\n        min: -Infinity,\n        max: Infinity\n      });\n      return [A.min, A.max];\n    };\n\n    if (typeof scaleBounds !== 'function' && typeof angleBounds !== 'function') return [_scaleBounds(), _angleBounds()];\n    return state => [_scaleBounds(state), _angleBounds(state)];\n  },\n\n  threshold(value, _k, config) {\n    this.lockDirection = config.axis === 'lock';\n    const threshold = V.toVector(value, this.lockDirection ? [0.1, 3] : 0);\n    return threshold;\n  }\n\n});\n\nclass MoveEngine extends CoordinatesEngine {\n  constructor(...args) {\n    super(...args);\n\n    _defineProperty(this, \"ingKey\", 'moving');\n  }\n\n  move(event) {\n    if (this.config.mouseOnly && event.pointerType !== 'mouse') return;\n    if (!this.state._active) this.moveStart(event);else this.moveChange(event);\n    this.timeoutStore.add('moveEnd', this.moveEnd.bind(this));\n  }\n\n  moveStart(event) {\n    this.start(event);\n    this.computeValues(pointerValues(event));\n    this.compute(event);\n    this.computeInitial();\n    this.emit();\n  }\n\n  moveChange(event) {\n    if (!this.state._active) return;\n    const values = pointerValues(event);\n    const state = this.state;\n    state._delta = V.sub(values, state._values);\n    V.addTo(state._movement, state._delta);\n    this.computeValues(values);\n    this.compute(event);\n    this.emit();\n  }\n\n  moveEnd(event) {\n    if (!this.state._active) return;\n    this.state._active = false;\n    this.compute(event);\n    this.emit();\n  }\n\n  bind(bindFunction) {\n    bindFunction('pointer', 'change', this.move.bind(this));\n    bindFunction('pointer', 'leave', this.moveEnd.bind(this));\n  }\n\n}\n\nconst moveConfigResolver = _objectSpread2(_objectSpread2({}, coordinatesConfigResolver), {}, {\n  mouseOnly: (value = true) => value\n});\n\nclass ScrollEngine extends CoordinatesEngine {\n  constructor(...args) {\n    super(...args);\n\n    _defineProperty(this, \"ingKey\", 'scrolling');\n  }\n\n  scroll(event) {\n    if (!this.state._active) this.start(event);\n    this.scrollChange(event);\n    this.timeoutStore.add('scrollEnd', this.scrollEnd.bind(this));\n  }\n\n  scrollChange(event) {\n    if (event.cancelable) event.preventDefault();\n    const state = this.state;\n    const values = scrollValues(event);\n    state._delta = V.sub(values, state._values);\n    V.addTo(state._movement, state._delta);\n    this.computeValues(values);\n    this.compute(event);\n    this.emit();\n  }\n\n  scrollEnd() {\n    if (!this.state._active) return;\n    this.state._active = false;\n    this.compute();\n    this.emit();\n  }\n\n  bind(bindFunction) {\n    bindFunction('scroll', '', this.scroll.bind(this));\n  }\n\n}\n\nconst scrollConfigResolver = coordinatesConfigResolver;\n\nclass WheelEngine extends CoordinatesEngine {\n  constructor(...args) {\n    super(...args);\n\n    _defineProperty(this, \"ingKey\", 'wheeling');\n  }\n\n  wheel(event) {\n    if (!this.state._active) this.start(event);\n    this.wheelChange(event);\n    this.timeoutStore.add('wheelEnd', this.wheelEnd.bind(this));\n  }\n\n  wheelChange(event) {\n    const state = this.state;\n    state._delta = wheelValues(event);\n    V.addTo(this.state._movement, state._delta);\n    this.compute(event);\n    this.emit();\n  }\n\n  wheelEnd() {\n    if (!this.state._active) return;\n    this.state._active = false;\n    this.compute();\n    this.emit();\n  }\n\n  bind(bindFunction) {\n    bindFunction('wheel', '', this.wheel.bind(this));\n  }\n\n}\n\nconst wheelConfigResolver = coordinatesConfigResolver;\n\nclass HoverEngine extends CoordinatesEngine {\n  constructor(...args) {\n    super(...args);\n\n    _defineProperty(this, \"ingKey\", 'hovering');\n  }\n\n  enter(event) {\n    if (this.config.mouseOnly && event.pointerType !== 'mouse') return;\n    this.start(event);\n    this.computeValues(pointerValues(event));\n    this.compute(event);\n    this.emit();\n  }\n\n  leave(event) {\n    if (this.config.mouseOnly && event.pointerType !== 'mouse') return;\n    const state = this.state;\n    if (!state._active) return;\n    state._active = false;\n    const values = pointerValues(event);\n    state._movement = state._delta = V.sub(values, state._values);\n    this.computeValues(values);\n    this.compute(event);\n    state.delta = state.movement;\n    this.emit();\n  }\n\n  bind(bindFunction) {\n    bindFunction('pointer', 'enter', this.enter.bind(this));\n    bindFunction('pointer', 'leave', this.leave.bind(this));\n  }\n\n}\n\nconst hoverConfigResolver = _objectSpread2(_objectSpread2({}, coordinatesConfigResolver), {}, {\n  mouseOnly: (value = true) => value\n});\n\nconst EngineMap = new Map();\nconst ConfigResolverMap = new Map();\nfunction registerAction(action) {\n  EngineMap.set(action.key, action.engine);\n  ConfigResolverMap.set(action.key, action.resolver);\n}\nconst dragAction = {\n  key: 'drag',\n  engine: DragEngine,\n  resolver: dragConfigResolver\n};\nconst hoverAction = {\n  key: 'hover',\n  engine: HoverEngine,\n  resolver: hoverConfigResolver\n};\nconst moveAction = {\n  key: 'move',\n  engine: MoveEngine,\n  resolver: moveConfigResolver\n};\nconst pinchAction = {\n  key: 'pinch',\n  engine: PinchEngine,\n  resolver: pinchConfigResolver\n};\nconst scrollAction = {\n  key: 'scroll',\n  engine: ScrollEngine,\n  resolver: scrollConfigResolver\n};\nconst wheelAction = {\n  key: 'wheel',\n  engine: WheelEngine,\n  resolver: wheelConfigResolver\n};\n\nexport { ConfigResolverMap as C, EngineMap as E, SUPPORT as S, _objectSpread2 as _, _defineProperty as a, touchIds as b, chain as c, toHandlerProp as d, dragAction as e, hoverAction as h, isTouch as i, moveAction as m, pinchAction as p, registerAction as r, scrollAction as s, toDomEventType as t, wheelAction as w };\n"]},"metadata":{},"sourceType":"module"}